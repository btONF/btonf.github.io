{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\ud83c\udfe0\u9996\u9875","text":"Welcome to Bt's Docs &gt;_ \u201c\u4e0d\u4e3a\u8349\u6728\uff0c\u968f\u9047\u800c\u5b89\u201d <ul> <li> <p> Android \u5e38\u7528\u547d\u4ee4</p> <p>\u5f00\u53d1\u547d\u4ee4\u5907\u5fd8</p> <p> \u67e5\u770b</p> </li> <li> <p> Material \u914d\u7f6e</p> <ul> <li>  \u8868\u60c5</li> </ul> <p> \u66f4\u591a\u914d\u7f6e</p> </li> <li> <p> Mermaid</p> <ul> <li>\u6cf3\u9053\u56fe</li> <li>\u6d41\u7a0b\u56fe</li> </ul> <p> \u66f4\u591a\u56fe\u8868</p> </li> <li> <p> \u8d44\u6e90\u6536\u96c6</p> <ul> <li>svg \u56fe\u6807</li> </ul> </li> </ul>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/UI/%E5%9B%BE%E6%A0%87%E5%BA%93/","title":"\u56fe\u6807\u5e93","text":""},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/UI/%E5%9B%BE%E6%A0%87%E5%BA%93/#_1","title":"\u56fd\u5185","text":"<ul> <li>icon font (\u963f\u91cc\u56fe\u6807\u5e93)</li> </ul>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/UI/%E5%9B%BE%E6%A0%87%E5%BA%93/#_2","title":"\u56fd\u5916","text":"<ul> <li>User SVG Vectors and Icons - SVG Repo</li> <li>Material Design Icons - Icon Library - Pictogrammers</li> <li>Download free icons, music, stock photos, vectors</li> <li></li> </ul>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/","title":"\u5730\u56fe\u6e90","text":""},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#_1","title":"\u3010\u56fd\u5185\u9ad8\u6e05\u5730\u56fe\u3011\uff08\u901f\u5ea6\u6162\uff09","text":"<p>https://0pn.cn/maps/vt?lyrs=s&amp;x={x}&amp;y={y}&amp;z={z}&amp;src=app&amp;scale=2&amp;from=app</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#2024","title":"\u3010\u63a8\u8350\uff1a2024\u6700\u65b0\u7248\u9ad8\u6e05\u56fe\u5c42\uff08\u4e00\uff09\u3011\u5df2\u5931\u6548","text":"<p>https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&amp;gl=US&amp;x={x}&amp;y={y}&amp;z={z}</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#2024_1","title":"\u3010\u63a8\u8350\uff1a2024\u6700\u65b0\u7248\u9ad8\u6e05\u56fe\u5c42\uff08\u4e8c\uff09\u3011","text":"<p>https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#_2","title":"\u3010\u9ad8\u5fb7\u5f71\u50cf\u56fe\u5c42\u3011","text":"<p>http://webst01.is.autonavi.com/appmaptile?style=6&amp;x={x}&amp;y={y}&amp;z={z}</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#_3","title":"\u3010\u9ad8\u5fb7\u77e2\u91cf\u5e95\u56fe\u56fe\u5c42\u3011","text":"<p>https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&amp;size=1&amp;scale=1&amp;style=7&amp;x={x}&amp;y={y}&amp;z={z}</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#_4","title":"\u3010\u9ad8\u5fb7\u536b\u661f\u5f71\u50cf\u56fe\u5c42\u3011","text":"<p>https://webst01.is.autonavi.com/appmaptile?style=6&amp;x={x}&amp;y={y}&amp;z={z}</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#arcgis","title":"\u3010ArcGIS\u8857\u9053\u3011","text":"<p>https://server.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#_5","title":"\u3010\u8c37\u6b4c\u8857\u9053\u5730\u56fe\u3011","text":"<p>http://gac-geo.googlecnapps.cn/maps/vt?lyrs=m&amp;x={x}&amp;y={y}&amp;z={z}</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E6%BA%90/#wayback","title":"\u3010Wayback\u4e0d\u540c\u65f6\u5e8f\u56fe\u5c42\u3011","text":"<p>https://wayback.maptiles.arcgis.com/arcgis/rest/services/world_imagery/wmts/1.0.0/default028mm/mapserver/tile/45441/{z}/{y}/{x}</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E7%9B%B8%E5%85%B3%E5%BA%93/","title":"\u5730\u56fe\u76f8\u5173\u5e93","text":""},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E7%9B%B8%E5%85%B3%E5%BA%93/#gdal","title":"GDAL","text":""},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E7%9B%B8%E5%85%B3%E5%BA%93/#_1","title":"\u6587\u6863","text":"<p>https://gdal.org/en/latest/java/index.html</p> <p>\u8be5\u94fe\u63a5\u5185\u4ec5\u6709 Java \u7248\u672c\u7684\u63a5\u53e3\u4fe1\u606f\uff0c\u4e0d\u5305\u542b JNI</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E7%9B%B8%E5%85%B3%E5%BA%93/#aar","title":"aar","text":"<p> \u4e0b\u8f7d</p> <p>\u5df2\u57fa\u4e8e gdal 3.7.0 \u7684 so \u5e93\u7f16\u8bd1\u4ea7\u751faar</p>"},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E7%9B%B8%E5%85%B3%E5%BA%93/#arcgis","title":"Arcgis","text":""},{"location":"%F0%9F%8C%90%20%E5%AF%BC%E8%88%AA/%E5%9C%B0%E5%9B%BE/%E5%9C%B0%E5%9B%BE%E7%9B%B8%E5%85%B3%E5%BA%93/#android","title":"Android","text":"JavaKotlin <p>https://developers.arcgis.com/android/</p> <p>https://developers.arcgis.com/android/api-reference/reference/</p> <p>https://developers.arcgis.com/kotlin/</p> <p>https://developers.arcgis.com/kotlin/api-reference/</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","title":"MQTT \u6570\u636e\u7ed3\u6784","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_1","title":"\u65e0\u4eba\u673a\u6d88\u606f\u5173\u7cfb","text":"<pre><code>classDiagram\n    class AplProto {\n        +int id\n        +string type\n        +long time\n        +body \"Contains message, request, or response data\"\n    }\n\n    class Message {\n        +string messageContent\n    }\n\n    class Request {\n        +string requestContent\n    }\n\n    class Response {\n        +string responseContent\n    }\n\n    class MQTT {\n        +string topic\n        +AplProto aplProto\n    }\n\n    OldProtocol --&gt; AplProto : Contains\n    NewProtocol --&gt; MQTT : Contains\n    MQTT --&gt; AplProto : Contains\n    AplProto --&gt; Message : Contains \"if type == message\"\n    AplProto --&gt; Request : Contains \"if type == request\"\n    AplProto --&gt; Response : Contains \"if type == response\"\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_2","title":"\u57fa\u7840\u7ed3\u6784\u4f53","text":"<p>\u5206\u4e3a MQTT \u6570\u636e\u4f53\uff0c\u548c\u5305\u88c5\u5728 MQTT \u5185\u90e8\u7684\uff0c\u539f\u59cb\u7684 PB \u6570\u636e</p> <p>\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u53ef\u80fd\u4f1a\u6269\u5145 MQTT \u643a\u5e26\u7684\u5b57\u6bb5\uff0c\u4ee5\u53ca PB \u5185\u90e8\u7684 Body \u6570\u636e\u3002</p> MQTTpb <pre><code>Topic: \"topic\"\nBody: {\n    pb: AplProto, // \u6d88\u606f\u4e3b\u4f53\u5c31\u662f\u539f\u672c\u7684pb\u6570\u636e\u4f53\n}\n</code></pre> <pre><code>AplProto {\n    id: 0, // \u81ea\u589e id,\u65b0\u589e\u5b57\u6bb5\uff0c\u4ee5\u786e\u4fdd\u591a\u94fe\u8def\u6570\u636e\u53bb\u91cd\u4e0e\u6392\u5e8f\n    type: Workrequest/Workresponse/WorkMessage; // \u6d88\u606f\u7c7b\u578b\n    time:1736901269952, // \u65f6\u95f4\u6233\uff0c\u8868\u793a\u53d1\u9001\u65f6\u95f4\n    body: byteData; // \u6839\u636e\u6d88\u606f\u7c7b\u578b\uff0c\u4f20\u5165\u5bf9\u5e94\u7684\u6570\u636e\u7ed3\u6784 \n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_3","title":"\u9065\u6d4b\u6570\u636e","text":"MQTTpbWorkMessage <p><code>Topic</code> \u5b9a\u5236\uff0c\u63a5\u6536\u6307\u5b9a\u65e0\u4eba\u673a\u7684\u9065\u6d4b\uff0c\u683c\u5f0f\u5982\u4e0b</p> <p><code>/t/a/{apl_id}/from_apl_q0</code> </p> <p>\u8fd9\u91cc\u6700\u540e\u7684<code>q0</code>\u6307\u4ee3 MQTT \u4e2d\u7684 <code>QoS0</code>\u7c7b\u578b\uff0c\u9065\u6d4b\u6d88\u606f\u6709\u591a\u4e2a\u63a5\u6536\u65b9\uff0c\u4e0d\u8981\u6c42\u63a5\u6536\u65b9\u5fc5\u987b\u6536\u5230\u4e14\u7ed9\u5230\u56de\u590d\uff0c\u6545\u4f7f\u7528\u4f18\u5148\u7ea7\u6700\u4f4e\u7684 <code>QoS0</code>\u3002</p> <pre><code>Topic: \"/t/a/{apl_id}/from_apl_q0\"\nBody: {\n    pb: AplProto, // \u6d88\u606f\u4e3b\u4f53\u5c31\u662f\u539f\u672c\u7684pb\u6570\u636e\u4f53\n}\n</code></pre> <p>\u6d88\u606f\u7c7b\u578b\u5728\u9065\u6d4b\u573a\u666f\u4e0b\u56fa\u5b9a\u4e3a<code>WorkMessage</code></p> <pre><code>AplProto {\n    id: 0, // \u81ea\u589e id,\u65b0\u589e\u5b57\u6bb5\uff0c\u4ee5\u786e\u4fdd\u591a\u94fe\u8def\u6570\u636e\u53bb\u91cd\u4e0e\u6392\u5e8f\n    type: WorkMessage; // \u6d88\u606f\u7c7b\u578b\n    time:1736901269952, // \u65f6\u95f4\u6233\uff0c\u8868\u793a\u53d1\u9001\u65f6\u95f4\n    body: byteData; // \u6839\u636e\u6d88\u606f\u7c7b\u578b\uff0c\u4f20\u5165\u5bf9\u5e94\u7684\u6570\u636e\u7ed3\u6784 \n}\n</code></pre> <p>\u8fd9\u91cc\u5185\u90e8\u7684\u6570\u636e\u548c\u5f53\u524d\u7ebf\u4e0a\u7248\u672c\u7684\u5185\u5bb9\u4e00\u81f4\uff0c\u4e0d\u505a\u8c03\u6574</p> <pre><code>// Apollo\u6267\u884c\u5de5\u4f5c\u4e2d\u7684\u72b6\u6001\u6570\u636e\nmessage WorkMessage\n{\n    string topic = 1; //\u6d88\u606f\u4e3b\u9898\n    string protocal_version = 2; //\u534f\u8bae\u7248\u672c\u53f7\n    bytes body = 3; //\u6d88\u606f\u5185\u5bb9\uff0c\u683c\u5f0f\u6709\u5e94\u7528\u786e\u5b9a\n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_4","title":"\u8bf7\u6c42\u7c7b\u6d88\u606f","text":"MQTTpbWorkRequest <p>\u8fd9\u91cc\u7684\u6d88\u606f\u5e94\u5f53\u4f7f\u7528<code>QoS1</code>\u7684\u7c7b\u578b\uff0c\u56e0\u4e3a\u9700\u8981\u786e\u4fdd\u53d1\u9001\u7684\u6d88\u606f\u80fd\u591f\u6b63\u786e\u9001\u8fbe\uff0c\u4f46\u662f\u56e0\u4e3a\u540c\u65f6\u5b58\u5728\u4e91\u7aef\u548c\u65e0\u4eba\u673a\u4e24\u79cd\u6765\u6e90\uff0c\u5219\u539f\u672c<code>QoS2</code>\u7684\u7c7b\u578b\u672c\u8eab\u5c31\u53d8\u5f97\u4e0d\u53ef\u9760\uff0c\u5e76\u4e14<code>QoS2</code>\u7684\u6d88\u606f\u5bf9 Broker \u7684\u6027\u80fd\u4e5f\u4f1a\u9020\u6210\u6d6a\u8d39</p> <p><code>Topic</code> \u5b9a\u5236\uff0c\u6839\u636e\u63a5\u6536\u65b9\u7684\u4e0d\u540c\uff0c\u6709\u4ee5\u4e0b2\u79cd\u683c\u5f0f</p> <p>\u63a5\u6536\u65b9\u4e3a\u65e0\u4eba\u673a\uff1a<code>/t/i/{apl_id}/to_apl_q1</code></p> <p>\u63a5\u6536\u65b9\u4e3aApp\uff1a<code>/t/tia/{apl_id}/to_app_q1</code></p> <p>\u540e\u7eed\u53ef\u80fd\u5b58\u5728\u66f4\u591a\u7684\u7c7b\u578b\uff0c\u90a3\u4e48\u53ef\u4ee5\u7ee7\u7eed\u6269\u5145\uff0c\u5bf9\u5e94 Client \u53ea\u9700\u8981\u5173\u6ce8\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\u6d88\u606f\u5373\u53ef</p> <pre><code>Topic: /t/a/{apl_id}/from_apl_q0 / /t/tia/{apl_id}/to_app_q1\nBody: {\n    pb: AplProto, // \u6d88\u606f\u4e3b\u4f53\u5c31\u662f\u539f\u672c\u7684pb\u6570\u636e\u4f53\n}\n</code></pre> <p>\u6d88\u606f\u7c7b\u578b\u5728\u53d1\u9001\u547d\u4ee4/\u8bf7\u6c42\u573a\u666f\u4e0b\u56fa\u5b9a\u4e3a<code>WorkRequest</code></p> <pre><code>AplProto {\n    id: 0, // \u81ea\u589e id,\u65b0\u589e\u5b57\u6bb5\uff0c\u4ee5\u786e\u4fdd\u591a\u94fe\u8def\u6570\u636e\u53bb\u91cd\u4e0e\u6392\u5e8f\n    type: WorkRequest; // \u6d88\u606f\u7c7b\u578b\n    time:1736901269952, // \u65f6\u95f4\u6233\uff0c\u8868\u793a\u53d1\u9001\u65f6\u95f4\n    body: byteData; // \u6839\u636e\u6d88\u606f\u7c7b\u578b\uff0c\u4f20\u5165\u5bf9\u5e94\u7684\u6570\u636e\u7ed3\u6784 \n    String responseId = uniqueId // topic for response\n}\n</code></pre> <p>\u8fd9\u91cc\u5185\u90e8\u7684\u6570\u636e\u548c\u5f53\u524d\u7ebf\u4e0a\u7248\u672c\u7684\u5185\u5bb9\u4e00\u81f4\uff0c\u4e0d\u505a\u8c03\u6574</p> <pre><code>// Apollo\u6267\u884c\u5de5\u4f5c\u4e2d\u7684\u72b6\u6001\u6570\u636e\nmessage WorkRequest\n{\nstring cmd = 1; //\u547d\u4ee4\nuint32 id = 2;  //\u547d\u4ee4\u60df\u4e00\u6807\u8bc6\nuint32 delay = 3 ; //\u662f\u5426\u5ef6\u8fdf\u6267\u884c ms\nuint32 times = 4 ; //\u6267\u884c\u6b21\u6570\nuint32 interval = 5 ; //\u6267\u884c\u95f4\u9694 ms  \nstring protocal_version = 6; //\u534f\u8bae\u7248\u672c\u53f7\nbytes args = 7; //\u547d\u4ee4\u53c2\u6570, \u5177\u4f53\u7ed3\u6784\u6709\u5e94\u7528\u53bb\u7ea6\u5b9a\uff0c\u8f6c\u6210\u5b57\u8282\u7801\u540e\u5b58\u653e\u6b64\u5904 \n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_5","title":"\u54cd\u5e94\u7c7b\u6d88\u606f","text":"<p>\u6d88\u606f\u7edf\u4e00\u4f7f\u7528<code>QoS1</code>\u7b49\u7ea7\uff0c\u539f\u56e0\u548c Request \u4e00\u6837\uff0c\u5728\u5f53\u524d\u73af\u5883\u4e0b\uff0c<code>QoS2</code> \u4e0d\u518d\u53ef\u9760\u4e14\u4f1a\u9020\u6210\u989d\u5916\u7684\u6027\u80fd\u6d6a\u8d39\u3002</p> <p>MQTT \u7684\u54cd\u5e94\u65b9\u5f0f\u5f85\u8ba8\u8bba</p> <ul> <li>\u65b9\u68481\uff1a\u56fa\u5b9a Topic\uff0c\u6309\u7167\u9884\u8bbe\u7684 Topic \u8fdb\u884c\u76d1\u542c\u3002\uff08\u73b0\u6709\u7684Apollo\u548c\u670d\u52a1\u5668\u7684\u4ea4\u4e92\u65b9\u5f0f\uff09</li> <li>\u65b9\u68482\uff1a\u968f\u673a Topic\uff0c\u8be5 Topic \u7531 Request \u643a\u5e26\uff0cResponse \u53d1\u5e03\u7684 Topic \u4f7f\u7528\u8be5 Topic\u3002</li> </ul> MQTT \u56fa\u5b9a TopicMQTT \u968f\u673a TopicpbWorkresponse <p>\u56fa\u5b9a Topic\uff1a</p> <ul> <li>/t/a/{apl_id}/from_apl_q1</li> <li>/t/tia/{apl_id}/from_app_q1</li> </ul> <p>\u8be5\u65b9\u5f0f\u662f\u5f53\u524d Apollo \u548c\u670d\u52a1\u5668\u7684\u4ea4\u4e92\u65b9\u5f0f\uff0c\u4f46\u662f\u5b58\u5728\u4ee5\u4e0b\u95ee\u9898\u9700\u8981\u8ba8\u8bba\uff1a</p> <ol> <li>\u54cd\u5e94\u4f7f\u7528\u7684\u662f\u9065\u6d4b\u76f8\u540c Topic\uff0c\u4ec5\u4ec5\u662f<code>QoS</code>\u7b49\u7ea7\u4e0d\u540c\uff0c\u90a3\u4e48\u8be5 Topic \u4f1a\u6df7\u5408\u9065\u6d4b\u4e1a\u52a1\u903b\u8f91\u5728\u91cc\u9762\uff08\u65e0\u6cd5\u4fdd\u8bc1\u6709\u6ca1\u6709\u90e8\u5206\u9065\u6d4b\u4f1a\u8d70Q1\uff0c\u5728\u6982\u5ff5\u4e0a\u4ed6\u4eec\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2a Topic\uff09\uff0c\u5e76\u4e14\u8981\u5904\u7406\u6240\u6709\u6765\u81ea\u53d1\u9001\u65b9\u7684\u6570\u636e\uff0c\u5373\u4f7f\u67d0\u4e9b Request \u4e0d\u662f\u81ea\u5df1\u53d1\u9001\u7684\uff0c\u4e5f\u9700\u8981\u5904\u7406\u5bf9\u5e94\u7684 Response \u4fe1\u606f\u3002</li> <li>\u54cd\u5e94\u6765\u81ea\u5404\u4e2a\u65b9\u9762\uff0c\u5728\u5f53\u524d\u5b58\u57284\u79cd\u6e90\uff0cRC\uff0c\u79fb\u52a8\u8bbe\u5907\uff0c\u65e0\u4eba\u673a\uff0c\u670d\u52a1\u5668\u3002\u4e5f\u5c31\u662f\u8981\u540c\u65f6\u76d1\u542c\u591a\u7aef\u6570\u636e\uff0c\u5e76\u4e14\u8d70\u76f8\u540c\u7684\u5904\u7406\u903b\u8f91\uff0c\u4f1a\u5bf9\u4e1a\u52a1\u903b\u8f91\u9020\u6210\u5f71\u54cd\uff0c\u6216\u8005\u4e0d\u5fc5\u8981\u7684\u6d6a\u8d39\u3002</li> </ol> <pre><code>Topic: /t/a/{apl_id}/from_apl_q1 / /t/tia/{apl_id}/from_app_q1\nBody: {\n    pb: AplProto, // \u6d88\u606f\u4e3b\u4f53\u5c31\u662f\u539f\u672c\u7684pb\u6570\u636e\u4f53\n}\n</code></pre> <p>\u968f\u673a Topic \u6307\u7684\u662f\u5728\u53d1\u9001\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u751f\u6210\u4e00\u4e2a\u968f\u673a\u552f\u4e00 id\uff0c\u56de\u590d\u65f6\u53d1\u5e03\u8be5 id \u547d\u540d\u7684 Topic\uff0c\u8bf7\u6c42\u65b9\u5728\u53d1\u5e03\u524d\u76d1\u542c\u8be5 Topic\uff0c\u5e76\u5728\u63a5\u6536\u5230\u6d88\u606f\u6216\u8d85\u65f6\u540e\u53d6\u6d88\u76d1\u542c\u3002</p> <p>\u8be5\u65b9\u5f0f\u4f18\u52bf\u5728\u4e8e\u53ef\u4ee5\u7cbe\u51c6\u5339\u914d\u56de\u590d\u6d88\u606f\uff0c\u4e14\u56de\u590d\u7c7b\u578b\u7684\u6d88\u606f\u4e0d\u4f1a\u5bf9\u4e0d\u5173\u6ce8\u8be5\u6d88\u606f\u7684\u5ba2\u6237\u7aef\u4ea7\u751f\u5f71\u54cd\u3002 \u4f46\u662f\u8be5\u65b9\u5f0f\u5b58\u5728\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <ol> <li>\u968f\u673a id \u53ef\u80fd\u4f1a\u5bf9\u540e\u7eed\u7684\u95ee\u9898\u6392\u67e5\u5b58\u5728\u5e72\u6270</li> <li>\u8be5\u65b9\u5f0f\u662f\u5426\u5bf9apollo\u7684\u67b6\u6784\u5b58\u5728\u5f71\u54cd\uff0c\u5bf9\u8001\u7248\u672c\u7684\u517c\u5bb9\u6027\u5982\u4f55</li> </ol> <pre><code>Topic: id from request\nBody: {\n    pb: AplProto, // \u6d88\u606f\u4e3b\u4f53\u5c31\u662f\u539f\u672c\u7684pb\u6570\u636e\u4f53\n}\n</code></pre> <p>\u6d88\u606f\u7c7b\u578b\u5728\u53d1\u9001\u547d\u4ee4/\u8bf7\u6c42\u573a\u666f\u4e0b\u56fa\u5b9a\u4e3a<code>Workresponse</code></p> <pre><code>AplProto {\n    id: 0, // \u81ea\u589e id,\u65b0\u589e\u5b57\u6bb5\uff0c\u4ee5\u786e\u4fdd\u591a\u94fe\u8def\u6570\u636e\u53bb\u91cd\u4e0e\u6392\u5e8f\n    type: WorkRequest; // \u6d88\u606f\u7c7b\u578b\n    time:1736901269952, // \u65f6\u95f4\u6233\uff0c\u8868\u793a\u53d1\u9001\u65f6\u95f4\n    body: byteData; // \u6839\u636e\u6d88\u606f\u7c7b\u578b\uff0c\u4f20\u5165\u5bf9\u5e94\u7684\u6570\u636e\u7ed3\u6784 \n}\n</code></pre> <p>\u8fd9\u91cc\u5185\u90e8\u7684\u6570\u636e\u548c\u5f53\u524d\u7ebf\u4e0a\u7248\u672c\u7684\u5185\u5bb9\u4e00\u81f4\uff0c\u4e0d\u505a\u8c03\u6574</p> <pre><code>// Apollo\u6267\u884c\u5de5\u4f5c\u540e\u7684\u7ed3\u679c\nmessage WorkResponse\n{\n    string cmd = 1; //\u6267\u884c\u7684\u547d\u4ee4\n    uint32 id = 2;  //\u547d\u4ee4\u60df\u4e00\u6807\u8bc6\n    uint32 times = 3 ;//\u7b2c\u51e0\u6b21\u6267\u884c\n    uint32 status_code = 4;//\u547d\u4ee4\u6267\u884c\u72b6\u6001\u7801\n    bytes result  = 5; //\u5e94\u7528\u5177\u4f53\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u8f6c\u6210\u5b57\u8282\u7801\u540e\u5b58\u653e\u6b64\u5904\n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_6","title":"\u5176\u5b83\u7c7b\u6d88\u606f","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_7","title":"\u5fc3\u8df3","text":"<pre><code>message Heartbeat {\n  enum Type {\n      RC,\n      Drone,\n      Mobile\n      ...\n  }\n  Type type = 1;\n  string indentify = 2; // \n  int priority = 3; // \u8bbe\u5907\u7684\u4f18\u5148\u7ea7\uff0c\u5bf9\u4e8e \u65e0\u4eba\u673a\u65e0\u610f\u4e49\uff0c\u9ed8\u8ba4\u662f0\uff0cRC\u6839\u636e\u4e3b/\u526f\u63a7\u6765\u51b3\u5b9a\n  enum Capacity {\n      NONE = 0\uff0c\n      MONITOR = 1,\n      AUTO_DRIVER = 2,\n      MANUAL_DRIVER = 4\uff0c\n  }\n  int capacity = 4;  // \u8be5\u8bbe\u5907\u7684\u80fd\u529b  -  \u662f\u5426\u9700\u8981\n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#p0","title":"<code>P0</code>\u6fc0\u6d3b\u72b6\u6001","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/","title":"MQTT \u8be6\u7ec6\u529f\u80fd\u8bbe\u8ba1","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#1","title":"1. \u5b9a\u4e49","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#11-mqtt","title":"1.1 MQTT","text":"<p>MQTT\uff08Message Queuing Telemetry Transport\uff09\u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u7684\u3001\u57fa\u4e8e\u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f\u7684\u6d88\u606f\u534f\u8bae\u3002</p> <p>\u672c\u8bbe\u8ba1\u6587\u6863\u4e2d\uff0c\u4e0d\u540c\u8bbe\u5907\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f\u4e3b\u8981\u91c7\u7528 <code>MQTT</code> \u534f\u8bae\u3002\u6d89\u53ca\u53d1\u9001\u6d88\u606f\uff0c\u63a5\u6536\u6d88\u606f\u5982\u65e0\u7279\u6b8a\u63d0\u53ca\uff0c\u5747\u4f7f\u7528 <code>MQTT</code> \u534f\u8bae\u7684\u65b9\u5f0f\u8fdb\u884c\u901a\u4fe1</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#111-broker","title":"1.1.1 Broker","text":"<p>MQTT\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5ba2\u6237\u7aef-\u4ee3\u7406\uff08Broker\uff09\u67b6\u6784\u3002Broker \u662f\u5176\u4e2d\u627f\u8f7d\u63a5\u5165\u5ba2\u6237\u7aef\u8fde\u63a5\u53ca\u6d88\u606f\u8f6c\u53d1\u7684\u529f\u80fd\u3002</p> <p>\u672c\u8bbe\u8ba1\u6587\u6863\u4e2d\uff0c\u5b58\u5728 2 \u4e2a Broker\uff0c\u4e00\u4e2a\u642d\u5efa\u5728\u65e0\u4eba\u673a\u5185\u90e8\uff0c\u4e00\u4e2a\u642d\u5efa\u5728\u4e91\u7aef\u670d\u52a1\u5668\u3002\u4e3a\u8868\u8ff0\u7b80\u5355\uff0c\u540e\u7eed\u4f7f\u7528\u4ee5\u4e0b\u540d\u8bcd\u4ee3\u66ff - \u672c\u5730 Broker \uff1a \u65e0\u4eba\u673a\u5185\u90e8 Broker - \u4e91\u7aef Broker \uff1a \u670d\u52a1\u5668\u5185\u90e8 Broker</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#112-client","title":"1.1.2 Client","text":"<p>\u6240\u6709\u8fde\u63a5\u81f3 Broker \u7684\u8bbe\u5907\u90fd\u53ef\u4ee5\u79f0\u4e3a\u5ba2\u6237\u7aef\u3002\u6839\u636e\u5ba2\u6237\u7aef\u7c7b\u578b\u6709\u4ee5\u4e0b\u5b9a\u4e49\uff0c\u540e\u6587\u5c06\u7528\u5b9a\u4e49\u7684\u540d\u8bcd\u4ee3\u66ff\u5bf9\u5e94\u5ba2\u6237\u7aef\uff1a</p> <ul> <li>RC \uff1a \u9065\u63a7\u5668</li> <li>Apollo \uff1a\u65e0\u4eba\u673a\u81ea\u8eab\u5185\u90e8\u7684\u5ba2\u6237\u7aef\uff0c\u76f4\u8fde\u5230<code>\u672c\u5730 Broker</code></li> <li>\u4e09\u65b9\u5ba2\u6237\u7aef \uff1a \u5982\u624b\u673aAPP\uff0c\u7528\u6237\u540e\u53f0\u7cfb\u7edf\u7b49</li> <li>\u4e91\u7aef\u670d\u52a1\u5668\uff1a\u6d89\u53ca\u5230\u4e91\u7aef\u4e1a\u52a1\u7684 Server \u670d\u52a1</li> </ul>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#113-topic","title":"1.1.3 \u6d88\u606f Topic","text":"<p><code>MQTT</code> \u6d88\u606f\u7684\u57fa\u672c\u7ed3\u6784\uff1a</p> <pre><code>Topic: XXX\nData: byte[]\n</code></pre> <p>\u6bcf\u4e2a\u6d88\u606f\u90fd\u662f\u4f9d\u8d56\u4e8e\u6d88\u606f\u672c\u8eab\u7684 <code>Topic</code> \u8fdb\u884c\u53d1\u5e03\u6216\u76d1\u542c\u3002\u6570\u636e\u672c\u4f53\u6b63\u5e38\u4ee5 byte \u6570\u7ec4\u7684\u65b9\u5f0f\u4f20\u8f93\u3002</p> <p>\u672c\u6587\u4e2d\u6240\u6307 <code>Topic</code> \u5982\u6ca1\u6709\u7279\u6b8a\u8bf4\u660e\uff0c\u90fd\u6307\u4ee3 <code>MQTT Topic</code>\uff0c\u73b0\u6709 <code>PB Topic</code> \u4e0d\u4f5c\u8c03\u6574\u4e5f\u4e0d\u505a\u5b9a\u5236\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#113-mqtt","title":"1.1.3 MQTT \u8fde\u63a5\u8981\u7d20","text":"<p>\u82e5\u60f3\u8981\u80fd\u591f\u8fdb\u884c MQTT \u901a\u4fe1\uff0c\u9700\u8981\u4fdd\u8bc1\u4ee5\u4e0b\u8981\u7d20</p> <ol> <li> <p><code>Client</code> \u4f7f\u7528\u6b63\u786e\u7684\u8fde\u63a5\u53c2\u6570\u767b\u5165<code>Broker</code></p> <ul> <li><code>Broker</code> \u670d\u52a1\u5730\u5740</li> <li><code>Broker</code> \u670d\u52a1\u7aef\u53e3</li> <li>\u7528\u6237\u540d\uff08\u53ef\u9009\uff09</li> <li>\u5bc6\u7801\uff08\u53ef\u9009\uff09</li> </ul> </li> <li> <p><code>Broker</code> \u914d\u7f6e\u8d26\u53f7\u9a8c\u8bc1\uff1a</p> <ul> <li>\u82e5\u4e0d\u914d\u7f6e\u8d26\u53f7\u5bc6\u7801\uff0c\u5219\u8f93\u5165\u4efb\u610f\u8d26\u53f7\u5bc6\u7801\u90fd\u53ef\u4ee5\u767b\u5165</li> <li>\u82e5\u914d\u7f6e\u8d26\u53f7\u5bc6\u7801\uff0c\u4ec5\u5141\u8bb8\u9884\u914d\u7f6e\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u5165</li> </ul> </li> </ol> <p>\u6ce8\uff1a<code>MQTT</code> \u5141\u8bb8\u591a\u4e2a\u76f8\u540c\u8d26\u53f7\u5bc6\u7801\u767b\u5165</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#12","title":"1.2 \u5bf9\u9891","text":"<p>\u5bf9\u9891\u662f <code>RC</code> \u4e0e <code>\u65e0\u4eba\u673a</code> \u5efa\u7acb\u5185\u7f51\u8fde\u63a5\u7684\u4e00\u4e2a\u65b9\u5f0f\u3002\u5177\u4f53\u786c\u4ef6\u5b9e\u73b0\u4e0d\u5728\u6b64\u8ba8\u8bba\uff0c\u901a\u8fc7\u8be5\u65b9\u5f0f\u540e\uff0c<code>RC</code> \u4e0e <code>\u65e0\u4eba\u673a</code> \u7684\u901a\u4fe1\u4e0d\u4f9d\u8d56\u4e8e4G\u7f51\u7edc\u3002</p> <pre><code>stateDiagram-v2\n    A:\u65e0\u4eba\u673a\n    [*] --&gt; A \n    state A {\n        [*] --&gt; \u5207\u6362\u5355\u63a7/\u591a\u63a7\n        \u5207\u6362\u5355\u63a7/\u591a\u63a7 --&gt; \u957f\u6309\u8fdb\u5165\u5bf9\u9891\u72b6\u6001\n        \u957f\u6309\u8fdb\u5165\u5bf9\u9891\u72b6\u6001 --&gt;  [*]\n    }\n\n    [*] --&gt; RC\n    RC: \u9065\u63a7\u5668\u7ec4\n    state RC {\n        [*] --&gt; RC1\n        RC1 --&gt; \u5f00\u542f\u5bf9\u9891\n        [*] --&gt; RC2\n        RC2 --&gt; \u5f00\u542f\u5bf9\u9891\n        [*] --&gt; RC3\n        RC3 --&gt; \u5f00\u542f\u5bf9\u9891\n        \u5f00\u542f\u5bf9\u9891 --&gt; [*]\n    }\n    A --&gt; \u5bf9\u9891\u6210\u529f\n    RC --&gt; \u5bf9\u9891\u6210\u529f\n    \u5bf9\u9891\u6210\u529f --&gt; \u5efa\u7acb\u8fde\u63a5\n    state \u5efa\u7acb\u8fde\u63a5 {\n        direction LR\n        RC[1] --&gt; \u65e0\u4eba\u673a\n        RC[2] --&gt; \u65e0\u4eba\u673a\n        RC[3] --&gt; \u65e0\u4eba\u673a\n    }\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#13","title":"1.3 \u52a0\u5bc6","text":"<p>\u672c\u6587\u90e8\u5206\u901a\u4fe1\u4e2d\uff0c\u5b58\u5728\u5b89\u5168\u98ce\u9669\uff0c\u4f1a\u4f7f\u7528<code>RSA\u52a0\u5bc6</code>\u5e76\u52a0\u76d0\u7684\u65b9\u5f0f\u52a0\u5bc6\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u4e0d\u4f1a\u88ab\u4f2a\u9020\uff0c\u4e0d\u4f1a\u88ab\u89e3\u5bc6\uff0c\u6587\u4e2d\u7684\u6240\u6709\u7684\u52a0\u5bc6\u90fd\u6307\u4ee3\u8be5\u79cd\u52a0\u5bc6\u3002 // \u6f14\u793a\u56fe</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#14","title":"1.4 \u6743\u9650","text":"<p><code>Client</code> \u5bf9\u4e8e\u53d1\u5e03 <code>Topic</code> \u6709\u4e00\u4e9b\u9650\u5236\uff0c\u5982\u5728\u53cc\u63a7\u7684\u73af\u5883\u4e0b\uff0c\u6ca1\u6709\u63a7\u5236\u6743\u7684<code>RC</code>\u65e0\u6cd5\u5bf9\u98de\u673a\u8fdb\u884c\u201c\u63a7\u5236\u201d\uff0c\u4ec5\u4ec5\u53ef\u4ee5\u5bf9\u98de\u673a\u8fdb\u884c\u201c\u89c2\u6d4b\u201d\u3002\u8fd9\u91cc\u5f15\u51fa\u201c\u6743\u9650\u201d\u6982\u5ff5\u3002</p> <p><code>\u6743\u9650</code> \u4ec5\u4ec5\u662f\u5bf9\u8eab\u4efd\u7684\u63cf\u8ff0\uff0c\u5373\u5bf9\u5e94 <code>Client</code> \u6709\u7740\u5bf9\u5e94\u80fd\u529b\u7684\u53ef\u80fd\u6027\uff0c\u5e76\u975e\u76f4\u63a5\u83b7\u53d6\u8be5\u80fd\u529b\uff0c\u80fd\u529b\u9700\u8981\u6fc0\u6d3b\uff08Activate\uff09\u3002</p> <p><code>\u6743\u9650</code>\u4ec5\u9488\u5bf9\u4e8e <code>Apollo</code> \u4ee5\u5916\u7684 <code>Client</code>\u3002<code>Apollo</code> \u53d1\u5e03\u6d88\u606f\u4e0d\u53d7\u4efb\u4f55\u9650\u5236\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#141","title":"1.4.1 \u6743\u9650\u5206\u7ea7","text":"<p>\u53c2\u8003\u73b0\u5728\u7684\u6bd4\u8f83\u590d\u6742\u7684\u7269\u6d41\u673a\u573a\u666f\uff0c\u53ef\u4ee5\u6982\u62ec\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\u6743\u9650</p> <ul> <li>\u6e38\u5ba2\u6743\u9650\uff08\u4ec5\u89c2\u5bdf\uff09</li> <li>\u90e8\u5206\u6267\u884c\u6743\u9650 \uff08\u4e0b\u53d1\u4efb\u52a1\u5230\u65e0\u4eba\u673a\uff09</li> <li>\u4e00\u5b9a\u6761\u4ef6\u4e0b\u5b8c\u5168\u63a7\u5236\u65e0\u4eba\u673a\u6743\u9650\uff08\u5728\u540e\u53f0\u63a7\u5236\u65e0\u4eba\u673a\u98de\u884c\u7b49\u64cd\u4f5c\uff09</li> <li>\u5b8c\u5168\u6743\u9650\uff08RC\u63a7\u5236\u65e0\u4eba\u673a\uff09</li> </ul> <p>\u90a3\u4e48\u57fa\u4e8e\u6b64\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4ee5\u4e0b3\u7c7b\u6743\u9650</p> \u6743\u9650\u7b49\u7ea7 \u4ecb\u7ecd \u9002\u7528\u573a\u666f \u8d4b\u4e88\u65b9\u5f0f \u6fc0\u6d3b P2 \u4ec5\u89c2\u5bdf\u6743\u9650 \u540e\u53f0\u89c2\u5bdf\uff0c\u8fdc\u7a0b\u5c55\u793a \u6240\u6709\u6388\u6743\u767b\u5f55\u7684 <code>Client</code> \u90fd\u81f3\u5c11\u662f\u8be5\u7b49\u7ea7, \u9ed8\u8ba4\u6fc0\u6d3b P1 \u53ef\u90e8\u5206\u6388\u6743 \u540e\u53f0\u4e0b\u53d1\u4efb\u52a1\uff0c\u63a7\u5236\u65e0\u4eba\u673a\u90e8\u5206\u5f00\u5173\uff0c\u624b\u673aAPP\u63a7\u5236\u98de\u673a\u8fd4\u822a\u7b49 \u7279\u5b9a<code>Client</code>\u91cc\u81ea\u5e26\u6216\u670d\u52a1\u5668\u914d\u7f6e\u6388\u6743\u9879 \u670d\u52a1\u7aef\u52a8\u6001\u914d\u7f6e P0 \u5b8c\u5168\u6743\u9650 \u4e0e\u65e0\u4eba\u673a\u76f4\u8fde\u7684 RC \u9065\u63a7\u5668\u90fd\u62e5\u6709\u8be5\u6743\u9650 <code>RC</code> \u5728\u4e0e\u65e0\u4eba\u673a\u5bf9\u9891\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u83b7\u53d6\u8be5\u65e0\u4eba\u673a\u7684\u5b8c\u5168\u6743\u9650 \u6761\u4ef6\u6fc0\u6d3b\uff0c\u540c\u4e00\u4e2a\u65e0\u4eba\u673a\u53ea\u5b58\u5728\u4e00\u4e2a<code>Client</code>\u88ab\u6fc0\u6d3b <p>\u5982<code>P0</code> \u6743\u9650\uff0c\u4ec5\u4ee3\u8868\u8be5<code>Client</code>\u5b58\u5728\u5b8c\u5168\u63a7\u5236\u7684\u53ef\u80fd\u6027\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#142-p0","title":"1.4.2 <code>P0 \u6743\u9650</code>\u6fc0\u6d3b\u6a21\u5f0f\u7b80\u8ff0","text":"<p>\u62e5\u6709<code>P0 \u6743\u9650</code>\u7684\u8bbe\u5907\uff0c\u5728\u88ab\u6fc0\u6d3b\uff08Activated\uff09\u540e\u53ef\u5b8c\u5168\u63a7\u5236\u65e0\u4eba\u673a\uff0c\u5176\u4f59<code>P0</code> \u8bbe\u5907\u5931\u53bb\u6fc0\u6d3b\u3002</p> <p>\u4e0d\u540c\u4e8e\u73b0\u6709\u65b9\u6848\u7684\u96c6\u4e2d\u63a7\u5236\uff0c\u5373\u6709\u4e00\u4e2a\u4e2d\u5fc3\u670d\u52a1\uff0c\u7528\u4e8e\u611f\u77e5\u6240\u6709\u8bbe\u5907\u53ca<code>P0\u6743\u9650</code>\u7684\u6fc0\u6d3b\u3002\u8be5\u4e2d\u5fc3\u53ea\u80fd\u653e\u7f6e\u4e8e<code>\u65e0\u4eba\u673a</code>\u5185\uff0c\u7136\u800c\u5728\u4e0d\u786e\u5b9a\u63a5\u5165\u8bbe\u5907\uff0c\u53ca <code>MQTT</code> \u7684\u67b6\u6784\u4e0b\uff08\u53d1\u5e03\u8005\u4e0e\u8ba2\u9605\u8005\u4e92\u76f8\u4e0d\u53ef\u611f\u77e5\uff09\uff0c\u9700\u8981\u8c03\u6574\u67b6\u6784\u4e3a\uff0c\u63a5\u5165\u8bbe\u5907\u81ea\u884c\u534f\u5546/\u8f6c\u8ba9<code>P0\u6743\u9650</code>\u6fc0\u6d3b\u72b6\u6001\uff0c\u800c\u975e\u4e2d\u5fc3\u63a7\u5236\u3002</p> <p>// TODO \u6f14\u793a\u56fe</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#2-broker","title":"2. \u672c\u5730 Broker","text":"<p><code>RC</code> \u4e0e <code>Apollo</code> \u7684\u901a\u4fe1\u4f7f\u7528 MQTT \u534f\u8bae\uff0c\u534f\u8bae\u8fde\u63a5\u8981\u7d20\u524d\u9762\u6709\u63d0\u53ca\uff0c\u5fc5\u8981\u5730\u9700\u8981 <code>\u672c\u5730 Broker</code> \u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u4f46\u662f\u56e0\u4e3a\u8003\u8651\u5230\u4e0d\u540c\u573a\u666f\u4e0b\uff08\u690d\u4fdd / \u7269\u6d41\uff09\uff0c<code>\u672c\u5730 Broker</code> \u5730\u5740\u53ca\u7aef\u53e3\u662f\u53ef\u53d8\u7684\uff0c\u9700\u8981\u4e00\u79cd\u53d1\u73b0\u8fde\u63a5\u4fe1\u606f\u7684\u65b9\u5f0f\u3002</p> <p>\u7528\u6237\u540d\u4e0e\u5bc6\u7801\u4e0d\u505a\u7ea6\u675f\uff0c\u5185\u90e8\u7ea6\u5b9a\u56fa\u5b9a\u503c\u5373\u53ef\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#21","title":"2.1 \u8fde\u63a5\u4fe1\u606f\u7684\u53d1\u73b0","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#211","title":"2.1.1 \u6570\u4f20\u6a21\u5757","text":"<p>\u76f4\u63a5\u4f7f\u7528\u6570\u4f20\u6a21\u5757\u662f\u6bd4\u8f83\u5b89\u5168\u7684\u65b9\u5f0f\uff0c\u4f46\u662f\u5f53\u524d\u4e0d\u786e\u5b9a\u662f\u5426\u6709\u63d0\u4f9b\u8bbe\u5907\u53d1\u73b0\u7684\u65b9\u6cd5\u3002</p> <p>\u82e5\u6709\u63d0\u4f9b\u76f8\u5173\u65b9\u6cd5\uff0c\u4f7f\u7528\u6570\u4f20\u76f4\u63a5\u53d1\u5e03<code>\u672c\u5730 Broker</code> \u7684\u5730\u5740\u53ca\u7aef\u53e3\u4fe1\u606f\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#222-udp","title":"2.2.2 UDP \u5e7f\u64ad","text":"<p>\u8be5\u65b9\u5f0f\u4e3a\u5907\u7528\u65b9\u5f0f\uff0c\u5728\u6ca1\u6709\u6709\u6548\u83b7\u53d6\u8fde\u63a5\u4fe1\u606f\u7684\u65b9\u5f0f\u4e0b\uff0c\u4f7f\u7528 UPD \u5e7f\u64ad\u7684\u65b9\u5f0f\u5411\u5185\u7f51\u8bbe\u5907\u6301\u7eed\u5e7f\u64ad\u4fe1\u606f\u3002</p> <p>\u8be5\u4fe1\u606f\u9700\u8981<code>\u52a0\u5bc6</code>\u3002</p> <pre><code>import java.net.DatagramPacket;\nimport java.net.DatagramSocket;\nimport java.net.InetAddress;\n\npublic class UdpSender {\n    public static void broadcastIp(int port, long intervalMillis) {\n        try (DatagramSocket socket = new DatagramSocket()) {\n            socket.setBroadcast(true); // \u542f\u7528\u5e7f\u64ad\u6a21\u5f0f\n            String localIp = InetAddress.getLocalHost().getHostAddress();\n\n            while (true) {\n                String message = \"Device IP: \" + localIp;\n                byte[] buffer = message.getBytes();\n\n                // \u5e7f\u64ad\u5730\u5740\uff0c\u5047\u8bbe\u7f51\u6bb5\u662f 192.168.1.0/24\n                InetAddress broadcastAddress = InetAddress.getByName(\"192.168.1.255\");\n\n                // \u521b\u5efa\u5e7f\u64ad\u6570\u636e\u5305\n                DatagramPacket packet = new DatagramPacket(buffer, buffer.length, broadcastAddress, port);\n\n                // \u53d1\u9001\u5e7f\u64ad\u6570\u636e\u5305\n                socket.send(packet);\n                System.out.println(\"Broadcast sent: \" + message);\n\n                // \u7b49\u5f85\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\n                Thread.sleep(intervalMillis);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#22-rc","title":"2.2 RC \u8bbe\u5907\u8fde\u63a5","text":"<p>\u73b0\u5728\u9700\u8981<code>RC</code> \u8fde\u63a5 <code>\u672c\u5730 Broker</code> \uff0c\u4ee5\u4e0b\u6a21\u5757\u5747\u5728<code>RC</code>\u5185\u90e8\uff0c\u4f7f\u7528\u7b3c\u7edf\u7684\u6a21\u5757\u5bf9<code>RC</code>\u8fde\u63a5\u8fdb\u884c\u7b80\u8981\u7684\u6d41\u7a0b\u6982\u62ec</p> <ul> <li>\u5bf9\u9891\u6a21\u5757<ul> <li>\u89e6\u53d1<code>\u5bf9\u9891</code>\uff0c\u4f7f\u5f97<code>RC</code> \u52a0\u5165\u5185\u7f51</li> <li>\u63d0\u4f9b\u5bf9\u9891\u72b6\u6001\u76d1\u542c\u670d\u52a1</li> </ul> </li> <li>\u672c\u5730 Broker\u4fe1\u606f\u6a21\u5757<ul> <li>\u83b7\u53d6 MQTT \u8fde\u63a5\u4fe1\u606f\uff0c\u5e76\u7f13\u5b58\u672c\u5730</li> </ul> </li> <li>MQTT \u901a\u4fe1\u6a21\u5757<ul> <li>\u8fde\u63a5\u670d\u52a1</li> <li>\u53d1\u5e03\u4fe1\u606f</li> <li>\u63a5\u6536\u4fe1\u606f</li> </ul> </li> </ul> <p>// TODO \u72b6\u6001\u56fe</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#23-apollo","title":"2.3 Apollo \u8fde\u63a5","text":"<p><code>Apollo</code> \u4e0e <code>\u672c\u5730 Broker</code> \u5171\u5904\u4e8e\u65e0\u4eba\u673a\u5185\uff0c<code>Apollo</code>\u4f5c\u4e3a\u9ed8\u8ba4\u6388\u6743\u7684\u8bbe\u5907\"\u4f18\u5148\"\u8fde\u63a5</p> <p>\u4f18\u5148\u7684\u542b\u4e49\u662f\uff0c\u5728 <code>\u672c\u5730 Broker</code> \u8fde\u63a5\u4fe1\u606f\u53d1\u5e03\u524d\uff0c\u5e94\u5f53\u786e\u4fdd <code>\u672c\u5730 Broker</code> \u542f\u52a8\u5b8c\u6210\uff0c\u5e76\u4e14<code>Apollo</code> \u5df2\u7ecf\u6210\u529f\u8fde\u63a5\u3002</p> <p>\u8fd9\u91cc\u8fde\u63a5\u4e0d\u5b58\u5728\u5b89\u5168\u95ee\u9898\uff0c\u8fde\u63a5\u53c2\u6570\u9884\u7f6e\u5728 <code>Apollo</code> \u5185\u90e8\u5373\u53ef\uff0c\u4e0d\u5b58\u5728\u83b7\u53d6\u8fde\u63a5\u53c2\u6570\u7684\u8fc7\u7a0b\u3002</p> <pre><code>sequenceDiagram\n    participant Drone as Apollo\n    participant Broker as \u672c\u5730 Broker\n    participant RemoteControl as RC\n\n    Drone-&gt;&gt;Broker: \u5f00\u542f Broker \u670d\u52a1\n    Broker--&gt;&gt;Drone: Broker \u670d\u52a1\u542f\u52a8\u6210\u529f\n    Drone-&gt;&gt;Broker: \u767b\u5f55\u5230 Broker\n    Broker--&gt;&gt;Drone: \u767b\u5f55\u6210\u529f\n\n    Drone-&gt;&gt;Drone: \u5f00\u59cb\u5e7f\u64ad Broker \u8fde\u63a5\u53c2\u6570\n    RemoteControl-&gt;&gt;Drone: \u89e3\u6790\u5e7f\u64ad\u4fe1\u606f\uff08\u83b7\u53d6\u5730\u5740\uff09\n    RemoteControl-&gt;&gt;Broker: \u767b\u5f55\u5230\u672c\u5730 Broker\n    Broker--&gt;&gt;RemoteControl: \u767b\u5f55\u6210\u529f\n\n    Drone-&gt;&gt;RemoteControl: \u5f00\u59cb MQTT \u6570\u636e\u901a\u4fe1\n    RemoteControl-&gt;&gt;Drone: \u6536\u5230\u6570\u636e\uff0c\u5f00\u59cb\u4e92\u52a8\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#24","title":"2.4 \u65e0\u4eba\u673a\u5173\u952e\u4fe1\u606f\u83b7\u53d6","text":"<p>\u4ece\u8fd9\u91cc\u5f00\u59cb\u5c31\u6d89\u53ca\u5230\u548c\u65e0\u4eba\u673a\u7684\u6570\u636e\u901a\u4fe1\uff0c\u57fa\u7840\u6570\u636e\u7ed3\u6784\u53c2\u8003MQTT \u6570\u636e\u7ed3\u6784\u91cc\u7684\u9065\u6d4b\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u5728\u8fd9\u91cc\u65e0\u6cd5\u4f7f\u7528\u901a\u7528\u9065\u6d4b\u7684 <code>Tpoic</code>\u63a5\u6536\u6570\u636e\uff0c\u56e0\u4e3a<code>apl_id</code>\u7684\u5173\u952e\u4fe1\u606f\u672a\u83b7\u53d6\uff0c\u6545\u65e0\u4eba\u673a\u7684\u5173\u952e\u4fe1\u606f\u901a\u8fc7\u4ee5\u4e0b\u56fa\u5b9a <code>Topic</code> \u7684\u65b9\u5f0f\u83b7\u53d6</p> <p>\u6ce8\uff1a\u8be5\u6d88\u606f\u4ec5\u9002\u7528\u4e8e<code>\u672c\u5730 Broker</code> \u53d1\u5e03\uff0c\u4e0d\u53ef\u901a\u8fc7<code>\u4e91\u7aef Broker</code>\u53d1\u5e03\uff0c\u901a\u8fc7<code>\u4e91\u7aef Broker</code> \u767b\u5165\u7684 <code>Client</code> \u5e94\u5f53\u4f7f\u7528\u5176\u4ed6\u65b9\u5f0f\u83b7\u53d6<code>apl_id</code>\u3002\uff08\u8d26\u53f7\u914d\u7f6e\uff0c\u56e2\u961f\u914d\u7f6e\u7b49\uff09</p> <pre><code>Topic: \"PresetInfo\" // \u4f7f\u7528\u56fa\u5b9a\u7684Topic\u83b7\u53d6\u98de\u673a\u7684\u4e00\u4e9b\u5173\u952e\u4fe1\u606f\nBody: {\n    pb: AplProto, \n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#3-broker","title":"3. \u4e91\u7aef Broker","text":"<p>\u7531\u4e8e<code>MQTT</code>\u7684\u7279\u6027\uff0c\u5df2\u767b\u5165<code>Broker</code>\u7684\u8bbe\u5907\u80fd\u591f\u76d1\u542c\u4efb\u4f55<code>Topic</code>\u7684\u6d88\u606f\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5728\u767b\u5165\u524d\u505a\u597d\u524d\u7f6e\u9274\u6743\u3002</p> <p>\u9274\u6743\u67092\u4e2a\u65b9\u5f0f\uff1a</p> <ul> <li>\u8d26\u53f7\u4e0b\u53d1</li> <li><code>Broker</code>\u6821\u9a8c</li> </ul>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#31-apollo","title":"3.1 Apollo \u8fde\u63a5","text":"<p>\u4e91\u7aef\u4f5c\u4e3a\u8f85\u52a9\u94fe\u8def\uff0c<code>Aollo</code>\u9700\u8981\u5728\u5185\u7f51\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u540c\u7b49\u53d1\u5e03\u5230\u4e91\u7aef\uff0c\u90a3\u4e48\u5728\u7f51\u7edc\u53ef\u7528\u7684\u60c5\u51b5\u4e0b\uff0c\u65e0\u4eba\u673a\u5e94\u5f53\u767b\u5165<code>\u4e91\u7aef Broker</code>\uff0c\u5e76\u5728\u7f51\u7edc\u5f02\u5e38\u60c5\u51b5\u4e0b\uff0c\u5b9a\u671f\u5c1d\u8bd5\u767b\u5165<code>\u4e91\u7aef Broker</code>\u3002</p> <p>\u8fde\u63a5\u6210\u529f\u540e\uff0c\u5e94\u5f53\u5177\u5907\u4e00\u4efd\u6d88\u606f2\u6761\u94fe\u8def\u53d1\u9001\uff0c\u4ee5\u53ca\u54cd\u5e94\u4e91\u7aef\u5230\u6765\u7684\u6d88\u606f\u7684\u80fd\u529b\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#311","title":"3.1.1 \u5bc6\u7801\u52a0\u76d0","text":"<p><code>Apollo</code> \u4e0e <code>\u4e91\u7aef Broker</code> \u4f7f\u7528\u76f8\u540c<code>\u52a0\u5bc6</code>\u3002</p> <p><code>Apollo</code>\u4f7f\u7528 <code>SN</code> \u4f5c\u4e3a\u7528\u6237\u540d\uff0c\u52a0\u76d0\u52a0\u5bc6\u4f5c\u4e3a\u5bc6\u7801\u3002</p> <p>\u767b\u5165\u64cd\u4f5c\u65f6\uff0c<code>\u4e91\u7aef Broker</code> \u4f7f\u7528\u8be5\u65b9\u5f0f\u89e3\u5bc6SN\u662f\u5426\u548c\u7528\u6237\u540d\u5339\u914d\u53ca\u65f6\u95f4\u6233\u662f\u5426\u4e0e\u5f53\u524d\u65f6\u95f4\u76f8\u8fd1\u51b3\u5b9a\u662f\u5426\u5141\u8bb8\u767b\u5165\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#312","title":"3.1.2 \u52a8\u6001\u4e0b\u53d1","text":"<p><code>Apollo</code>\u901a\u8fc7\u4e0e\u670d\u52a1\u7aef\u534f\u5b9a <code>\u4e91\u7aef Broker</code> \u7528\u6237\u540d\u5bc6\u7801\u63a5\u53e3\uff0c\u901a\u8fc7\u8bf7\u6c42 HTTPS \u63a5\u53e3\u7684\u65b9\u5f0f\u83b7\u53d6\u5bc6\u7801\u5e76\u9a8c\u8bc1\u767b\u5165\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#32","title":"3.2 \u5bf9\u9891\u8fde\u63a5\u6807\u8bc6","text":"<p>\u5bf9\u9891\u8fde\u63a5\u6807\u8bc6\uff0c\u7528\u4e8e\u786e\u5b9a\u5f53\u524d\u8be5\u8bbe\u5907\u662f\u5426\u5728\u65e0\u4eba\u673a\u5185\u7f51\u5185\uff0c\u6216\u8005\u8bf4\u662f\u5426\u5728\u672c\u5730\u7684\u5bf9\u9891\u5468\u671f\u5185\uff0c\u7528\u4e8e\u5224\u65ad\u8be5\u8bbe\u5907\u662f\u5426\u6709\u5b8c\u6574\u7684\u65e0\u4eba\u673a\u63a7\u5236\u6743\u9650\u3002</p> <p>\u5bf9\u5e94\u7684\uff0c\u82e5\u672a\u8fde\u63a5\uff0c\u5219\u4e0d\u5e94\u5f53\u8fde\u5165\u4efb\u4f55 <code>Broker</code>\u3002</p> <p>\u5bf9\u4e8e\u5185\u7f51\u6761\u4ef6\u4e0b\uff0c\u6709\u7279\u5b9a\u7684\u5bf9\u9891\u56de\u8c03\u7528\u4e8e\u5224\u65ad\u662f\u5426\u8fde\u63a5\u3002\u6216\u8005\u8bf4\u5728\u5185\u7f51\u6761\u4ef6\u4e0b\uff0c\u82e5\u65ad\u5f00\u548c\u65e0\u4eba\u673a\u7684\u8fde\u63a5\uff0c\u5219<code>\u672c\u5730 Broker</code> \u4e5f\u4f1a\u76f4\u63a5\u65ad\u5f00\u3002</p> <p>\u4f46\u662f\u5728\u5916\u7f51\u6761\u4ef6\u4e0b\uff0c\u9700\u8981\u6709\u4e00\u4e2a\u6761\u4ef6\uff0c\u7528\u4e8e\u4f7f\u5f97\u5728\u89e6\u53d1\u4e86\u65e0\u4eba\u673a\u7684\u65b0\u7684\u5bf9\u9891\u5468\u671f\u540e\uff0c\u80fd\u591f\u6709\u6548\u7684\u505c\u6b62\u4e0a\u4e00\u4e2a\u5468\u671f\u7684\u5bf9\u9891\u8bbe\u5907\u7684\u8fde\u63a5\uff0c\u8fd9\u4e2a\u79f0\u4e3a\u65e0\u4eba\u673a\u7684\u201c\u5bf9\u9891\u8fde\u63a5\u6807\u8bc6\u201d\u3002</p> <p>\u8be5\u540d\u79f0\u540e\u7eed\u7b80\u5199\u4e3a<code>\u5bf9\u9891\u6807\u8bc6</code></p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#321","title":"3.2.1 \u5bf9\u9891\u8fde\u63a5\u6807\u8bc6\u7684\u573a\u666f","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#3211","title":"3.2.1.1 \u4e91\u7aef\u767b\u5f55\u9274\u6743","text":"<p>\u9065\u63a7\u5668\u8bbe\u5907\u5728\u4e0e\u65e0\u4eba\u673a\u5185\u7f51\u8fde\u63a5\u540e\uff0c\u5e94\u5f53\u7ee7\u7eed\u767b\u5165<code>\u4e91\u7aef Broker</code>\uff0c\u4e14\u62e5\u6709\u8be5\u65e0\u4eba\u673a\u7684\u5b8c\u5168\u64cd\u63a7\u6743\u9650\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li>\u5df2\u8fde\u63a5\u8fc7\u65e0\u4eba\u673a\uff0c\u628a\u4e00\u4e9b\u65e0\u4eba\u673a\u4fe1\u606f\u4fdd\u5b58\u5728\u672c\u5730\u7684\u8bbe\u5907\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fde\u63a5\u4e91\u7aef\uff0c\u4e14\u5141\u8bb8\u767b\u5f55\u3002</li> <li>\u5df2\u8fde\u63a5\u8fc7\u65e0\u4eba\u673a\uff0c\u4f46\u662f\u65e0\u4eba\u673a\u7ecf\u8fc7\u5bf9\u9891\u5bfc\u81f4<code>\u5bf9\u9891\u6807\u8bc6</code>\u53d1\u751f\u6539\u53d8\u540e\uff0c\u65e7\u7684\u6570\u636e\u4e0d\u5e94\u767b\u5f55\u4e91\u7aef\u3002</li> </ul> <p>\u90a3\u4e48\u5c31\u9700\u8981\u6709\u4e00\u4e2a\u9274\u6743\u6807\u8bc6\uff0c\u80fd\u591f\u5305\u542b\u5f53\u524d\u65e0\u4eba\u673a\u7684\u57fa\u672c\u4fe1\u606f\u53ca\u5bf9\u9891\u8fc7\u671f\u4fe1\u606f\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#3212","title":"3.2.1.2 \u65e0\u4eba\u673a\u91cd\u65b0\u5bf9\u9891","text":"<p>\u5728\u65e0\u4eba\u673a\u91cd\u65b0\u5bf9\u9891\u540e\uff0c\u80fd\u591f\u8bc6\u522b\u51fa<code>\u5bf9\u9891\u6807\u8bc6</code>\u66f4\u6539\uff0c\u80fd\u591f\u4f7f\u5f97\u5f53\u524d\u5df2\u8fde\u63a5\u8bbe\u5907\u65ad\u5f00\u3002</p> <p>\u5bf9\u4e8e\u5185\u7f51\u73af\u5883\u7684\u8bbe\u5907\u6765\u8bf4\u6bd4\u8f83\u5bb9\u6613\u533a\u522b\uff0c\u5982\u679c\u5bf9\u9891\u65ad\u5f00\uff0c\u5219\u76f4\u63a5\u4f1a\u5bfc\u81f4<code>\u672c\u5730 Broker</code> \u65ad\u5f00\u3002</p> <p>\u5bf9\u4e8e\u4e91\u7aef\u8fde\u63a5\u7684\u573a\u666f\uff0c\u9700\u8981\u5b58\u50a8<code>\u672c\u5730 Broker</code>\u83b7\u53d6\u7684<code>\u5bf9\u9891\u6807\u8bc6</code>\uff0c\u5e76\u5728\u63a5\u6536\u5230\u6765\u81ea<code>\u4e91\u7aef Broker</code>\u7684<code>\u5bf9\u9891\u6807\u8bc6</code>\u8fdb\u884c\u5339\u914d\uff0c\u786e\u5b9a\u5f53\u524d\u72b6\u6001\u662f<code>\u65ad\u8fde</code>\u8fd8\u662f<code>\u91cd\u65b0\u5bf9\u9891</code>\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#322-apollo","title":"3.2.2 Apollo \u53d1\u5e03\u5bf9\u9891\u6807\u8bc6","text":"<p>\u53d1\u5e03<code>\u5bf9\u9891\u6807\u8bc6</code>\u6709 2 \u79cd\u65b9\u5f0f\uff1a</p> <ol> <li><code>MQTT</code>\u6709\u4e00\u4e2a\u7279\u6027\uff0c\u53ef\u4ee5\u7f13\u5b58\u4e00\u4e2a<code>Topic</code>\u7684\u6700\u540e\u4e00\u4e2a\u6d88\u606f\u3002\u90a3\u4e48\u53ef\u4ee5\u8ba9<code>Apollo</code>\u4f7f\u7528\u8be5\u80fd\u529b\uff0c\u5c06\u8be5<code>\u5bf9\u9891\u6807\u8bc6</code>\u4f7f\u7528\u56fa\u5b9a <code>Topic</code>\u53d1\u5e03\uff0c\u8fde\u63a5\u8bbe\u5907\u76d1\u542c <code>Topic</code>\u540e\u53ef\u76f4\u63a5\u83b7\u53d6\u4e0a\u6b21\u7684\u6d88\u606f\u3002\u8be5\u65b9\u5f0f\u5b58\u5728\u7f3a\u70b9\uff0c\u65e0\u4eba\u673a\u91cd\u65b0\u5bf9\u9891\uff0c\u65b0\u7684<code>RC</code>\u4f1a\u7acb\u523b\u6536\u5230\u4e0a\u6b21<code>\u5bf9\u9891\u6807\u8bc6</code>\u3002</li> <li>\u65e0\u4eba\u673a\u5b9a\u65f6<code>1HZ</code> \u53d1\u5e03<code>\u5bf9\u9891\u6807\u8bc6</code>\u3002\u8be5\u65b9\u5f0f\u53d1\u5e03\u4fe1\u606f\u6bd4\u8f83\u9891\u7e41\uff0c\u4f46\u662f\u5e72\u6270\u8f83\u5c11\u3002\u4ee5\u4e0b\u4f7f\u7528\u8be5\u65b9\u5f0f\u5b9e\u73b0\u3002</li> </ol> <pre><code>Topic: /t/a/{apl_id}/from_apl_q0 // \u53ef\u76f4\u63a5\u4f7f\u7528\u9065\u6d4bTopic\nBody: {\n    pb: AplProto, \n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#33-rc","title":"3.3 RC \u8bbe\u5907\u8fde\u63a5","text":"<p><code>RC</code> \u5bf9\u4e0e\u5176\u8fde\u63a5\u7684<code>Apollo</code>\u62e5\u6709<code>P0</code>\u6743\u9650\uff0c\u4f46\u662f\u8be5\u6743\u9650\u4ec5\u80fd\u5bf9\u5339\u914d\u7684<code>\u5bf9\u9891\u6807\u8bc6</code>\u751f\u6548\u3002</p> <p>\u90a3\u4e48 <code>RC</code> \u7684\u8fde\u63a5\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u589e\u52a0<code>\u5bf9\u9891\u6807\u8bc6</code>\u7684\u6821\u9a8c\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#331-rc","title":"3.3.1 RC \u8fde\u63a5\u9274\u6743","text":"<p><code>RC</code>\u8fde\u63a5<code>\u672c\u5730 Broker</code>\u540e\uff0c\u53ef\u83b7\u53d6\u5230\u65e0\u4eba\u673a\u5173\u952e\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5e94\u5f53\u7f13\u5b58\u5230\u672c\u5730\uff1a</p> <ul> <li>\u65e0\u4eba\u673a\u5173\u952e\u4fe1\u606f(sn / boom_id)</li> <li><code>\u5bf9\u9891\u6807\u8bc6</code></li> <li>\u5bf9\u9891\u65f6\u95f4\u6233</li> </ul> <p>\u4ee5\u4e0a\u4fe1\u606f\u4f5c\u4e3a\u53c2\u6570\u901a\u8fc7HTTPS\u8bf7\u6c42\u6b64\u6b21\u767b\u5165\u7684\u4e00\u6b21\u6027\u8d26\u53f7\u5bc6\u7801\uff0c\u670d\u52a1\u7aef\u9700\u8981\u6709\u7740\u57fa\u4e8e\u4ee5\u4e0a\u4fe1\u606f\u8bc6\u522b <code>RC</code>\u5408\u6cd5\u7684\u80fd\u529b\u3002</p> <p>\u9644\uff1a\u670d\u52a1\u7aef\u540c\u6837\u5177\u5907\u4e86\u8bc6\u522b <code>RC</code> \u4e0d\u5408\u6cd5\u7684\u80fd\u529b\uff1a\u5bf9\u9891\u6807\u8bc6\u4e0d\u5339\u914d\uff0c\u90a3\u4e48\u53ef\u628a\u4e0d\u5408\u6cd5\u7684\u8d26\u53f7\u5f3a\u884c\u65ad\u5f00\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#332-rc","title":"3.3.2 RC \u8fde\u63a5\u573a\u666f\u5206\u6790","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#3321-rc","title":"3.3.2.1 RC \u521d\u6b21\u8fde\u63a5","text":"<p>\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c<code>RC</code> \u7684\u8fde\u63a5\u6b65\u9aa4\uff1a</p> <ol> <li>\u5bf9\u9891\u6210\u529f\uff0c\u767b\u5165<code>\u672c\u5730 Broker</code>\uff0c\u83b7\u53d6\u5173\u952e\u4fe1\u606f,<code>\u5bf9\u9891\u6807\u8bc6</code>\u540e\uff0c\u8fde\u63a5<code>\u4e91\u7aef Broker</code></li> <li><code>Apollo</code> \u901a\u8fc7<code>\u4e91\u7aef Broker</code>\u53d1\u5e03\u7684<code>\u5bf9\u9891\u6807\u8bc6</code>\uff0c\u670d\u52a1\u7aef\u540c\u6837\u53ef\u4ee5\u6b63\u5e38\u63a5\u6536\uff08\u82e5\u65e0\u7f51\uff0c\u5219<code>Apollo</code> \u65e0\u6cd5\u767b\u5165\u4e91\u7aef\uff0c\u5373\u4f7f<code>RC</code>\u7f51\u7edc\u53ef\u7528\uff0c\u8be5\u94fe\u8def\u4ecd\u7136\u7b49\u540c\u4e8e\u5931\u6548\uff0c\u4e0d\u8003\u8651\u8be5\u573a\u666f\uff09</li> <li>\u5faa\u73af\u5c1d\u8bd5\u8bf7\u6c42<code>\u4e91\u7aef Broker</code> \u8d26\u53f7\u4fe1\u606f</li> <li>\u767b\u5165<code>\u4e91\u7aef Broker</code> \u5efa\u7acb\u8fde\u63a5</li> </ol>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#3322-broker","title":"3.3.2.2 \u5df2\u5bf9\u9891\u4f46<code>\u672c\u5730Broker</code>\u65ad\u5f00","text":"<ol> <li><code>Apollo</code> \u4ecd\u7136\u5728\u6301\u7eed\u53d1\u5e03<code>\u5bf9\u9891\u6807\u8bc6</code></li> <li><code>RC</code>\u4f7f\u7528\u4e0a\u6b21\u5bf9\u9891\u6210\u529f\u7684\u4fe1\u606f\u8bf7\u6c42\u8d26\u53f7</li> <li>\u9a8c\u8bc1\u6210\u529f\uff0c\u767b\u5165<code>\u4e91\u7aef Broker</code>\u5efa\u7acb\u8fde\u63a5</li> </ol>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#3323-rc-broker","title":"3.3.2.3 RC \u4ec5\u8fde\u63a5<code>\u4e91\u7aef Broker</code>\uff0c\u65e0\u4eba\u673a\u89e6\u53d1\u5bf9\u9891","text":"<ol> <li>\u65e0\u4eba\u673a\u89e6\u53d1\u5bf9\u9891\uff0c<code>\u5bf9\u9891\u6807\u8bc6</code>\u53d1\u5e03\u66f4\u65b0</li> <li><code>\u4e91\u7aef Broker</code> \u8bc6\u522b <code>\u5bf9\u9891\u6807\u8bc6</code> \u66f4\u65b0\uff0c\u8e22\u51fa<code>RC</code>\uff08\u53ef\u9009\uff09</li> <li><code>RC</code>\u63a5\u6536\u5230<code>\u5bf9\u9891\u6807\u8bc6</code>\uff0c\u68c0\u6d4b\u53d1\u751f\u53d8\u5316</li> <li><code>RC</code>\u4e3b\u52a8\u4e0e<code>\u4e91\u7aef Broker</code></li> </ol>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#34","title":"3.4 \u5176\u5b83\u8bbe\u5907\u7684\u8fde\u63a5","text":"<p>\u53ef\u8fde\u63a5\u81f3<code>\u4e91\u7aef Broker</code> \u7684\u89d2\u8272\u9664\u4e86\u65e0\u4eba\u673a\u548c RC \u5916\uff0c\u8fd8\u5b58\u57282\u79cd\uff1a</p> <ul> <li>\u79fb\u52a8\u8bbe\u5907</li> <li>\u7f51\u9875\u540e\u53f0</li> </ul> <p>\u6574\u4f53\u53ef\u4ee5\u7edf\u79f0\u4e3a\u4e09\u65b9\u5ba2\u6237\u7aef\uff0c\u8fd9\u7c7b\u5ba2\u6237\u7aef\u6ca1\u6709\u76f4\u63a5\u53c2\u4e0e\u65e0\u4eba\u673a\u5bf9\u9891\u7684\u6b65\u9aa4\uff0c\u4f7f\u7528\u8005\u901a\u5e38\u4e3a\u65e0\u4eba\u673a\u7684\u6240\u6709\u8005\uff0c\u53ca\u65e0\u4eba\u673a\u7684\u88ab\u6388\u6743\u8005\uff08\u7528\u6237\uff0c\u6216\u56e2\u961f\u6210\u5458\uff09</p> <p>\u8fd9\u4e9b\u89d2\u8272\u4ec5\u6709\u89c2\u5bdf\u65e0\u4eba\u673a\u72b6\u6001\u7684\u80fd\u529b\uff0c\u4ee5\u53ca\u6781\u5c11\uff0c\u53ef\u914d\u7f6e\u7684\u64cd\u4f5c\u65e0\u4eba\u673a\u7684\u80fd\u529b\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u5e94\u5f53\u901a\u8fc7\u7528\u6237\u7ec4/\u6388\u6743\u7684\u5224\u65ad\u7684\u65b9\u5f0f\u83b7\u53d6\u5230\u65e0\u4eba\u673a\u7684\u4fe1\u606f\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#4-p0","title":"4. <code>P0 \u6743\u9650</code>\u6fc0\u6d3b","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#41","title":"4.1 \u4e3a\u4f55\u9700\u8981\u6743\u9650\u6fc0\u6d3b\u7ba1\u7406","text":"<p>\u5bf9\u4e8e<code>P0</code> \u7ea7\u6743\u9650\uff0c\u540c\u4e00\u65f6\u523b\u4ec5\u6709\u552f\u4e00<code>Client</code>\u53ef\u4ee5\u6fc0\u6d3b\uff0c\u5176\u4f59<code>Client</code>\u4f1a\u81ea\u52a8\u5931\u53bb\u6fc0\u6d3b\uff0c\u90a3\u4e48\u6d89\u53ca\u5230\u4ee5\u4e0b\u6982\u5ff5\uff1a</p> <ul> <li>\u5982\u4f55\u77e5\u9053<code>P0</code>\u6fc0\u6d3b\u8005\uff1a<ul> <li>\u6fc0\u6d3b\u72b6\u6001\u7684\u5e7f\u64ad</li> </ul> </li> <li>\u4e3b\u52a8\u6fc0\u6d3b\u7684\u6761\u4ef6<ul> <li>\u62e5\u6709<code>P0</code>\u7ea7\u6743\u9650</li> </ul> </li> <li>\u88ab\u52a8\u6fc0\u6d3b\u7684\u6761\u4ef6<ul> <li>\u5f53\u524d\u6ca1\u6709\u4efb\u4f55<code>P0</code>\u6743\u9650\u88ab\u6fc0\u6d3b</li> <li>\u4e0e\u65e0\u4eba\u673a\u76f4\u8fde</li> <li>\u5f53\u524d\u5185\u7f51\u4e2d\uff0c<code>\u4f18\u5148\u7ea7</code>\u6700\u9ad8</li> </ul> </li> </ul> <p>\u7b80\u5355\u4e86\u89e3\u4e86<code>P0</code>\u6743\u9650\u6fc0\u6d3b\uff0c\u6211\u4eec\u9700\u8981\u9488\u5bf9\u8fd9\u4e9b\u573a\u666f\u505a\u51fa\u66f4\u8be6\u7ec6\u7684\u5206\u6790\uff0c\u4ee5\u6307\u5b9a\u5b8c\u6574\u7684\u6fc0\u6d3b\u89c4\u5219</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#42","title":"4.2 \u6fc0\u6d3b\u72b6\u6001\u5e7f\u64ad","text":"<p>MQTT \u6709\u4e00\u4e2a\u597d\u7528\u7684\u529f\u80fd\uff0c\u524d\u6587\u4e2d\u63d0\u5230\u8fc7\uff0c\u90a3\u5c31\u662f<code>Broker \u7f13\u5b58</code>\uff0c\u5bf9\u6307\u5b9a<code>Topic</code>\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c<code>Broker</code> \u4f1a\u7f13\u5b58\u8be5<code>Topic</code> \uff0c\u5e76\u5728<code>Client</code> \u6ce8\u518c\u8be5<code>Topic</code>\u7684\u76d1\u542c\u65f6\uff0c\u7acb\u523b\u8fd4\u56de\u8be5\u7f13\u5b58\u4fe1\u606f\u3002</p> <p>\u4e3a\u4e86\u4fdd\u8bc1\u5ba2\u6237\u7aef\u90fd\u80fd\u591f\u6536\u5230\uff0c\u8be5\u6d88\u606f\u5e94\u5f53\u81f3\u5c11\u4ee5<code>QoS 1</code>\u53d1\u9001</p> <p>Topic\uff1a /t/a/{apl_id}/controlInfo</p> <pre><code>message ControlInfo {\n  Sring controllerId = uuid, // \u6fc0\u6d3b\u8bbe\u5907id\n  long timeStamp = 1737179678188;  // \u65f6\u95f4\n  enum ChangeReason {\n      Auto,\n      Manual\n  }\n  ChangeReason reason; // \u6fc0\u6d3b\u8f6c\u8ba9\u539f\u56e0\n}\n</code></pre> <p>\u901a\u8fc7\u8be5\u65b9\u5f0f\u89e3\u51b3\u4e86\uff1a</p> <ul> <li>\u540c\u65e0\u4eba\u673a\u73af\u5883\u4e0b\uff0c\u5171\u7528\u4e00\u4e2a\u6d88\u606f\uff0c\u8be5\u6d88\u606f\u51b3\u5b9a\u5f53\u524d\u6fc0\u6d3b\u8005\uff0c\u90a3\u4e48\u5c31\u4e0d\u4f1a\u5b58\u5728\u591a\u4e2a\u540c\u65f6\u6fc0\u6d3b\u7684<code>P0</code>\u8bbe\u5907</li> </ul>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#43","title":"4.3 \u8bbe\u5907\u7684\u4e92\u76f8\u53d1\u73b0","text":"<p>\u6d89\u53ca<code>P0\u6743\u9650</code>\u7684\u573a\u666f\uff0c\u4e3a\u4e86\u4fdd\u8bc1<code>P0</code>\u6743\u9650\u88ab\u6b63\u786e\u6fc0\u6d3b\uff0c\u6211\u4eec\u9700\u8981\u660e\u786e\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li>\u4ec5\u53ef\u5b58\u5728\u81f3\u591a 1 \u4e2a <code>Client</code> \u7684<code>P0</code>\u6743\u9650\u88ab\u6fc0\u6d3b</li> <li><code>P0 \u6743\u9650</code>\u8bbe\u5907\u4e4b\u95f4\u53ef\u4ee5\u901a\u4fe1\uff08\u62a2\u5360/\u8bf7\u6c42\u6fc0\u6d3b\uff09</li> <li>\u4e0d\u5b58\u5728\u88ab\u6fc0\u6d3b\u7684<code>P0 \u6743\u9650</code>\u7684 <code>Client</code>\u65f6\uff0c\u9700\u8981\u6709<code>P0 \u6743\u9650</code>\u7684\u8bbe\u5907\u81ea\u52a8\u6fc0\u6d3b</li> <li>\u6709<code>P0</code>\u8bbe\u5907\u9700\u8981\u6fc0\u6d3b\u65f6\uff0c\u53ef\u4ee5\u6b63\u786e\u6fc0\u6d3b</li> </ul> <p>\u66f4\u7ec6\u5206\u7684\u62c6\u5206\u9700\u6c42\u540e\uff0c\u6211\u4eec\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u611f\u77e5\u8fde\u63a5\u73af\u5883\u5185\u6709\u54ea\u4e9b<code>P0</code>\u7684\u8bbe\u5907</li> <li>\u660e\u786e<code>P0</code>\u8bbe\u5907\u8fde\u63a5\u7684<code>Broker</code></li> <li>\u80fd\u591f\u5f97\u77e5\u6bcf\u4e2a<code>P0</code>\u8bbe\u5907\u7684\u6fc0\u6d3b\u72b6\u6001</li> <li>\u5408\u7406\u7684\u62a2\u5360/\u5206\u914d\u6fc0\u6d3b<code>P0</code>\u8bbe\u5907</li> </ul> <p>\u9996\u5148\uff0c\u4e3a\u4e86\u89e3\u51b3\u73af\u5883\u5185\u7684<code>Client</code>\u88ab\u611f\u77e5\uff0c\u5f15\u5165\u5fc3\u8df3\u4fe1\u606f</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#431","title":"4.3.1 \u5fc3\u8df3\u4fe1\u606f","text":"<p><code>P0</code>\u7684\u8bbe\u5907\u9700\u8981\u6309\u7167\u6307\u5b9a\u9891\u7387\uff08\u5982 <code>5 Hz</code>\uff09\u53d1\u9001\u81ea\u8eab\u5fc3\u8df3\u4fe1\u606f\uff0c\u5fc3\u8df3\u4fe1\u606f\u5e94\u5f53\u5305\u542b\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>\u8bbe\u5907\u7684\u552f\u4e00\u6807\u8bc6</li> <li><code>P0</code>\u6743\u9650\u7684\u4f18\u5148\u7ea7</li> </ul>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#4311","title":"4.3.1.1 \u6570\u636e\u7ed3\u6784","text":"<p>Topic\uff1a /t/a/{apl_id}/heartbeat</p> <pre><code>message Heartbeat {\n  enum Type {\n      RC,\n      Drone,\n      Mobile\n      ...\n  }\n  Type type = 1;\n  string indentify = 2; // \n  int priority = 3; // \u8bbe\u5907\u7684\u4f18\u5148\u7ea7\uff0c\u5bf9\u4e8e \u65e0\u4eba\u673a\u65e0\u610f\u4e49\uff0c\u9ed8\u8ba4\u662f0\uff0cRC\u6839\u636e\u4e3b/\u526f\u63a7\u6765\u51b3\u5b9a\n  enum Capacity {\n      NONE = 0\uff0c\n      MONITOR = 1,\n      AUTO_DRIVER = 2,\n      MANUAL_DRIVER = 4\uff0c\n  }\n  int capacity = 4;  // \u8be5\u8bbe\u5907\u7684\u80fd\u529b  -  \u662f\u5426\u9700\u8981\n}\n</code></pre>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#4313","title":"4.3.1.3 \u8bbe\u5907\u5728\u7ebf\u5224\u65ad","text":"<p>\u611f\u77e5\u540c\u7f51\u7edc\u73af\u5883\u4e0b\u7684\u5176\u5b83<code>Client</code>\u5e94\u5f53\u662f\u6bcf\u4e2a<code>Client</code>\u7684\u57fa\u672c\u80fd\u529b\u3002</p> <ul> <li>\u672c\u5730 Broker\uff1a \u68c0\u6d4b\u5fc3\u8df3\uff0c\u6570\u636e\u6765\u6e90\u4e8e\u672c\u5730\uff0c\u8d85\u8fc7 5 \u5e27\u5931\u8054\u5219\u5224\u5b9a\u79bb\u7ebf</li> <li>\u4e91\u7aef Broker\uff1a\u68c0\u6d4b\u5fc3\u8df3\uff0c\u6570\u636e\u6765\u6e90\u4e8e\u4e91\u7aef\uff0c\u8d85\u8fc7 5 \u5e27\u5931\u8054\u5219\u5224\u5b9a\u79bb\u7ebf</li> </ul>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#44-p0","title":"4.4 <code>P0</code>\u6743\u9650\u7684\u81ea\u52a8\uff08\u88ab\u52a8\uff09\u6fc0\u6d3b","text":"<p>\u5047\u8bbe\u5f53\u524d\u73af\u5883\u5b58\u5728 A\uff0cB\uff0cC\u30023 \u4e2a<code>RC</code>\u4e0e\u65e0\u4eba\u673a\u5bf9\u9891\u5b8c\u6210\uff0c\u5982\u4f55\u5904\u7406\u6743\u9650\u7684\u6fc0\u6d3b\u3002</p> <p>\u82e5\u6ca1\u6709\u4f18\u5148\u7ea7\u7684\u6982\u5ff5\uff0c\u65e0\u6cd5\u51b3\u5b9a\u6fc0\u6d3b\u8bbe\u5907\uff0c\u6bd5\u7adf\u968f\u673a\u6fc0\u6d3b\u4e0d\u5408\u7406\uff0c\u4e5f\u4e0d\u53ef\u63a7\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#441-priority","title":"4.4.1 \u4f18\u5148\u7ea7(Priority)","text":"<p>\u9002\u7528\u573a\u666f\uff1a\u8fde\u63a5\u81f3<code>\u672c\u5730 Broker</code>\u7684<code>P0</code>\u8bbe\u5907\uff0c\u5728\u8fdb\u884c\u81ea\u52a8\u6fc0\u6d3b\u65f6\u4f7f\u7528\u3002</p> <p>\u5bf9\u4e8e\u4f18\u5148\u7ea7\u7684\u5b9a\u4e49\uff0c\u62e5\u6709<code>P0</code>\u6743\u9650\u7684<code>RC</code> \u662f\u53ef\u88ab\u8d4b\u4e88\u4f18\u5148\u7ea7\uff0c\u5176\u5b83\u7684<code>Client</code>\u65e0\u4f18\u5148\u7ea7/\u4f18\u5148\u7ea7\u6700\u4f4e\u3002</p> <p>\u4f18\u5148\u7ea7\u7531<code>RC</code>\u9ed8\u8ba4\u5b9a\u4e49\uff0c\u5982\u4e3b\u63a7\uff0c\u8f85\u63a71\uff0c\u8f85\u63a72\u5bf9\u5e94\u7684\u4f18\u5148\u7ea7\u5206\u522b\u4e3a0\uff0c1\uff0c2\u3002</p> <p>\u5f53\u521d\u6b21\u5bf9\u9891\u6210\u529f\u65f6\uff0c\u6743\u9650\u5e94\u5f53\u9ed8\u8ba4\u7ed9\u5230\u4e3b\u63a7\uff080\uff09\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#442","title":"4.4.2 \u81ea\u52a8\u6fc0\u6d3b\u573a\u666f","text":"<ul> <li>\u521d\u6b21\u5bf9\u9891\uff0c\u6b64\u65f6\u65e0\u4efb\u4f55<code>P0</code>\u8bbe\u5907\u88ab\u6fc0\u6d3b</li> <li>\u4efb\u4f55\u65f6\u671f\uff0c\u5f53\u524d\u88ab\u6fc0\u6d3b\u7684<code>P0</code>\u8bbe\u5907\u79bb\u7ebf</li> </ul>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#443","title":"4.4.3 \u89e6\u53d1\u81ea\u52a8\u6fc0\u6d3b\u7684\u65f6\u673a","text":"<p>\u4ee5\u4e0b\u6240\u6709\u6761\u4ef6\u5747\u6ee1\u8db3\uff0c\u5219\u89e6\u53d1\u81ea\u52a8\u6fc0\u6d3b</p> <ol> <li>\u4ec5\u5728<code>\u672c\u5730 Broker</code>\u73af\u5883\u4e0b\u7684<code>P0</code>\u8bbe\u5907\u53c2\u4e0e</li> <li>\u5bf9\u9891\u65f6\u95f4\u665a\u4e8e\u6fc0\u6d3b\u6d88\u606f\u53d1\u5e03\u65f6\u95f4 / \u6307\u5b9a\u65f6\u95f4\u5185\uff083s\uff09\uff0c\u6fc0\u6d3b\u7684\u8bbe\u5907\u79bb\u7ebf</li> <li>\u5f53\u524d<code>Client</code>\u7684\u4f18\u5148\u7ea7\u6700\u9ad8</li> <li>\u4e0d\u5b58\u5728\u6b63\u5728\u8fdb\u884c\u7684\u6fc0\u6d3b\u8bf7\u6c42\uff08\u5bf9\u4e8e\u4e91\u7aef\u8fdc\u7a0b\u8bbe\u5907\u7684\u8bf7\u6c42\u5b58\u5728\u8bf7\u6c42\u8fc7\u7a0b\uff09</li> </ol> <p>\u89e6\u53d1\u540e\uff0c\u6fc0\u6d3b\u7684\u8bbe\u5907\u53d1\u9001\u4e00\u6761<code>QoS 1</code>\u7684\u5e7f\u64ad\u6d88\u606f\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#45-p0","title":"4.5 <code>P0</code>\u6743\u9650\u7684\u4e3b\u52a8\u6fc0\u6d3b","text":"<p>\u81ea\u52a8\u6fc0\u6d3b\u4e3b\u8981\u89e3\u51b3\u7684\u573a\u666f\u4e3a\uff0c\u5728\u6fc0\u6d3b\u8bbe\u5907\u5931\u8054/\u4e0d\u5b58\u5728\u6fc0\u6d3b\u8bbe\u5907\uff0c\u4f7f\u5f97\u59cb\u7ec8\u6709\u4e00\u4e2a<code>RC</code>\u5f53\u524d\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u65e0\u4eba\u673a\u7684\u63a7\u5236\u3002</p> <p>\u4e3b\u52a8\u6fc0\u6d3b\u662f\u4e3a\u4e86\u89e3\u51b3 <code>RC</code> \u8bbe\u5907\u53ef\u4ee5\u5728\u5df2\u6709\u6fc0\u6d3b\u8bbe\u5907\u7684\u573a\u666f\u4e0b\u8fdb\u884c\u6fc0\u6d3b\u72b6\u6001\u7684\u5207\u6362\u3002</p> <p>\u4e3b\u52a8\u6fc0\u6d3b\u6709\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ul> <li>\u672c\u5730\u6216\u4e91\u7aef<code>P0</code> \u8bbe\u5907</li> <li>\u4e0d\u5b58\u5728\u6b63\u5728\u8fdb\u884c\u7684\u6fc0\u6d3b\u8bf7\u6c42\uff08\u5bf9\u4e8e\u4e91\u7aef\u8fdc\u7a0b\u8bbe\u5907\u7684\u8bf7\u6c42\u5b58\u5728\u8bf7\u6c42\u8fc7\u7a0b\uff09</li> <li>\u81ea\u8eab\u672a\u6fc0\u6d3b</li> </ul>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#451-rc","title":"4.5.1 <code>RC</code> \u4e3b\u52a8\u6fc0\u6d3b","text":"<p>\u5bf9\u4e8e <code>MQTT</code>\u73af\u5883\uff0c\u5b58\u5728\u7f51\u7edc\u73af\u5883\uff0c<code>Client</code>\u7684\u8fde\u63a5\u72b6\u6001\u4ee5\u53ca\u6d88\u606f\u7684\u53d1\u5e03\u63a5\u6536\uff0c\u60b2\u89c2\u60c5\u51b5\u751a\u81f3\u9700\u8981\u6570\u79d2\uff0c\u5728\u65e0\u4eba\u673a\u98de\u884c\u8fc7\u7a0b\u4e2d\u5982\u679c\u4e3b\u52a8\u6fc0\u6d3b\u9700\u8981\u534f\u5546\uff0c\u65e0\u6cd5\u5feb\u901f\u63a7\u5236\u65e0\u4eba\u673a\uff0c\u5728\u6b64\u8003\u8651\u4e3b\u52a8\u6fc0\u6d3b\u7684\u573a\u666f\u4e0d\u9700\u8981\u534f\u5546\uff0c\u7b26\u5408\u8981\u6c42\u7684<code>RC</code>\u53ef\u76f4\u63a5\u6fc0\u6d3b\u3002</p> <p><code>RC</code> \u8bbe\u5907\u62e5\u6709\u7edd\u5bf9\u4f18\u5148\u7ea7\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u534f\u5546\uff0c\u53ef\u53d1\u5e03\u6fc0\u6d3b\u5e7f\u64ad\uff0c\u5b8c\u6210\u6fc0\u6d3b\u72b6\u6001\u7684\u5207\u6362\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#452-p0","title":"4.5.2 \u5176\u5b83<code>P0</code> \u8bbe\u5907\u4e3b\u52a8\u6fc0\u6d3b","text":"<p>\u5982\u4e91\u7aef\u7528\u6237\u540e\u53f0\u9700\u8981\u4e34\u65f6\u901a\u8fc7\u540e\u53f0\u8bf7\u6c42\u63a7\u5236\u65e0\u4eba\u673a</p> <p>\u8be5\u65b9\u5f0f\u5b58\u5728\u5371\u9669\u6027\uff0c\u4e14\u5373\u65f6\u6027\u6ca1\u6709\u90a3\u4e48\u9ad8\uff0c\u5e94\u5f53\u9075\u5faa\u4ee5\u4e0b\u89c4\u5219\uff1a</p> <ul> <li>\u4ee5\u6307\u5b9a<code>Topic</code>\u53d1\u5e03<code>QoS 2</code>\u4e91\u7aef\u6d88\u606f\uff0c\u4e14\u8bbe\u5b9a\u56de\u590d\u8fc7\u671f\u65f6\u95f4\uff0810s\uff09\uff0c\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u6536\u5230\u62d2\u7edd\u6d88\u606f\u5219\u5931\u8d25</li> <li>\u6536\u5230\u8be5\u6d88\u606f\u65f6\uff0c<code>P0</code>\u7684\u8bbe\u5907\u5e94\u5f53\u7ed9\u51fa\u5f39\u7a97\uff0c\u7ed9\u4e0e\u7528\u6237\u540c\u610f/\u62d2\u7edd\u7684\u9009\u9879\uff0c\u5e76\u6309\u7167\u9009\u9879\u7ed9\u4e0e\u56de\u590d\uff0c5s\u5185\u4e0d\u64cd\u4f5c\u9ed8\u8ba4\u540c\u610f</li> <li>\u8bf7\u6c42\u65b9\u5e94\u5f53\u8bb0\u5f55\u8bf7\u6c42\u65f6\u95f4\uff0c\u5f53\u5141\u8bb8\u5b8c\u6210\u4e3b\u52a8\u6fc0\u6d3b\u65f6\uff0c\u5bf9\u6bd4\u5f53\u524d\u7684\u6fc0\u6d3b\u72b6\u6001\u5e7f\u64ad\u7684\u65f6\u95f4\uff0c\u82e5\u6bd4\u8bf7\u6c42\u65f6\u95f4\u665a\u5219\u53d6\u6d88\u6b64\u6b21\u6d41\u7a0b\u3002</li> </ul>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#46-p1","title":"4.6 <code>P1</code>\u6743\u9650","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#461-p1","title":"4.6.1 \u4ec0\u4e48\u662f <code>P1</code>\u6743\u9650","text":"<p><code>P1</code>\u6743\u9650\u5c5e\u4e8e\u4f1a\u5f71\u54cd\u65e0\u4eba\u673a\u529f\u80fd\uff0c\u4e0d\u80fd\u968f\u610f\u5206\u914d\u7684\u6743\u9650\u3002\u5982\u4e0b\u53d1\u4efb\u52a1\uff0c\u5f00\u542f\u5f00\u5173\u7b49\u7b49\u3002</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#462-p1","title":"4.6.2  <code>P1</code>\u6743\u9650\u7684\u5206\u914d","text":"<p><code>P1</code>\u6743\u9650\u7528\u4e8e\u7279\u5b9a\u8bbe\u5907\uff0c\u77ed\u6682/\u4e34\u65f6\u63a7\u5236\u65e0\u4eba\u673a\u90e8\u5206\u529f\u80fd\uff0c\u53d7\u9650\u4e8e\u670d\u52a1\u7aef\u7684\u914d\u7f6e\u3002</p> <p><code>Client</code>\u5e94\u5f53\u6839\u636e\u6743\u9650\u914d\u7f6e\uff0c\u4ec5\u5728\u914d\u7f6e\u8303\u56f4\u5185\u53d1\u9001\u547d\u4ee4</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#5","title":"5. \u6d88\u606f\u53bb\u91cd","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#51","title":"5.1 \u9065\u6d4b\u6d88\u606f","text":""},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#511","title":"5.1.1 \u72b6\u6001\u7c7b","text":"<p>\u6d88\u606f\u7684ID\u4e3a\u81ea\u589e int \u503c\u3002</p> <p>\u4f9d\u8d56\u65f6\u95f4\u6233\u53caid\u53d6\u6700\u65b0\u6d88\u606f\u4f7f\u7528\uff0c\u5ffd\u7565\u8001\u65e7\u6d88\u606f</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#512","title":"5.1.2 \u8fde\u7eed\u7c7b\u6d88\u606f","text":"<p>\u5982\u65e0\u4eba\u673a\u822a\u8ff9\u6d88\u606f\u7b49\u9700\u8981\u8fde\u7eed\u8bb0\u5f55\u6570\u636e\u7684\u6d88\u606f\uff0c\u5219\u9700\u8981\u7a97\u53e3\u7ba1\u7406\uff0c \u9650\u5b9a\u7a97\u53e3\u5927\u5c0f\u7f13\u5b58\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u4fe1\u606f\uff0c\u5e76\u6839\u636eid\u6392\u5e8f</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#52","title":"5.2 \u8bf7\u6c42\u6d88\u606f","text":"<p>\u672c\u5730\u7a97\u53e3\u7f13\u5b58\u6d88\u606f\uff0c\u82e5\u5b58\u5728\u76f8\u540c\u6d88\u606f\u5219\u4e0d\u56de\u590d\u6d88\u606f</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/MQTT%20%E8%AF%A6%E7%BB%86%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/#53","title":"5.3 \u54cd\u5e94\u6d88\u606f","text":"<p>\u53d1\u5e03\u7684\u6d88\u606f\u7f13\u5b58\u5728\u672c\u5730\uff0c\u6536\u5230\u56de\u590d\u540e\u5219\u7acb\u523b\u4e0a\u62a5\u54cd\u5e94\u7ed3\u679c\u3002\u540c\u65f6\u79fb\u9664\u6d88\u606f\u7f13\u5b58</p>"},{"location":"%F0%9F%92%BC%20%E5%B7%A5%E4%BD%9C/%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%A7%A3%E6%9E%90/","title":"\u7ecf\u7eac\u5ea6\u89e3\u6790","text":"\u751f\u6210 \u65e5\u5fd7\u8f6c\u6362"},{"location":"%F0%9F%93%9A%20%E4%B9%A6%E7%B1%8D/%E6%9E%B6%E6%9E%84/%E6%9E%B6%E6%9E%84/","title":"1. \u9886\u57df\u9a71\u52a8\u6838\u5fc3","text":"<p>\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1\uff1a\u8f6f\u4ef6\u6838\u5fc3\u590d\u6742\u6027\u5e94\u5bf9\u4e4b\u9053.pdf</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/","title":"Drawable\u6e90\u7801\u5206\u6790\u53ca\u81ea\u5b9a\u4e49","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_1","title":"\u8868\u73b0","text":"<ol> <li><code>drawable</code>\u53ef\u4ee5\u662f\u56fe\u7247\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u662fxml\uff0c\u5e38\u7528\u4e8e\u80cc\u666f,<code>ImageView</code>\u7b49</li> <li>\u4ee3\u7801\u4e2d\u4fee\u6539\u80cc\u666f\u652f\u6301\u76f4\u63a5\u4f7f\u7528id\u8bbe\u7f6e\uff0c\u4e5f\u652f\u6301\u4f7f\u7528<code>Drawable</code>\u5bf9\u8c61\u8bbe\u7f6e</li> <li>\u901a\u5e38\u4f7f\u7528<code>context.getResourse().getDrawable(int resid)</code>\u7684\u65b9\u5f0f\u53bb\u83b7\u53d6Drawable\u5bf9\u8c61\uff0c\u65ad\u70b9\u65f6\u53ef\u4ee5\u53d1\u73b0\u4e0d\u540c\u7684\u8d44\u6e90\u4ea7\u751f\u7684Drawable\u7c7b\u578b\u4e0d\u540c</li> </ol>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_2","title":"\u7591\u95ee","text":"<ol> <li>\u4e3a\u4f55\u53ef\u4ee5\u5bf9\u4e00\u4e2aview\u8bbe\u7f6e <code>background</code>\u5c5e\u6027\uff0c\u8bbe\u7f6e <code>drawable</code> \u6587\u4ef6\u5c31\u53ef\u4ee5\u4f7f\u5176\u80fd\u591f\u663e\u793a\u4e00\u4e2a\u56fe\u50cf</li> <li>\u5f53drawable\u8bbe\u7f6e\u4e3a\u56fe\u7247\uff0c\u6216xml\u6587\u4ef6\u65f6\uff0c\u7ed3\u679c\u4f1a\u53d8\u5f97\u4e0d\u4e00\u6837\uff0c\u5e95\u5c42\u662f\u5982\u4f55\u5904\u7406\u7684</li> <li>\u5047\u5982\u5f53\u524d\u4f7f\u7528\u4e86 <code>shape</code>\u6807\u7b7e\uff0c\u76f4\u63a5\u5728\u6807\u7b7e\u5185\u5b9a\u4e49\u7684\u5c5e\u6027\uff0c\u53ca\u5185\u90e8\u5b9a\u4e49\u7684\u6807\u7b7e\u5982\u4f55\u88ab\u89e3\u6790</li> </ol>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_3","title":"\u6e90\u7801\u63a2\u7d22","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#getdrawable","title":"\u4ece\u6e90\u5934<code>getDrawable()</code>\u5f00\u59cb","text":"<p>\u7ed9\u4e00\u4e2aView\u8bbe\u7f6e\u80cc\u666f\u6700\u5e38\u7528\u7684\u65b9\u6cd5<code>view.setBackground(Drawable drawable)</code>\u4e00\u5b9a\u4e0d\u964c\u751f\uff0c\u5f53\u6211\u4eec\u60f3\u4f7f\u7528\u5b58\u653e\u5728drawable\u76ee\u5f55\u4e0b\u7684\u8d44\u6e90\u65f6\uff0c\u901a\u5e38\u4f7f\u7528<code>context.getResourse().getDrawable(int resid)</code>\u7684\u65b9\u5f0f\u53bb\u83b7\u53d6\uff0c\u6df1\u5165\u4ee5\u4e0b\u5177\u4f53\u5b9e\u73b0</p> <p><pre><code>public Drawable getDrawable(@DrawableRes int id, @Nullable Theme theme)\n        throws NotFoundException {\n    return getDrawableForDensity(id, 0, theme);\n}\n\npublic Drawable getDrawableForDensity(@DrawableRes int id, int density, @Nullable Theme theme) {\n    final TypedValue value = obtainTempTypedValue();\n    try {\n        // \u8bfb\u53d6configuration\u91cc\u7684\u5c5e\u6027\n        final ResourcesImpl impl = mResourcesImpl;\n        impl.getValueForDensity(id, density, value, true);\n        // \u83b7\u53d6drawable\n        return loadDrawable(value, id, density, theme);\n    } finally {\n        releaseTempTypedValue(value);\n    }\n}\nDrawable loadDrawable(@NonNull TypedValue value, int id, int density, @Nullable Theme theme)\n        throws NotFoundException {\n    // \u6700\u7ec8\u8d70\u5230\u5b9e\u73b0\u7c7b\u7684\u52a0\u8f7ddrawable\u65b9\u6cd5\n    return mResourcesImpl.loadDrawable(this, value, id, density, theme);\n}\n</code></pre> <pre><code>@Nullable\nDrawable loadDrawable(@NonNull Resources wrapper, @NonNull TypedValue value, int id,\n        int density, @Nullable Resources.Theme theme)\n        throws NotFoundException {\n\n    ...\n    try {\n        ...\n        // \u7eaf\u8272\u80cc\u666f\uff0c\u770b\u8d77\u6765\u8bbe\u7f6e\u4e86color\u5373\u53ef\uff0c\u5b9e\u9645\u4e0a\u4ecd\u7136\u8fd8\u662f\u4e00\u4e2aColorDrawable\u5bf9\u8c61\n        final boolean isColorDrawable;\n        final DrawableCache caches;\n        final long key;\n        ...\n        // \u5224\u65ad\u662f\u5426\u6709\u7f13\u5b58\u53ef\u4ee5\u7528\uff0c\u5bf9\u4e8e\u540c\u914d\u7f6e\u7684\u540c\u4e00id\u7684\u8d44\u6e90\uff0c\u4f1a\u4f18\u5148\u53d6\u4e0a\u6b21\u89e3\u6790\u7f13\u5b58\u8fd4\u56de\uff0c\u7701\u53bb\u89e3\u6790\u6d41\u7a0b\n        // \u9898\u5916\u8bdd\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48drawable\u4f1a\u6709mutate()\u65b9\u6cd5\u9694\u79bb\u5c5e\u6027\uff0c\u56e0\u4e3a\u4e0d\u540cview\u6301\u6709\u7684drawable\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\n        if (!mPreloading &amp;&amp; useCache) {\n            final Drawable cachedDrawable = caches.getInstance(key, wrapper, theme);\n            if (cachedDrawable != null) {\n                cachedDrawable.setChangingConfigurations(value.changingConfigurations);\n                return cachedDrawable;\n            }\n        }\n        Drawable dr;\n        boolean needsNewDrawableAfterCache = false;\n        if (cs != null) {\n            dr = cs.newDrawable(wrapper);\n        } else if (isColorDrawable) {\n            dr = new ColorDrawable(value.data);\n        } else {\n            // \u521b\u5efadrawable\u5bf9\u8c61\u5e76\u52a0\u5165\u7f13\u5b58\n            dr = loadDrawableForCookie(wrapper, value, id, density);\n        }\n        ...\n        return dr;\n    } catch (Exception e) {\n       ...\n    }\n}\n</code></pre></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#loaddrawable","title":"loadDrawable","text":"<pre><code>private Drawable loadDrawableForCookie(@NonNull Resources wrapper, @NonNull TypedValue value,\n        int id, int density) {\n    ...\n    try {\n       ...\n        try {\n            // \u89e3\u6790\u6587\u4ef6\uff0c\u533a\u5206\u6587\u4ef6\u7c7b\u578b1.xml 2.\u5e38\u89c4\u56fe\u7247\u7c7b\u578b\n            if (file.endsWith(\".xml\")) {\n                final String typeName = getResourceTypeName(id);\n                if (typeName != null &amp;&amp; typeName.equals(\"color\")) {\n                    dr = loadColorOrXmlDrawable(wrapper, value, id, density, file);\n                } else {\n                    dr = loadXmlDrawable(wrapper, value, id, density, file);\n                }\n            } else {\n                final InputStream is = mAssets.openNonAsset(\n                        value.assetCookie, file, AssetManager.ACCESS_STREAMING);\n                final AssetInputStream ais = (AssetInputStream) is;\n                dr = decodeImageDrawable(ais, wrapper, value);\n            }\n        } finally {\n            stack.pop();\n        }\n    } catch (Exception | StackOverflowError e) {\n        Trace.traceEnd(Trace.TRACE_TAG_RESOURCES);\n        final NotFoundException rnf = new NotFoundException(\n                \"File \" + file + \" from drawable resource ID #0x\" + Integer.toHexString(id));\n        rnf.initCause(e);\n        throw rnf;\n    }\n     ...\n    return dr;\n}\n\nprivate Drawable loadXmlDrawable(@NonNull Resources wrapper, @NonNull TypedValue value,\n        int id, int density, String file)\n        throws IOException, XmlPullParserException {\n    try (\n            XmlResourceParser rp =\n                    loadXmlResourceParser(file, id, value.assetCookie, \"drawable\")\n    ) {\n        // \u6700\u7ec8\u8d70\u5230\u4e86Drawable\u7684\u89e3\u6790xml\u7684\u65b9\u6cd5\u5185\n        return Drawable.createFromXmlForDensity(wrapper, rp, density, null);\n    }\n}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#createfromxmlfordensity","title":"createFromXmlForDensity","text":"<pre><code>public static Drawable createFromXmlForDensity(@NonNull Resources r,\n        @NonNull XmlPullParser parser, int density, @Nullable Theme theme)\n        throws XmlPullParserException, IOException {\n   ...\n    // \u8c03\u7528\u9759\u6001\u65b9\u6cd5\u521b\u5efadrawable\u5bf9\u8c61\n    Drawable drawable = createFromXmlInnerForDensity(r, parser, attrs, density, theme);\n\n    if (drawable == null) {\n        throw new RuntimeException(\"Unknown initial tag: \" + parser.getName());\n    }\n\n    return drawable;\n}\n\nstatic Drawable createFromXmlInnerForDensity(@NonNull Resources r,\n        @NonNull XmlPullParser parser, @NonNull AttributeSet attrs, int density,\n        @Nullable Theme theme) throws XmlPullParserException, IOException {\n    return r.getDrawableInflater().inflateFromXmlForDensity(parser.getName(), parser, attrs,\n            density, theme);\n}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#inflate","title":"inflate","text":"<p>\u5230\u8fd9\u4e00\u6b65\u4ee3\u7801\u5df2\u7ecf\u6ca1\u6cd5\u5728sdk\u4e2d\u67e5\u770b\u4e86\uff0c\u5269\u4f59\u7684\u4ee3\u7801\u5728sdk\u5185\uff0c\u7ee7\u7eed\u5206\u6790 http://aospxref.com/android-13.0.0_r3/xref/frameworks/base/graphics/java/android/graphics/drawable/DrawableInflater.java#89 </p> <p>\u53ef\u4ee5\u770b\u5230\u5b9e\u9645\u539f\u751f\u4e5f\u662f\u4f7f\u7528\u7684xml\u6807\u7b7e\u89e3\u6790\uff0c\u4e0d\u540c\u7684xml\u5bf9\u5e94\u4e0d\u540c\u7c7b\u578b\u7684drawable\u5b9e\u73b0\uff0c\u8fd9\u91cc\u57fa\u672c\u5df2\u7ecf\u5305\u542b\u4e86\u6240\u6709\u7684\u81ea\u5e26drawable\u4e86</p> <p>\u7cfb\u7edf\u8fd8\u6709\u90e8\u5206\u5176\u4ed6Drawable\uff0c\u4e0d\u652f\u6301\u6807\u7b7e\u4f7f\u7528\uff0c\u5e38\u7528\u4e8e\u4ee3\u7801\u4f7f\u7528\uff0c\u6bd4\u5982PaintDrawable,ShapeDrawable\u7b49\u7b49</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#shape","title":"<code>&lt;shape&gt;</code>\u6807\u7b7e\u53ca\u5176\u5b9e\u73b0","text":"<pre><code>&lt;shape android:shape=\"rectangle\"&gt;\n    &lt;solid android:color=\"@android:color/holo_blue_dark\"/&gt;\n&lt;/shape&gt;\n</code></pre> <p>\u901a\u8fc7\u8fd9\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a\u989c\u8272\u4e3a\u6697\u84dd\u8272\u7684\u80cc\u666f\uff0c\u90a3\u4e48\u5b83\u662f\u5982\u4f55\u77e5\u9053\u6211\u4eec\u8bbe\u7f6e\u7684\u989c\u8272\uff0c\u5e76\u7ed8\u5236\u51fa\u6765\u5462</p> <p>Android\u4e2d\u7684\u81ea\u5b9a\u4e49\u6807\u7b7e\u4e00\u822c\u4f1a\u9884\u5148\u5b9a\u4e49\u5728<code>attr</code>\u6587\u4ef6\u5185\uff0c\u6839\u636e\u5176\u63cf\u8ff0\u53ca\u5176\u89e3\u6790\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u627e\u5bfb\u5230\u5176\u5b9e\u73b0\u7c7b</p> <p>\u901a\u8fc7\u9009\u4e2d<code>android:color</code>\u5c5e\u6027\uff0c\u627e\u5230\u4ee5\u4e0b\u6e90\u7801</p> <pre><code>&lt;!-- Used to fill the shape of GradientDrawable with a solid color. --&gt;\n&lt;declare-styleable name=\"GradientDrawableSolid\"&gt;\n    &lt;!-- Solid color for the gradient shape. --&gt;\n    &lt;attr name=\"color\" format=\"color\" /&gt;\n&lt;/declare-styleable&gt;\n</code></pre> <p>\u6e90\u7801\u5e72\u8106\u76f4\u63a5\u8bf4\u660e\u8be5\u5c5e\u6027\u88abGradientDrawable\u4f7f\u7528 \u57fa\u4e8e\u7b2c\u56db\u90e8\u4e2d\u7684\u6807\u7b7e\u5bf9\u7167\uff0c\u786e\u5b9e\u8be5\u6807\u7b7e\u5bf9\u5e94\u7684\u5b9e\u73b0\u7c7b\u4e3aGradientDrawable</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#gradientdrawable","title":"GradientDrawable","text":"<p>\u5f53\u6211\u4eec\u4f7f\u7528shape\u6807\u7b7e\u65f6\uff0c\u5c06\u4f1a\u521b\u5efa\u4e00\u4e2aGradientDrawable\u5bf9\u8c61\u7528\u4e8e\u7ed8\u5236\uff0c\u90a3\u4e48\u9664\u4e86attr\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5185\u90e8\u6807\u7b7e\u662f\u600e\u4e48\u89e3\u6790\u7684\u5462</p> <pre><code>public void inflate(@NonNull Resources r, @NonNull XmlPullParser parser,\n        @NonNull AttributeSet attrs, @Nullable Theme theme)\n        throws XmlPullParserException, IOException {\n    super.inflate(r, parser, attrs, theme);\n\n    mGradientState.setDensity(Drawable.resolveDensity(r, 0));\n    // \u81ea\u5b9a\u4e49View\u4f7f\u7528\u7684\u540c\u6b3eattr\u89e3\u6790\n    final TypedArray a = obtainAttributes(r, theme, attrs, R.styleable.GradientDrawable);\n    updateStateFromTypedArray(a);\n    a.recycle();\n    // \u89e3\u6790\u5b50\u6807\u7b7e\n    inflateChildElements(r, parser, attrs, theme);\n\n    updateLocalState(r);\n}\nprivate void inflateChildElements(Resources r, XmlPullParser parser, AttributeSet attrs,\n        Theme theme) throws XmlPullParserException, IOException {\n    TypedArray a;\n    int type;\n\n    final int innerDepth = parser.getDepth() + 1;\n    int depth;\n    while ((type=parser.next()) != XmlPullParser.END_DOCUMENT\n           &amp;&amp; ((depth=parser.getDepth()) &gt;= innerDepth\n                   || type != XmlPullParser.END_TAG)) {\n        if (type != XmlPullParser.START_TAG) {\n            continue;\n        }\n\n        if (depth &gt; innerDepth) {\n            continue;\n        }\n\n        String name = parser.getName();\n        // \u5e38\u89c1\u7684size\uff0csolid\uff0cstroke\u7b49\u5728\u6b64\u89e3\u6790\n        if (name.equals(\"size\")) {\n            a = obtainAttributes(r, theme, attrs, R.styleable.GradientDrawableSize);\n            updateGradientDrawableSize(a);\n            a.recycle();\n        } else if (name.equals(\"gradient\")) {\n            a = obtainAttributes(r, theme, attrs, R.styleable.GradientDrawableGradient);\n            updateGradientDrawableGradient(r, a);\n            a.recycle();\n        } else if (name.equals(\"solid\")) {\n            a = obtainAttributes(r, theme, attrs, R.styleable.GradientDrawableSolid);\n            updateGradientDrawableSolid(a);\n            a.recycle();\n        } else if (name.equals(\"stroke\")) {\n            a = obtainAttributes(r, theme, attrs, R.styleable.GradientDrawableStroke);\n            updateGradientDrawableStroke(a);\n            a.recycle();\n        } else if (name.equals(\"corners\")) {\n            a = obtainAttributes(r, theme, attrs, R.styleable.DrawableCorners);\n            updateDrawableCorners(a);\n            a.recycle();\n        } else if (name.equals(\"padding\")) {\n            a = obtainAttributes(r, theme, attrs, R.styleable.GradientDrawablePadding);\n            updateGradientDrawablePadding(a);\n            a.recycle();\n        } else {\n            Log.w(\"drawable\", \"Bad element under &lt;shape&gt;: \" + name);\n        }\n    }\n}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_4","title":"\u5176\u5b83\u7ec6\u8282","text":"<ol> <li>inflate\u65b9\u6cd5\u662f\u5728\u521b\u5efa\u540e\u6700\u5148\u8c03\u7528\u7684\u65b9\u6cd5\uff0c\u90e8\u5206\u521d\u59cb\u5316\u903b\u8f91\u53ef\u4ee5\u653e\u5728\u8fd9\u91cc</li> <li>\u5728\u901a\u8fc7xml\u521b\u5efa\u65f6\uff0c\u5b58\u5728\u521b\u5efa\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u5982\u4e0d\u5b58\u5728\u7684\u6807\u7b7e\uff0c\u6b64\u65f6\u4f1a\u8d70\u53e6\u4e00\u4e2a\u65b9\u6cd5\u8fdb\u884c\u521b\u5efa\uff0c\u63d0\u4f9b\u4e86\u53ef\u6269\u5c55\u6027</li> </ol> <p>\u5f53\u6807\u7b7e\u4e3adrawable\u4e14\u5b58\u5728class\u5c5e\u6027\u65f6\uff0c\u5c1d\u8bd5\u4f7f\u7528class\u5185\u5bb9\u521d\u59cb\u5316\uff0c\u5426\u5219\u4f7f\u7528\u6807\u7b7e\u540d\u521d\u59cb\u5316</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_5","title":"\u6d41\u7a0b\u603b\u7ed3","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#drawable","title":"\u81ea\u5b9a\u4e49\u9634\u5f71drawable","text":"<p>\u539f\u751felevation\u4e0d\u652f\u6301\u6240\u6709\u7248\u672c\uff0c\u989c\u8272\u4fee\u6539\u4e5f\u6709\u7248\u672c\u9650\u5236 \u539f\u751felevation\u5149\u6e90\u56fa\u5b9a\uff0c\u5bfc\u81f4\u4e0d\u540c\u5c4f\u5e55\u4f4d\u7f6e\u7684\u63a7\u4ef6\uff0c\u9634\u5f71\u6548\u679c\u4e0d\u5b8c\u5168\u76f8\u540c</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_6","title":"\u5b9a\u4e49\u57fa\u7c7b","text":"<pre><code>public class BaseShadowDrawable extends Drawable {\n\n    protected Paint paint;\n    // shadow x\u8f74\u504f\u79fb\n    protected float shadowDx;\n    // shdaowY\u8f74\u504f\u79fb\n    protected float shadowDy;\n    // shadow\u6a21\u7cca\u534a\u5f84\n    protected float shadowRadius;\n    // shadow\u989c\u8272\n    protected int shadowColor;\n    public BaseShadowDrawable() {\n        paint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        paint.setColor(Color.TRANSPARENT);\n    }\n\n    @Override\n    public void draw(@NonNull Canvas canvas) {\n    }\n\n    @Override\n    public void setAlpha(int alpha) {\n\n    }\n\n    @Override\n    public void setColorFilter(@Nullable ColorFilter colorFilter) {\n\n    }\n\n    @Override\n    public int getOpacity() {\n        return 0;\n    }\n\n    @Override\n    public void inflate(@NonNull Resources r, @NonNull XmlPullParser parser, @NonNull AttributeSet attrs, @Nullable Resources.Theme theme) throws IOException, XmlPullParserException {\n        super.inflate(r, parser, attrs, theme);\n        TypedArray typedArray = r.obtainAttributes(attrs, R.styleable.BaseShadowDrawable);\n        shadowColor = typedArray.getColor(R.styleable.BaseShadowDrawable_android_shadowColor, Color.GRAY);\n        shadowRadius = typedArray.getFloat(R.styleable.BaseShadowDrawable_android_shadowRadius, 5);\n        shadowDx = typedArray.getFloat(R.styleable.BaseShadowDrawable_android_shadowDx, 0);\n        shadowDy = typedArray.getFloat(R.styleable.BaseShadowDrawable_android_shadowDy, 0);\n        typedArray.recycle();\n    }\n}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_7","title":"\u77e9\u5f62\u9634\u5f71\u5b9e\u73b0\u7c7b\uff0c\u53ef\u5b9a\u4e49\u5706\u89d2","text":"<pre><code>public class RectShadowDrawable extends BaseShadowDrawable {\n\n    protected int rectRadiusX;\n    protected int rectRadiusY;\n\n    @Override\n    public void draw(@NonNull Canvas canvas) {\n        paint.setShadowLayer(shadowRadius, shadowDx, shadowDy, shadowColor);\n        Rect rect = getBounds();\n        canvas.drawRoundRect(rect.left, rect.top, rect.right, rect.bottom, rectRadiusX, rectRadiusY, paint);\n    }\n\n\n    @Override\n    public void inflate(@NonNull Resources r, @NonNull XmlPullParser parser, @NonNull AttributeSet attrs, @Nullable Resources.Theme theme) throws IOException, XmlPullParserException {\n        super.inflate(r, parser, attrs, theme);\n        TypedArray typedArray = r.obtainAttributes(attrs, R.styleable.RectShadowDrawable);\n        int allRadius = typedArray.getDimensionPixelOffset(R.styleable.RectShadowDrawable_shadowRectRadius, 0);\n        rectRadiusX = typedArray.getDimensionPixelOffset(R.styleable.RectShadowDrawable_shadowRectRadiusX, allRadius);\n        rectRadiusY = typedArray.getDimensionPixelOffset(R.styleable.RectShadowDrawable_shadowRectRadiusY, allRadius);\n        typedArray.recycle();\n    }\n}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#pathvectordrawablepath","title":"path\u9634\u5f71\u5b9e\u73b0\u7c7b,\u53ef\u4f7f\u7528vectordrawable\u7684path","text":"<pre><code>public class PathShadowDrawable extends BaseShadowDrawable {\n\n    protected Path path;\n\n    @Override\n    public void draw(@NonNull Canvas canvas) {\n        paint.setShadowLayer(shadowRadius, shadowDx, shadowDy, shadowColor);\n        canvas.drawPath(path, paint);\n    }\n\n\n    @Override\n    public void inflate(@NonNull Resources r, @NonNull XmlPullParser parser, @NonNull AttributeSet attrs, @Nullable Resources.Theme theme) throws IOException, XmlPullParserException {\n        super.inflate(r, parser, attrs, theme);\n        TypedArray typedArray = r.obtainAttributes(attrs, R.styleable.PathShadowDrawable);\n        String pathStr = typedArray.getString(R.styleable.PathShadowDrawable_shadowPath);\n        path = PathParser.createPathFromPathData(pathStr);\n        typedArray.recycle();\n    }\n\n}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_8","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u4f7f\u7528drawable\u6807\u7b7e+class\u5c5e\u6027\u81ea\u5b9a\u4e49</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;drawable class=\"com.bt.example.RectShadowDrawable\"\n  xmlns:android=\"http://schemas.android.com/apk/res/android\"\n  xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n  android:shadowColor=\"#2196F3\"\n  android:shadowDx=\"10\"\n  android:shadowDy=\"10\"\n  android:shadowRadius=\"20\"\n  app:shadowRectRadius=\"20px\" /&gt;\n</code></pre> <p>\u4f7f\u7528\u81ea\u5b9a\u4e49\u6807\u7b7e</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;com.bt.example.PathShadowDrawable\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:shadowColor=\"#2196F3\"\n    android:shadowDx=\"0\"\n    android:shadowDy=\"0\"\n    android:shadowRadius=\"5\"\n    app:shadowPath=\"M20.808,19.797C21.198,19.407 21.831,19.407 22.222,19.797L30,27.576L37.778,19.797C38.141,19.435 38.713,19.409 39.105,19.72L39.192,19.797L40.203,20.808C40.593,21.198 40.593,21.831 40.203,22.222L22.222,40.203C21.831,40.593 21.198,40.593 20.808,40.203L19.797,39.192C19.407,38.802 19.407,38.169 19.797,37.778L27.576,30L19.797,22.222C19.435,21.859 19.409,21.287 19.72,20.895L19.797,20.808ZM39.192,40.203L40.203,39.192C40.593,38.802 40.593,38.169 40.203,37.778L35.556,33.131C35.165,32.741 34.532,32.741 34.142,33.131L33.131,34.142C32.741,34.532 32.741,35.165 33.131,35.556L37.778,40.203C38.169,40.593 38.802,40.593 39.192,40.203Z\" /&gt;\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/Drawable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89/#_9","title":"\u6548\u679c","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/","title":"MQTT \u4ecb\u7ecd","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#1-mqtt","title":"1. MQTT\u5b9a\u4e49","text":"<p>MQTT\uff08Message Queuing Telemetry Transport\uff09\u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u7684\u3001\u57fa\u4e8e\u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f\u7684\u6d88\u606f\u534f\u8bae\u3002\u5b83\u975e\u5e38\u9002\u5408\u9700\u8981\u4f4e\u5e26\u5bbd\u3001\u9ad8\u5ef6\u8fdf\u3001\u4e0d\u53ef\u9760\u7f51\u7edc\u7684\u573a\u666f\u3002MQTT\u6700\u521d\u7531IBM\u516c\u53f8\u63d0\u51fa\uff0c\u65e8\u5728\u4e3a\u8fdc\u7a0b\u76d1\u63a7\u548c\u63a7\u5236\u5e94\u7528\u63d0\u4f9b\u4e00\u79cd\u7b80\u5355\u4e14\u9ad8\u6548\u7684\u6d88\u606f\u4f20\u9012\u673a\u5236\u3002</p> <p>MQTT\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5ba2\u6237\u7aef-\u4ee3\u7406\uff08Broker\uff09\u67b6\u6784\u3002\u5ba2\u6237\u7aef\u53d1\u5e03\u6d88\u606f\u5230\u4e3b\u9898\uff0c\u4ee3\u7406\u8d1f\u8d23\u5c06\u8fd9\u4e9b\u6d88\u606f\u8f6c\u53d1\u7ed9\u8ba2\u9605\u8be5\u4e3b\u9898\u7684\u5ba2\u6237\u7aef\u3002\u7531\u4e8e\u5176\u4f4e\u5e26\u5bbd\u3001\u4f4e\u529f\u8017\u3001\u6613\u5b9e\u73b0\u7684\u7279\u70b9\uff0cMQTT\u5728\u7269\u8054\u7f51\uff08IoT\uff09\u548c\u79fb\u52a8\u5e94\u7528\u4e2d\u5f97\u5230\u4e86\u5e7f\u6cdb\u7684\u5e94\u7528\u3002</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#2-mqtt","title":"2. MQTT\u7684\u8be6\u7ec6\u529f\u80fd\u70b9","text":"<p>MQTT\u534f\u8bae\u901a\u8fc7\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u7279\u6027\u63d0\u4f9b\u9ad8\u6548\u3001\u53ef\u9760\u7684\u6d88\u606f\u4f20\u9012\uff1a</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#21","title":"2.1 \u53d1\u5e03/\u8ba2\u9605\u6a21\u578b","text":"<ul> <li>\u53d1\u5e03\uff1a\u5ba2\u6237\u7aef\u5411\u4ee3\u7406\u53d1\u9001\u6d88\u606f\uff0c\u6d88\u606f\u5305\u542b\u4e00\u4e2a\u4e3b\u9898\uff08Topic\uff09\u3002\u8fd9\u4e2a\u6d88\u606f\u5c06\u4f1a\u88ab\u4ee3\u7406\u8f6c\u53d1\u7ed9\u6240\u6709\u8ba2\u9605\u4e86\u8be5\u4e3b\u9898\u7684\u5ba2\u6237\u7aef\u3002</li> <li>\u8ba2\u9605\uff1a\u5ba2\u6237\u7aef\u5411\u4ee3\u7406\u6ce8\u518c\u611f\u5174\u8da3\u7684\u4e3b\u9898\uff0c\u4ee3\u7406\u4f1a\u6839\u636e\u8fd9\u4e9b\u8ba2\u9605\u5173\u7cfb\u5c06\u6d88\u606f\u63a8\u9001\u7ed9\u76f8\u5173\u7684\u5ba2\u6237\u7aef\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#22-topic","title":"2.2 \u4e3b\u9898\uff08Topic\uff09","text":"<ul> <li>\u4e3b\u9898\u7528\u4e8e\u6807\u8bc6\u6d88\u606f\u7684\u5185\u5bb9\u7c7b\u578b\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u8ba2\u9605\u7279\u5b9a\u7684\u4e3b\u9898\u6765\u63a5\u6536\u6d88\u606f\u3002</li> <li>\u4e3b\u9898\u7684\u5c42\u6b21\u7ed3\u6784\u662f\u901a\u8fc7\u659c\u6760\uff08/\uff09\u5206\u9694\u7684\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u52a8\u6001\u9009\u62e9\u8ba2\u9605\u591a\u4e2a\u4e3b\u9898\u6216\u901a\u914d\u7b26\u4e3b\u9898\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#23-qos","title":"2.3 \u6d88\u606f\u8d28\u91cf\u7b49\u7ea7\uff08QoS\uff09","text":"<p>MQTT\u652f\u6301\u4e09\u4e2a\u8d28\u91cf\u7b49\u7ea7\uff0c\u7528\u4e8e\u63a7\u5236\u6d88\u606f\u4f20\u9012\u7684\u53ef\u9760\u6027\uff1a</p> <ul> <li>QoS 0\uff1a\u6700\u591a\u4e00\u6b21\u4f20\u9012\uff0c\u6d88\u606f\u4e22\u5931\u4e0d\u4f1a\u91cd\u53d1\u3002</li> <li>QoS 1\uff1a\u81f3\u5c11\u4e00\u6b21\u4f20\u9012\uff0c\u4fdd\u8bc1\u6d88\u606f\u81f3\u5c11\u4f20\u9001\u4e00\u6b21\uff0c\u53ef\u80fd\u4f1a\u91cd\u590d\u3002</li> <li>QoS 2\uff1a\u53ea\u6709\u4e00\u6b21\u4f20\u9012\uff0c\u4fdd\u8bc1\u6d88\u606f\u4e0d\u4f1a\u4e22\u5931\uff0c\u4e5f\u4e0d\u4f1a\u91cd\u590d\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#24-retained-messages","title":"2.4 \u4fdd\u7559\u6d88\u606f\uff08Retained Messages\uff09","text":"<p>\u4ee3\u7406\u4f1a\u5b58\u50a8\u4fdd\u7559\u7684\u6d88\u606f\uff0c\u5e76\u5728\u6709\u65b0\u5ba2\u6237\u7aef\u8ba2\u9605\u8be5\u4e3b\u9898\u65f6\u7acb\u5373\u53d1\u9001\u8fd9\u4e9b\u6d88\u606f\u3002\u4fdd\u7559\u6d88\u606f\u975e\u5e38\u9002\u7528\u4e8e\u5b58\u50a8\u5f53\u524d\u72b6\u6001\u6216\u521d\u59cb\u5316\u5ba2\u6237\u7aef\u7684\u573a\u666f\u3002</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#25-persistent-session","title":"2.5 \u6301\u4e45\u5316\u4f1a\u8bdd\uff08Persistent Session\uff09","text":"<p>\u901a\u8fc7\u6301\u4e45\u5316\u4f1a\u8bdd\uff0c\u5ba2\u6237\u7aef\u5728\u91cd\u65b0\u8fde\u63a5\u5230\u4ee3\u7406\u65f6\uff0c\u53ef\u4ee5\u6062\u590d\u4ee5\u524d\u7684\u8ba2\u9605\u5173\u7cfb\u548c\u6d88\u606f\u72b6\u6001\u3002\u5373\u4f7f\u5ba2\u6237\u7aef\u79bb\u7ebf\uff0c\u4ee3\u7406\u4ecd\u7136\u4f1a\u4fdd\u5b58\u5176\u8ba2\u9605\u7684\u6d88\u606f\u3002</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#26-keep-alive","title":"2.6 \u5fc3\u8df3\u673a\u5236\uff08Keep Alive\uff09","text":"<p>\u5fc3\u8df3\u673a\u5236\u7528\u4e8e\u786e\u4fdd\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u4e4b\u95f4\u7684\u8fde\u63a5\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001\u3002\u5ba2\u6237\u7aef\u5fc5\u987b\u5b9a\u671f\u5411\u4ee3\u7406\u53d1\u9001PING\u8bf7\u6c42\uff0c\u4ee3\u7406\u4f1a\u56de\u5e94PONG\u3002\u5982\u679c\u4e00\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u63a5\u6536\u5230PING\uff0c\u4ee3\u7406\u4f1a\u65ad\u5f00\u8fde\u63a5\u3002</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#27-last-will-and-testament-lwt","title":"2.7 \u9057\u5631\u6d88\u606f\uff08Last Will and Testament, LWT\uff09","text":"<p>\u5ba2\u6237\u7aef\u5728\u8fde\u63a5\u65f6\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u201c\u9057\u5631\u201d\u6d88\u606f\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u610f\u5916\u65ad\u5f00\u8fde\u63a5\uff0c\u4ee3\u7406\u4f1a\u81ea\u52a8\u53d1\u5e03\u8fd9\u4e2a\u6d88\u606f\u5230\u6307\u5b9a\u7684\u4e3b\u9898\u3002\u8fd9\u7528\u4e8e\u901a\u77e5\u5176\u4ed6\u5ba2\u6237\u7aef\u67d0\u4e2a\u5ba2\u6237\u7aef\u7684\u65ad\u5f00\u6216\u5f02\u5e38\u3002</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#3-mqtt-31mqtt-5","title":"3. MQTT 3.1\u4e0eMQTT 5\u7684\u533a\u522b","text":"<p>MQTT 3.1\u548cMQTT 5\u662f\u8be5\u534f\u8bae\u7684\u4e24\u4e2a\u7248\u672c\uff0c\u5b83\u4eec\u4e4b\u95f4\u5b58\u5728\u4e00\u4e9b\u91cd\u8981\u7684\u5dee\u5f02\uff0c\u4e3b\u8981\u4f53\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#31","title":"3.1 \u534f\u8bae\u7248\u672c","text":"<ul> <li>MQTT 3.1\uff1a\u6700\u521d\u53d1\u5e03\u7684\u7248\u672c\uff0c\u89c4\u8303\u5316\u4e86\u57fa\u672c\u7684\u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f\uff0c\u5e7f\u6cdb\u5e94\u7528\u4e8e\u7269\u8054\u7f51\u8bbe\u5907\u548c\u5b9e\u65f6\u6d88\u606f\u4f20\u9012\u3002</li> <li>MQTT 5\uff1a2018\u5e74\u53d1\u5e03\uff0c\u65b0\u589e\u4e86\u4e00\u4e9b\u589e\u5f3a\u529f\u80fd\uff0c\u6539\u5584\u4e86\u534f\u8bae\u7684\u53ef\u6269\u5c55\u6027\u3001\u6027\u80fd\u548c\u9519\u8bef\u5904\u7406\u673a\u5236\u3002\u5b83\u66f4\u52a0\u7075\u6d3b\u548c\u5f3a\u5927\uff0c\u9002\u7528\u4e8e\u66f4\u590d\u6742\u7684\u573a\u666f\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#32","title":"3.2 \u589e\u5f3a\u7684\u9519\u8bef\u5904\u7406","text":"<ul> <li>MQTT 3.1\uff1a\u5728\u51fa\u73b0\u534f\u8bae\u9519\u8bef\u65f6\uff0c\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u4f1a\u65ad\u5f00\u8fde\u63a5\uff0c\u4f46\u5e76\u672a\u660e\u786e\u63d0\u4f9b\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f\u3002</li> <li>MQTT 5\uff1a\u63d0\u4f9b\u4e86\u66f4\u7ec6\u7c92\u5ea6\u7684\u9519\u8bef\u5904\u7406\u673a\u5236\uff0c\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u80fd\u591f\u4ea4\u6362\u66f4\u591a\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u9519\u8bef\u7801\u53d8\u5f97\u66f4\u52a0\u4e30\u5bcc\u548c\u5177\u4f53\u3002\u8fd9\u6837\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u80fd\u66f4\u5bb9\u6613\u5730\u8bca\u65ad\u548c\u4fee\u590d\u8fde\u63a5\u95ee\u9898\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#33","title":"3.3 \u4e3b\u9898\u522b\u540d","text":"<ul> <li>MQTT 3.1\uff1a\u6ca1\u6709\u4e3b\u9898\u522b\u540d\u7684\u6982\u5ff5\uff0c\u6bcf\u4e2a\u6d88\u606f\u90fd\u9700\u8981\u5b8c\u6574\u7684\u4e3b\u9898\u8def\u5f84\u3002</li> <li>MQTT 5\uff1a\u5f15\u5165\u4e86\u4e3b\u9898\u522b\u540d\uff08Topic Alias\uff09\u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u5728\u6d88\u606f\u4e2d\u4f7f\u7528\u522b\u540d\u4ee3\u66ff\u957f\u4e3b\u9898\u8def\u5f84\uff0c\u4ece\u800c\u8282\u7701\u5e26\u5bbd\u548c\u63d0\u9ad8\u6027\u80fd\uff0c\u7279\u522b\u662f\u5728\u9700\u8981\u9891\u7e41\u53d1\u9001\u6d88\u606f\u7684\u5e94\u7528\u4e2d\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#34","title":"3.4 \u7528\u6237\u5c5e\u6027\u548c\u6d88\u606f\u5c5e\u6027","text":"<ul> <li>MQTT 3.1\uff1a\u53ea\u652f\u6301\u6d88\u606f\u672c\u8eab\u7684\u6570\u636e\uff0c\u65e0\u6cd5\u5728\u6d88\u606f\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u9644\u52a0\u989d\u5916\u7684\u5143\u6570\u636e\u3002</li> <li>MQTT 5\uff1a\u5f15\u5165\u4e86\u7528\u6237\u5c5e\u6027\uff08User Properties\uff09\u548c\u6d88\u606f\u5c5e\u6027\uff08Message Properties\uff09\uff0c\u5141\u8bb8\u5728\u53d1\u5e03\u7684\u6d88\u606f\u4e2d\u643a\u5e26\u9644\u52a0\u4fe1\u606f\uff0c\u4ece\u800c\u589e\u5f3a\u4e86\u534f\u8bae\u7684\u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#35","title":"3.5 \u5171\u4eab\u8ba2\u9605","text":"<ul> <li>MQTT 3.1\uff1a\u5ba2\u6237\u7aef\u53ea\u80fd\u5355\u72ec\u8ba2\u9605\u4e00\u4e2a\u4e3b\u9898\uff0c\u65e0\u6cd5\u5171\u4eab\u8be5\u4e3b\u9898\u7684\u8ba2\u9605\u3002</li> <li>MQTT 5\uff1a\u652f\u6301\u5171\u4eab\u8ba2\u9605\uff0c\u5141\u8bb8\u591a\u4e2a\u5ba2\u6237\u7aef\u5171\u540c\u8ba2\u9605\u4e00\u4e2a\u4e3b\u9898\uff0c\u5e76\u7531\u4ee3\u7406\u8f6e\u6d41\u5c06\u6d88\u606f\u53d1\u9001\u7ed9\u8fd9\u4e9b\u5ba2\u6237\u7aef\uff0c\u8fd9\u5bf9\u4e8e\u8d1f\u8f7d\u5747\u8861\u548c\u63d0\u9ad8\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\u975e\u5e38\u91cd\u8981\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#36","title":"3.6 \u4f1a\u8bdd\u4fe1\u606f","text":"<ul> <li>MQTT 3.1\uff1a\u4f1a\u8bdd\u53ea\u80fd\u5b58\u50a8\u5728\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u4e4b\u95f4\u7684\u8fde\u63a5\u671f\u95f4\uff0c\u5ba2\u6237\u7aef\u79bb\u7ebf\u65f6\u65e0\u6cd5\u6062\u590d\u4f1a\u8bdd\u4fe1\u606f\u3002</li> <li>MQTT 5\uff1a\u652f\u6301\u4f1a\u8bdd\u72b6\u6001\u7684\u6301\u4e45\u5316\uff0c\u5305\u62ec\u6d88\u606f\u7684\u91cd\u53d1\u3001\u6301\u4e45\u5316\u8ba2\u9605\u7b49\uff0c\u5ba2\u6237\u7aef\u5728\u91cd\u65b0\u8fde\u63a5\u65f6\u53ef\u4ee5\u6062\u590d\u6240\u6709\u72b6\u6001\uff0c\u589e\u5f3a\u4e86\u65ad\u7ebf\u91cd\u8fde\u65f6\u7684\u4f53\u9a8c\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#37","title":"3.7 \u589e\u5f3a\u7684\u5b89\u5168\u6027","text":"<ul> <li>MQTT 3.1\uff1a\u4ec5\u652f\u6301\u57fa\u672c\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u8eab\u4efd\u9a8c\u8bc1\u3002</li> <li>MQTT 5\uff1a\u589e\u52a0\u4e86\u66f4\u591a\u7684\u8ba4\u8bc1\u548c\u6388\u6743\u9009\u9879\uff0c\u4f8b\u5982\u901a\u8fc7\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u673a\u5236\u548c\u66f4\u52a0\u7075\u6d3b\u7684\u8bbf\u95ee\u63a7\u5236\u7b56\u7565\u6765\u63d0\u9ad8\u5b89\u5168\u6027\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#38","title":"3.8 \u8fde\u63a5\u8d85\u65f6\u673a\u5236","text":"<ul> <li>MQTT 3.1\uff1a\u8fde\u63a5\u8d85\u65f6\u673a\u5236\u8f83\u4e3a\u7b80\u5355\uff0c\u5ba2\u6237\u7aef\u53ea\u80fd\u8bbe\u7f6e\u8fde\u63a5\u7684\u6700\u5927\u7b49\u5f85\u65f6\u95f4\u3002</li> <li>MQTT 5\uff1a\u5f15\u5165\u4e86\u66f4\u52a0\u7075\u6d3b\u7684\u8fde\u63a5\u8d85\u65f6\u673a\u5236\uff0c\u5141\u8bb8\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u534f\u5546\u66f4\u52a0\u7cbe\u7ec6\u7684\u8d85\u65f6\u7b56\u7565\uff0c\u4ee5\u4fdd\u8bc1\u66f4\u9ad8\u6548\u7684\u8fde\u63a5\u7ba1\u7406\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#39","title":"3.9 \u8d1f\u8f7d\u5747\u8861","text":"<ul> <li>MQTT 3.1\uff1a\u6ca1\u6709\u539f\u751f\u7684\u8d1f\u8f7d\u5747\u8861\u652f\u6301\uff0c\u591a\u4e2a\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u6d88\u606f\u8f6c\u53d1\u4e3b\u8981\u4f9d\u8d56\u4e8e\u4ee3\u7406\u7684\u5b9e\u73b0\u3002</li> <li>MQTT 5\uff1a\u901a\u8fc7\u5f15\u5165\u5171\u4eab\u8ba2\u9605\u548c\u5176\u4ed6\u673a\u5236\uff0c\u66f4\u597d\u5730\u652f\u6301\u8d1f\u8f7d\u5747\u8861\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\u548c\u5bb9\u9519\u6027\u3002</li> </ul>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#4","title":"4. \u7ed3\u8bba","text":"<p>MQTT\u4f5c\u4e3a\u4e00\u79cd\u9ad8\u6548\u3001\u8f7b\u91cf\u7684\u6d88\u606f\u534f\u8bae\uff0c\u7279\u522b\u9002\u7528\u4e8e\u7269\u8054\u7f51\u548c\u5b9e\u65f6\u901a\u4fe1\u9886\u57df\u3002\u968f\u7740\u7248\u672c\u7684\u8fed\u4ee3\uff0cMQTT\u534f\u8bae\u4e0d\u65ad\u589e\u5f3a\u5176\u529f\u80fd\u548c\u7075\u6d3b\u6027\uff0cMQTT 5\u76f8\u6bd4\u4e8e3.1\u7248\u672c\uff0c\u63d0\u4f9b\u4e86\u66f4\u52a0\u4e30\u5bcc\u7684\u7279\u6027\u548c\u66f4\u5f3a\u7684\u6269\u5c55\u6027\uff0c\u66f4\u52a0\u9002\u5e94\u73b0\u4ee3\u5e94\u7528\u7684\u9700\u6c42\u3002</p> <p>\u5bf9\u4e8e\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u7406\u89e3\u8fd9\u4e9b\u5dee\u5f02\u80fd\u591f\u5e2e\u52a9\u5728\u4e0d\u540c\u573a\u666f\u4e0b\u9009\u62e9\u5408\u9002\u7684\u534f\u8bae\u7248\u672c\uff0c\u63d0\u5347\u5e94\u7528\u6027\u80fd\u548c\u53ef\u9760\u6027\u3002</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#5","title":"5. \u9644\u6cf3\u9053\u56fe\uff1a","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#1-mqtt_1","title":"1. MQTT\u8fde\u63a5\u8fc7\u7a0b","text":"<pre><code>sequenceDiagram\n    participant Client\n    participant Broker\n    Client-&gt;&gt;Broker: \u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42 (CONNECT)\n    Note right of Client: \u5305\u542b\u4ee5\u4e0b\u53c2\u6570:\\n- Protocol Name\\n- Protocol Level\\n- Client ID\\n- Clean Session Flag\\n- Will Flag (\u53ef\u9009)\\n- Will QoS (\u53ef\u9009)\\n- Will Retain Flag (\u53ef\u9009)\\n- Will Topic (\u53ef\u9009)\\n- Will Message (\u53ef\u9009)\\n- Username (\u53ef\u9009)\\n- Password (\u53ef\u9009)\n    Broker-&gt;&gt;Client: \u54cd\u5e94\u8fde\u63a5\u8bf7\u6c42 (CONNACK)\n    Note right of Broker: \u5305\u542b\u4ee5\u4e0b\u53c2\u6570:\\n- Return Code (0 = \u6210\u529f)\\n- Session Present Flag (\u53ef\u9009)\n    Client-&gt;&gt;Broker: \u63e1\u624b\u786e\u8ba4 (Ping)\n    Broker-&gt;&gt;Client: \u63e1\u624b\u786e\u8ba4 (Pong)\n    Client-&gt;&gt;Broker: \u5b8c\u6210\u8fde\u63a5\n    Note right of Client: \u8fde\u63a5\u5efa\u7acb\u6210\u529f\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u53d1\u9001\u548c\u63a5\u6536\u6d88\u606f\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#2","title":"2. \u6d88\u606f\u7684\u53d1\u5e03\u53ca\u63a5\u6536\u8fc7\u7a0b","text":"<pre><code>sequenceDiagram\n    participant Client\n    participant Broker\n    participant Subscriber\n    Client-&gt;&gt;Broker: \u53d1\u5e03\u6d88\u606f (PUBLISH)\n    Note right of Client: \u5305\u542b\u4ee5\u4e0b\u53c2\u6570:\\n- Topic\\n- QoS\\n- Message Payload\\n- Retain Flag\uff08\u53ef\u9009\uff09\n    Broker-&gt;&gt;Subscriber: \u5206\u53d1\u6d88\u606f\n    Subscriber-&gt;&gt;Broker: \u786e\u8ba4\u63a5\u6536\u6d88\u606f (SUBACK)\n    Note right of Subscriber: \u82e5QoS=1\uff0c\u5219\u9700\u786e\u8ba4\u6d88\u606f\u7684\u63a5\u6536\n    Broker-&gt;&gt;Client: \u53d1\u9001\u53d1\u5e03\u786e\u8ba4 (PUBACK) (QoS=1\u65f6)\n    Broker-&gt;&gt;Client: \u53d1\u9001\u53d1\u5e03\u786e\u8ba4 (PUBREC) -&gt; Client\u53d1\u9001PUBREL -&gt; Broker\u53d1\u9001PUBCOMP (QoS=2\u65f6)\n    Note right of Broker: \u5bf9\u4e8eQoS=2\uff0c\u9700\u8fdb\u884c\u56db\u6b21\u63e1\u624b\u8fc7\u7a0b\u4ee5\u786e\u4fdd\u6d88\u606f\u4e00\u6b21\u4e14\u4ec5\u4e00\u6b21\u4ea4\u4ed8\n    Client-&gt;&gt;Broker: \u5ba2\u6237\u7aef\u6536\u5230\u6d88\u606f\u786e\u8ba4\n    Note right of Client: \u5ba2\u6237\u7aef\u6536\u5230\u6d88\u606f\u5e76\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5904\u7406\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/MQTT%20%E4%BB%8B%E7%BB%8D/#3","title":"3. \u8fde\u63a5\u7684\u5fc3\u8df3\u68c0\u6d4b\u548c\u9057\u8a00\u673a\u5236","text":"<pre><code>sequenceDiagram\n    participant Client\n    participant Broker\n    Client-&gt;&gt;Broker: \u53d1\u9001\u5fc3\u8df3 (PINGREQ)\n    Broker-&gt;&gt;Client: \u54cd\u5e94\u5fc3\u8df3 (PINGRESP)\n    Note right of Client: \u5ba2\u6237\u7aef\u6bcf\u9694\u4e00\u5b9a\u65f6\u95f4\u53d1\u9001PINGREQ\u6d88\u606f\u4ee5\u7ef4\u6301\u8fde\u63a5\n    Note right of Broker: \u7ecf\u5e38\u68c0\u67e5\u5ba2\u6237\u7aef\u7684\u6d3b\u8dc3\u72b6\u6001\uff0c\u82e5\u8d85\u8fc7\u8d85\u65f6\u65f6\u95f4\u672a\u6536\u5230\u5fc3\u8df3\uff0c\u8ba4\u4e3a\u8fde\u63a5\u5df2\u65ad\u5f00\n    Broker-&gt;&gt;Client: \u9057\u8a00 (Will Message) (\u5982\u679c\u8bbe\u7f6e\u4e86\u9057\u8a00)\n    Note right of Broker: \u5982\u679c\u5ba2\u6237\u7aef\u65ad\u5f00\u8fde\u63a5\u4e14\u8bbe\u7f6e\u4e86\u9057\u8a00\uff0c\u4ee3\u7406\u4f1a\u5411\u8ba2\u9605\u8005\u53d1\u5e03\u9057\u8a00\u6d88\u606f\n    Client-&gt;&gt;Broker: \u53d1\u9001\u8fde\u63a5\u65ad\u5f00\u6d88\u606f (DISCONNECT) (\u5982\u679c\u4e3b\u52a8\u65ad\u5f00)\n    Broker-&gt;&gt;Client: \u786e\u8ba4\u65ad\u5f00\u8fde\u63a5 (DISCONNECT ACK)\n    Note right of Broker: \u4ee3\u7406\u63a5\u6536\u5230\u5ba2\u6237\u7aef\u7684\u65ad\u5f00\u8bf7\u6c42\u5e76\u786e\u8ba4\u65ad\u5f00\n    Client-&gt;&gt;Broker: \u81ea\u52a8\u91cd\u8fde\uff08\u5982\u679c\u542f\u7528\u4e86\u81ea\u52a8\u91cd\u8fde\u673a\u5236\uff09\n    Broker-&gt;&gt;Client: \u53d1\u9001\u8fde\u63a5\u786e\u8ba4 (CONNACK) -&gt; \u91cd\u8fde\u6210\u529f\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/","title":"\u4eff\u4e66\u9875\u7ffb\u9875\u6548\u679c\u5b9e\u73b0\u601d\u8def","text":"<p>\u4e0b\u9762\u8fd9\u7bc7\u6587\u7ae0\u660e\u4e86\u4e66\u9875\u7ffb\u9875\u7684\u539f\u7406\uff0c\u4f46\u662f\u4e0d\u662f\u7279\u522b\u6e05\u6670\uff0c\u77e5\u9053\u5404\u79cd\u6d4b\u91cf\uff0c\u4f46\u662f\u4e0d\u660e\u767d\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u8ba1\u7b97\uff0c\u4ee5\u4e0b\u4ee5\u4e2a\u4eba\u601d\u8def\u91cd\u65b0\u68b3\u7406\u4e00\u904d\uff0c\u65b9\u4fbf\u7406\u89e3</p> <p>\u3010\u8f6c\u3011Android \u5b9e\u73b0\u4e66\u7c4d\u7ffb\u9875\u6548\u679c----\u539f\u7406\u7bc7</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#_1","title":"\u6700\u7ec8\u6548\u679c\u9884\u89c8","text":"<p>\u6587\u672b\u9644\u4e0a\u5b8c\u6574demo\u4ee3\u7801</p> <p></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#_2","title":"\u4ece\u6298\u7eb8\u5f00\u59cb","text":"<p>\u7531\u4e8e\u539f\u6587\u516c\u5f0f\u592a\u591a\uff0c\u4e0d\u4fbf\u7406\u89e3\uff0c\u4ece\u8fd9\u91cc\u5f00\u59cb\u4ee5\u6211\u5c1d\u8bd5\u5f00\u53d1\u7684\u5fc3\u8def\u5386\u7a0b\uff0c\u62bd\u4e1d\u5265\u8327\u6f14\u793a\u5982\u4f55\u5b9e\u73b0\u3002 \u9996\u5148\u5148\u6a21\u62df\u4e00\u4e2a\u7eb8\u5f20\uff0c\u6ca1\u6709Z\u8f74\u7684\u6548\u679c\uff0c\u5c06\u7eb8\u5f20\u7684\u8fb9\u7ebf\u753b\u51fa\u6765\u3002</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#1","title":"1. \u9009\u5b9a\u63a7\u5236\u70b9","text":"<p>\u5148\u9009\u5b9a\u624b\u6307\u89e6\u6478\u7684\u7eb8\u5f20\u7684\u89e6\u6478\u70b9\uff0c\u8868\u793a\u7eb8\u5f20\u7684\u7aef\u70b9\u5c06\u88ab\u56fa\u5b9a\u5728\u8fd9\u4e2a\u4f4d\u7f6e\uff0c\u8be5\u70b9\u5b9a\u4e49\u4e3a<code>A</code>(x,y) \u88ab\u62d6\u52a8\u7684\u7aef\u70b9\u5b9a\u4e49\u4e3a<code>O</code>(width, height)\uff0c\u53f3\u4e0b\u89d2\u7684\u7aef\u70b9</p> <p></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#2","title":"2. \u6839\u636e\u89e6\u6478\u70b9\u7ed8\u5236\u6298\u75d5","text":"<p>\u5f53\u524d\u6298\u75d5\u4e0d\u5b58\u5728Z\u8f74\u6982\u5ff5\uff0c\u76f4\u63a5\u7ed8\u5236\uff0c\u6298\u75d5\u7684\u4f4d\u7f6e\u4e00\u5b9a\u662f\u843d\u5728<code>AO</code>\u8fde\u63a5\u7ebf\u7684\u4e2d\u70b9<code>B</code>\uff0c\u4e14\u56e0\u4e3a\u662f\u6298\u75d5\uff0c\u4e24\u8fb9\u4e00\u5b9a\u662f\u5ef6\u6298\u75d5\u5bf9\u79f0\uff0c\u90a3\u4e48\u955c\u50cf\u7684\u70b9\u7684\u8fde\u7ebf\u4e00\u5b9a\u662f\u5782\u76f4\u4e8e\u6298\u75d5\u7684\u3002</p> <p>\u6839\u636e\u76f8\u4f3c\u4e09\u89d2\u5f62\uff0c\u5bf9\u5e94\u8fb9\u7684\u6bd4\u4f8b\u662f\u76f8\u7b49\u7684\uff0c\u80fd\u591f\u6c42\u5f97<code>C</code>,<code>D</code>\u70b9\u7684\u4f4d\u7f6e</p> <pre><code>centerAO.x = touchP.x / 2 + startP.x /2;\ncenterAO.y = touchP.y / 2 + startP.y /2;\n// \u76f8\u4f3c\u4e09\u89d2\u5f62\uff0c\u4e0d\u7528\u53d6\u7edd\u5bf9\u503c\u3002\u5206\u5b50\u5fc5\u5b9a\u4e3a\u6b63\u6570\u3002\u6839\u636e\u5206\u6bcd\u7684\u6b63\u8d1f\u51b3\u5b9aC\u70b9\u4f4d\u7f6e\npointC.x  = centerAO.x - (startP.y - centerAO.y ) * (startP.y - centerAO.y) / (startP.x - centerAO.x);\npointC.y  = startP.y;\npointD.y  = centerAO.y - (startP.x - centerAO.x ) * (startP.x - centerAO.x) / (startP.y - centerAO.y);\npointD.x  = startP.x;\n</code></pre> <p></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#3-z","title":"3. \u6a21\u62dfZ\u8f74\u7a7a\u95f4\u7684\u6298\u75d5","text":"<p>\u73b0\u5728\u89c6\u89c9\u6548\u679c\u5df2\u7ecf\u5927\u81f4\u6709\u4e86\uff0c\u7ffb\u8fc7\u6765\u7684\u6298\u9875\u7d27\u8d34\u7740\u7eb8\u5f20\uff0c\u6ca1\u6709\u7a7a\u95f4\u611f\uff0c\u4e0b\u9762\u5f00\u59cb\u4f18\u5316</p> <p>\u4e0b\u9762\u9700\u8981\u5728<code>AB</code>\u8303\u56f4\u5185\u9009\u62e9\u4e00\u4e2a<code>CD</code>\u7684\u5e73\u884c\u7ebf\u4f5c\u4e3a\u6298\u75d5\uff0c\u56e0\u4e3a\u5b58\u5728Z\u8f74\uff0c\u90e8\u5206\u7eb8\u5f20\u88ab\u5f2f\u66f2\u4e86\uff0c\u5b9e\u9645\u6298\u75d5\u4e00\u5b9a\u65e0\u6cd5\u8fbe\u5230CD\u4f4d\u7f6e</p> <p>\u5b9a\u4e49\u4e00\u4e2a\u6298\u75d5\u6bd4\u7387<code>foldRatio</code>\uff0c\u8d8a\u5927\u8868\u793a\u79bb<code>CD</code>\u8d8a\u8fdc\uff0c\u6682\u65f6\u53d6\u503c\u4e2d\u70b9\uff0c\u7ed8\u5236\u51fa<code>EF</code>\u70b9,\u5206\u522b\u4e0eXY\u8f74\u8fb9\u7ebf\u76f8\u4ea4</p> <pre><code>// \u8ba1\u7b97\u4e09\u7ef4\u7a7a\u95f4\u4e2dZ\u8f74\u5e95\u90e8\u7684\u6298\u75d5\u4f4d\u7f6e\npointE.x = pointC.x - (startP.x - pointC.x) * foldRatio;\npointE.y = pointC.y;\npointF.y = pointD.y - (startP.y - pointD.y) * foldRatio;\npointF.x = pointD.x;\n</code></pre> <p></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#4","title":"4. \u6298\u75d5\u8fc7\u6e21\u53c2\u8003\u7ebf","text":"<p>\u9009\u53d6<code>CD</code> <code>EF</code>\u4e2d\u95f4\u7b49\u5206\u4f4d\u7f6e\u7ed8\u5236\u51fa\u4e00\u4e2a\u53c2\u8003\u7ebf\uff0c\u7406\u8bba\u4e0a\u7ebf\u6761\u5230\u8fd9\u4e2a\u7ebf\u7684\u65f6\u5019\u5c31\u5e94\u8be5\u62d0\u5f2f\u4e86\uff0c\u62d0\u5f2f\u7684\u90e8\u5206\u4ee3\u8868\u6298\u75d5\u5377\u66f2\u7a7a\u9f13\u7684\u90e8\u5206\uff0c\u8fd9\u91cc\u5f53\u7136\u4e0d\u4e00\u5b9a\u662f\u6b63\u4e2d\u95f4\uff0c\u611f\u5174\u8da3\u7684\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u53c2\u6570\u53bb\u63a7\u5236</p> <pre><code>// \u5377\u66f2\u8fb9\u7f18\u5728\u6298\u75d5\u548c\u9884\u671f\u6298\u75d5\u7684\u4e2d\u95f4\u4f4d\u7f6e\npointG.x = pointE.x /2 + pointC.x / 2;\npointG.y = pointE.y;\npointH.x = pointF.x;\npointH.y = pointF.y / 2 + pointD.y /2;\n</code></pre> <p></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#5","title":"5. \u8865\u5145\u5269\u4f59\u70b9","text":"<p>\u6c42\u76f8\u4ea4\u70b9\u5c31\u5f88\u5bb9\u6613\u4e86\uff0c\u5df2\u77e52\u70b9\u53ef\u4ee5\u5f97\u51fa\u76f4\u7ebf\u7684\u65b9\u7a0b\u5f0f</p> <p>2\u4e2a\u65b9\u7a0b\u5f0f\u76f8\u7b49\u65f6\u5c31\u662f\u4ea4\u70b9\uff0c\u5f88\u5bb9\u6613\u6c42\u5f97(x,y)\u5750\u6807\uff0c\u8865\u5145\u5269\u4f59\u70b9\u7684\u4f4d\u7f6e</p> <p><code>M</code> <code>N</code>\u70b9\u4e3a\u5782\u76f4\u5e73\u5206\u7ebf\u76f8\u4ea4\u70b9\uff0c\u56e0\u4e3a\u6298\u75d5\u4e0a\u4e0b\u7684\u5f27\u5ea6\u5e94\u5f53\u76f8\u540c\uff0c\u6545\u53d6\u4e2d\u70b9</p> <p></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#6","title":"6. \u5e73\u6ed1\u8fc7\u6e21","text":"<p>\u6b64\u65f6\u4e09\u7ef4\u7684\u6298\u75d5\u96cf\u5f62\u5df2\u7ecf\u6709\u4e86\uff0c\u4f46\u662f\u76f4\u63a5\u8fde\u63a5<code>AIKMGE</code>\uff0c\u8fc7\u6e21\u663e\u5f97\u7279\u522b\u786c\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u8d1d\u585e\u5c14\u66f2\u7ebf\u767b\u573a\u4e86\uff0c\u8fd9\u91cc\u7528\u7684\u662f\u4e8c\u9636\u8d1d\u585e\u5c14\u66f2\u7ebf\uff0c\u8fd9\u91cc\u7684<code>K</code> <code>G</code>\u5c31\u662f\u63a7\u5236\u70b9\uff0cM\u4e3a\u7aef\u70b9\uff0c\u8fde\u7ebf\u540e\u7684\u6548\u679c</p> <p></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#7","title":"7. \u4e0a\u8272","text":"<p>\u8fd9\u91cc\u5b9a\u4e493\u4e2a\u989c\u8272\uff0c\u4e0b\u4e00\u9875\u7684\u989c\u8272\uff0c\u4e0a\u4e00\u9875\u7684\u989c\u8272\uff0c\u80cc\u9762\u7684\u989c\u8272</p> <ul> <li>\u4e0b\u4e00\u9875\u7684\u989c\u8272\uff1a\u6700\u597d\u7ed8\u5236\uff0c\u56e0\u4e3a\u6700\u7ec8\u4f1a\u88ab\u76d6\u4f4f\u4e00\u90e8\u5206\uff0c\u6240\u4ee5\u9ed8\u8ba4\u76f4\u63a5\u7ed8\u5236\u5168\u5c4f\u5373\u53ef</li> <li>\u80cc\u9762\u989c\u8272\uff1a<code>AIMNJ</code>\u533a\u57df\uff0c\u662f\u4e2a\u89c4\u5219\u56fe\u5f62\uff0c\u8fd9\u4e2a\u4e5f\u6bd4\u8f83\u597d\u8ba1\u7b97\uff0c\u76f4\u63a5path\u8fde\u63a5\u5373\u53ef\u5f97\u5230</li> <li>\u4e0a\u4e00\u9875\u7684\u989c\u8272\uff1a\u4e0a\u4e00\u9875\u6839\u636e\u62d6\u62fd\u7684\u4f4d\u7f6e\u4e0d\u540c\uff0c\u4ea7\u751f\u7684\u533a\u57df\u4e5f\u662f\u4e0d\u89c4\u5219\u7684\uff0c\u6240\u4ee5\u4f7f\u7528canvas\u7684\u88c1\u5207\uff0c\u5c06\u4e0d\u9700\u8981\u7684\u90e8\u5206\u88c1\u5207\u6389\uff0c\u5269\u4f59\u90e8\u5206\u4e0a\u8272\u5373\u53ef</li> </ul> <pre><code>clip.reset();\nclip.moveTo(touchP.x, touchP.y);\nclip.lineTo(pointI.x, pointI.y);\nclip.quadTo(pointK.x, pointK.y, pointM.x, pointM.y);\nclip.quadTo(pointG.x, pointG.y, pointE.x, pointE.y);\nclip.lineTo(startP.x, startP.y);\nclip.lineTo(pointF.x, pointF.y);\nclip.quadTo(pointH.x, pointH.y,pointN.x, pointN.y);\nclip.quadTo(pointL.x, pointL.y,pointJ.x, pointJ.y);\nclip.close();\ncanvas.save();\ncanvas.clipPath(clip, Region.Op.DIFFERENCE);;\npagePaint.setColor(Color.GREEN);\ncanvas.drawRect(canvas.getClipBounds(),pagePaint);\ncanvas.restore();\nback.reset();\nback.moveTo(touchP.x, touchP.y);\nback.lineTo(pointI.x, pointI.y);\nback.quadTo(pointK.x, pointK.y, pointM.x, pointM.y);\nback.lineTo(pointN.x, pointN.y);\nback.quadTo(pointL.x, pointL.y,pointJ.x, pointJ.y);\nback.close();\ncanvas.drawPath(back, linePaint);\n</code></pre> <p></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E4%BB%BF%E4%B9%A6%E9%A1%B5%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/#8","title":"8.\u5b8c\u6574\u4ee3\u7801","text":"<p>\u73b0\u5728\u5b9e\u73b0\u6574\u4f53\u601d\u8def\u5df2\u5b8c\u6210\uff0c\u53ea\u9700\u8981\u5728touch\u4e8b\u4ef6\u91cc\u52a8\u6001\u4fee\u6539A\u70b9\u5750\u6807\u5373\u53ef\u5b9e\u73b0\u52a8\u753b\u3002</p> <p>\u7ffb\u9875\u70b9\u901a\u8fc7\u4fee\u6539O\u70b9\u5750\u6807\u5373\u53ef\u5b9e\u73b0</p> <pre><code>package com.example.myapplication.page;\n\nimport android.content.Context;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.graphics.Path;\nimport android.graphics.Point;\nimport android.graphics.PointF;\nimport android.graphics.Region;\nimport android.util.AttributeSet;\nimport android.view.MotionEvent;\nimport android.view.View;\n\nimport androidx.annotation.Nullable;\n\npublic class TurnPageView extends View {\n    /**\n     * \u6298\u75d5\u6bd4\u7387\uff0c\u8d8a\u5927\u7eb8\u7684\u7ffb\u8d77\u9ad8\u5ea6\u8d8a\u9ad8\n     */\n    private float foldRatio = 0.5f;\n    private Paint textPaint;\n    private Paint pagePaint;\n    private Paint linePaint;\n    private Paint guideLinePaint;\n\n    private PointF touchP = new PointF();\n    private PointF startP = new PointF();\n    private PointF centerAO = new PointF();\n    private PointF pointC = new PointF();\n    private PointF pointD = new PointF();\n    private PointF pointE = new PointF();\n    private PointF pointF = new PointF();\n    private PointF pointG = new PointF();\n    private PointF pointH = new PointF();\n    private PointF pointI = new PointF();\n    private PointF pointJ = new PointF();\n    private PointF pointK = new PointF();\n    private PointF pointL = new PointF();\n    private PointF pointM = new PointF();\n    private PointF pointN = new PointF();\n    private Path clip = new Path();\n    private Path back = new Path();\n    public TurnPageView(Context context) {\n        this(context, null);\n    }\n\n    public TurnPageView(Context context, @Nullable AttributeSet attrs) {\n        this(context, attrs, 0);\n    }\n\n    public TurnPageView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {\n        this(context, attrs, defStyleAttr, 0);\n    }\n\n    public TurnPageView(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        guideLinePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        textPaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        linePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        pagePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n\n        textPaint.setTextSize(40);\n        textPaint.setStrokeWidth(3);\n        textPaint.setStyle(Paint.Style.FILL_AND_STROKE);\n        textPaint.setColor(Color.BLACK);\n\n        linePaint.setColor(Color.RED);\n        linePaint.setStyle(Paint.Style.FILL_AND_STROKE);\n        linePaint.setStrokeWidth(2);\n\n        pagePaint.setStyle(Paint.Style.FILL);\n\n        guideLinePaint.setColor(Color.BLACK);\n        guideLinePaint.setAlpha(100);\n        guideLinePaint.setStyle(Paint.Style.STROKE);\n        guideLinePaint.setStrokeWidth(2);\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {\n        super.onLayout(changed, left, top, right, bottom);\n        touchP.x = right  - left - 300;\n        touchP.y = bottom - top - 600;\n        startP.x = right - left;\n        startP.y = bottom - top;\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        calculate();\n        drawGuideLines(canvas);\n        drawPoints(canvas);\n\n    }\n    private void calculate(){\n        centerAO.x = touchP.x / 2 + startP.x /2;\n        centerAO.y = touchP.y / 2 + startP.y /2;\n        // \u76f8\u4f3c\u4e09\u89d2\u5f62\uff0c\u4e0d\u7528\u53d6\u7edd\u5bf9\u503c\u3002\u5206\u5b50\u5fc5\u5b9a\u4e3a\u6b63\u6570\u3002\u6839\u636e\u5206\u6bcd\u7684\u6b63\u8d1f\u51b3\u5b9aC\u70b9\u4f4d\u7f6e\n        pointC.x  = centerAO.x - (startP.y - centerAO.y ) * (startP.y - centerAO.y) / (startP.x - centerAO.x);\n        pointC.y  = startP.y;\n        // \u76f8\u4f3c\u4e09\u89d2\u5f62\uff0c\u4e0d\u7528\u53d6\u7edd\u5bf9\u503c\u3002\u5206\u5b50\u5fc5\u5b9a\u4e3a\u6b63\u6570\u3002\u6839\u636e\u5206\u6bcd\u7684\u6b63\u8d1f\u51b3\u5b9aC\u70b9\u4f4d\u7f6e\n        pointD.y  = centerAO.y - (startP.x - centerAO.x ) * (startP.x - centerAO.x) / (startP.y - centerAO.y);\n        pointD.x  = startP.x;\n        // \u8ba1\u7b97\u4e09\u7ef4\u7a7a\u95f4\u4e2dZ\u8f74\u5e95\u90e8\u7684\u6298\u75d5\u4f4d\u7f6e\n        pointE.x = pointC.x - (startP.x - pointC.x) * foldRatio;\n        pointE.y = pointC.y;\n        pointF.y = pointD.y - (startP.y - pointD.y) * foldRatio;\n        pointF.x = pointD.x;\n        // \u5377\u66f2\u8fb9\u7f18\u5728\u6298\u75d5\u548c\u9884\u671f\u6298\u75d5\u7684\u4e2d\u95f4\u4f4d\u7f6e\n        pointG.x = pointE.x /2 + pointC.x / 2;\n        pointG.y = pointE.y;\n        pointH.x = pointF.x;\n        pointH.y = pointF.y / 2 + pointD.y /2;\n        // \u83b7\u53d6\u5e95\u90e8\u6298\u75d5\u548c\u7ffb\u8fc7\u6765\u7684\u7eb8\u7684\u76f8\u4ea4\u70b9\uff0c\u7406\u8bba\u4e0a\u4ece\u8fd9\u91cc\u5c31\u5e94\u8be5\u8981\u5f00\u59cb\u53d8\u5316\u6210\u5f27\u7ebf\u4e86\uff0c\u9700\u8981\u4f5c\u4e3a\u8d1d\u585e\u5c14\u66f2\u7ebf\u7684\u8d77\u59cb\u70b9\n        getNodeForTwoLine(pointI, pointE, pointF, touchP, pointC);\n        getNodeForTwoLine(pointJ, pointE, pointF, touchP, pointD);\n        // \u5f27\u7ebf\u7684\u63a7\u5236\u70b9\uff0c2\u6761\u7ebf\u521a\u597d\u662f\u5f27\u7ebf\u7684\u5207\u7ebf\n        getNodeForTwoLine(pointK, pointG, pointH, touchP, pointC);\n        getNodeForTwoLine(pointL, pointG, pointH, touchP, pointD);\n        // C\u70b9\u5230GH\u8fb9\u7f18\u7684\u5782\u7ebf\u4ea4\u70b9\uff0c\u7406\u8bba\u4e0a\u4ea4\u70b9\u5e94\u5f53\u662f\u5f27\u7ebf\u5f00\u59cb\u53d8\u65b9\u5411\u7684\u70b9\uff0c\u521a\u597dGH\u662f\u5176\u5207\u7ebf\n        pointM.x = pointG.x /2 + pointK.x /2;\n        pointM.y = pointG.y /2 + pointK.y /2;\n        pointN.x = pointL.x /2 + pointH.x /2;\n        pointN.y = pointL.y /2 + pointH.y /2;\n    }\n    private void drawGuideLines(Canvas canvas){\n        pagePaint.setColor(Color.BLUE);\n        canvas.drawRect(canvas.getClipBounds(),pagePaint);\n        // \u7ed8\u5236AO\n        canvas.drawLine(startP.x, startP.y, touchP.x, touchP.y, guideLinePaint);\n        // \u7ed8\u5236AC,OC\n        canvas.drawLine(pointC.x, pointC.y, touchP.x, touchP.y, guideLinePaint);\n        canvas.drawLine(startP.x, startP.y, pointC.x, pointC.y, guideLinePaint);\n        // \u7ed8\u5236AD,OD\n        canvas.drawLine(pointD.x, pointD.y, touchP.x, touchP.y, guideLinePaint);\n        canvas.drawLine(startP.x, startP.y, pointD.x, pointD.y, guideLinePaint);\n        // \u7ed8\u5236CD\n        canvas.drawLine(pointD.x, pointD.y, pointC.x, pointC.y, guideLinePaint);\n        // \u7ed8\u5236EF\n        canvas.drawLine(pointE.x, pointE.y, pointF.x, pointF.y, guideLinePaint);\n        // \u7ed8\u5236gh\n        canvas.drawLine(pointG.x, pointG.y, pointH.x, pointH.y, guideLinePaint);\n\n\n        clip.reset();\n        clip.moveTo(touchP.x, touchP.y);\n        clip.lineTo(pointI.x, pointI.y);\n        clip.quadTo(pointK.x, pointK.y, pointM.x, pointM.y);\n        clip.quadTo(pointG.x, pointG.y, pointE.x, pointE.y);\n        clip.lineTo(startP.x, startP.y);\n        clip.lineTo(pointF.x, pointF.y);\n        clip.quadTo(pointH.x, pointH.y,pointN.x, pointN.y);\n        clip.quadTo(pointL.x, pointL.y,pointJ.x, pointJ.y);\n        clip.close();\n        canvas.save();\n        canvas.clipPath(clip, Region.Op.DIFFERENCE);;\n        pagePaint.setColor(Color.GREEN);\n        canvas.drawRect(canvas.getClipBounds(),pagePaint);\n        canvas.restore();\n        back.reset();\n        back.moveTo(touchP.x, touchP.y);\n        back.lineTo(pointI.x, pointI.y);\n        back.quadTo(pointK.x, pointK.y, pointM.x, pointM.y);\n        back.lineTo(pointN.x, pointN.y);\n        back.quadTo(pointL.x, pointL.y,pointJ.x, pointJ.y);\n        back.close();\n        canvas.drawPath(back, linePaint);\n    }\n    private void drawPoints(Canvas canvas) {\n        // \u89e6\u6478\u70b9\n        drawPoint(canvas, \"A\", touchP.x, touchP.y);\n        // \u8d77\u59cb\u7aef\u70b9\n        drawPoint(canvas, \"O\", startP.x, startP.y);\n        // AO\u4e2d\u70b9\n        drawPoint(canvas, \"B\", centerAO.x, centerAO.y);\n        // C\u70b9\uff1a\u5782\u76f4\u5e73\u5206\u7ebf\u548cO\u70b9\u6c34\u5e73\u76f8\u4ea4\n        drawPoint(canvas, \"C\", pointC.x, pointC.y);\n        // D\u70b9\uff1a\u5782\u76f4\u5e73\u5206\u7ebf\u548cO\u70b9\u5782\u76f4\u76f8\u4ea4\n        drawPoint(canvas, \"D\", pointD.x, pointD.y);\n        // EF\u70b9\uff1az\u8f74\u5e95\u90e8\u6298\u75d5\n        drawPoint(canvas, \"E\", pointE.x, pointE.y);\n        drawPoint(canvas, \"F\", pointF.x, pointF.y);\n\n        // GH\u70b9\uff1a\u5f2f\u66f2\u8fb9\u7f18\uff08\u5f27\u7ebf\u63a7\u5236\u70b9\uff09\n        drawPoint(canvas, \"G\", pointG.x, pointG.y);\n        drawPoint(canvas, \"H\", pointH.x, pointH.y);\n        // \u76f8\u4ea4\u70b9\n        drawPoint(canvas, \"I\", pointI.x, pointI.y);\n        drawPoint(canvas, \"J\", pointJ.x, pointJ.y);\n        // \u76f8\u4ea4\u70b9\n        drawPoint(canvas, \"K\", pointK.x, pointK.y);\n        drawPoint(canvas, \"L\", pointL.x, pointL.y);\n        // \u76f8\u4ea4\u70b9\n        drawPoint(canvas, \"M\", pointM.x, pointM.y);\n        drawPoint(canvas, \"N\", pointN.x, pointN.y);\n\n    }\n    private void drawPoint(Canvas canvas, String text, float x, float y) {\n        canvas.drawCircle(x, y, 5, textPaint);\n        canvas.drawText(text, x - 40, y, textPaint);\n    }\n\n\n    private void getNodeForTwoLine(PointF pointF,PointF lineA1, PointF lineA2, PointF lineB1, PointF lineB2){\n        // y = ax + b;\n        float a1,b1,a2,b2;\n        // \u5b9e\u9645\u5c31\u662f\u6c42\u659c\u7387\u548c\u504f\u79fb\n        a1 = (lineA1.y - lineA2.y) / (lineA1.x - lineA2.x);\n        b1 = lineA1.y - a1 * lineA1.x;\n        a2 = (lineB1.y - lineB2.y) / (lineB1.x - lineB2.x);\n        b2 = lineB1.y - a2 * lineB1.x;\n\n        //a1x +b1 = a2x + b2\n        //x = b2-b1/a1-a2\n        pointF.x = (b2 - b1) / (a1 - a2);\n        pointF.y = a1 * pointF.x + b1;\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        touchP.x = event.getX();\n        touchP.y = event.getY();\n        invalidate();\n        return true;\n    }\n}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"\u5e38\u7528\u547d\u4ee4","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_1","title":"\u65e5\u5fd7","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_2","title":"\u5bfc\u51fa\u65e5\u5fd7","text":"<p>\u5b8c\u6574\u5bfc\u51fa</p> <pre><code>adb logcat &gt; log.txt\n</code></pre> <p>\u4ec5\u5bfc\u51fa <code>systemlog</code></p> <pre><code>adb logcat -b system &gt; log.txt\n</code></pre> <p>\u4ec5\u5bfc\u51fa <code>eventslog</code></p> <p>\u5e38\u89c4\u5b8c\u6574\u5bfc\u51fa\u7684logcat\u65e5\u5fd7\u4ec5\u5305\u542bmain\u53casystem</p> <pre><code>adb logcat -b events &gt; log.txt\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_3","title":"\u7b5b\u9009","text":"<p>crash <pre><code>adb logcat -b crash\n</code></pre></p> <p>\u81ea\u5b9a\u4e49 <pre><code>adb shell logcat | grep \"xxxx\"\n</code></pre></p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_4","title":"\u8c03\u8bd5","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#activity","title":"\u5f53\u524d\u6808\u9876activity","text":"<pre><code>adb shell dumpsys activity | findstr \"mResume\"\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_5","title":"\u5feb\u6377\u547d\u4ee4","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_6","title":"\u5f00\u542f\u5e03\u5c40\u8fb9\u754c","text":"<pre><code>adb shell setprop debug.layout true\nadb shell service call activity 1599295570\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B8%A9%E5%9D%91/","title":"\u8e29\u5751","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B8%A9%E5%9D%91/#_1","title":"\u9ed8\u8ba4\u5168\u5c4f","text":"<pre><code>public static void hideNavigationBar(Window window){  \n    window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);  \n    window.getDecorView().setOnSystemUiVisibilityChangeListener(visibility -&gt; {  \n        int uiOptions = View.SYSTEM_UI_FLAG_LAYOUT_STABLE |  \n                //\u5e03\u5c40\u4f4d\u4e8e\u72b6\u6001\u680f\u4e0b\u65b9  \n                View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION |  \n                //\u5168\u5c4f  \n                View.SYSTEM_UI_FLAG_FULLSCREEN |  \n                //\u9690\u85cf\u5bfc\u822a\u680f  \n                View.SYSTEM_UI_FLAG_HIDE_NAVIGATION |  \n                View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN;  \n        uiOptions |= View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;  \n        window.getDecorView().setSystemUiVisibility(uiOptions);  \n    });}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B8%A9%E5%9D%91/#plus","title":"\u9ed8\u8ba4\u5168\u5c4f plus","text":"<p>\u5b58\u57282\u4e2a\u9875\u9762\u7684\u60c5\u51b5\u4e0b\uff0cA\u9875\u9762\u5728\u4e0b\u5c42\uff0cB\u9875\u9762\u5728\u4e0a\u5c42\u4f46\u662f\u534a\u900f\u660e\uff0c\u540c\u65f6B\u5305\u542b\u4e00\u4e2a\u8f93\u5165\u6846</p> <p>\u5982\u679c\u60f3\u8981\u8f93\u5165\u6cd5\u5f39\u51fa\u534a\u5c4f\uff0cB\u9875\u9762\u88ab\u6324\u538b\u7684\u540c\u65f6\uff0c\u4f1a\u5bfc\u81f4A\u540c\u65f6\u88ab\u6324\u538b\uff0c\u5982\u679cA\u8bbe\u7f6e\u4e86\u5c5e\u6027<code>android:windowSoftInputMode=\"adjustNothing\"</code>\u867d\u7136\u4e0d\u4f1a\u88ab\u6324\u538b\uff0c\u4f46\u662f\u4f1a\u5bfc\u81f4\u5ffd\u7565\u5bfc\u822a\u680f\u9ad8\u5ea6\u5bfc\u81f4\u7f3a\u5931\u4e00\u5757</p> <p>\u4ee5\u4e0b\u4ee3\u7801\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u5f97A\u9875\u9762\u8bbe\u7f6e<code>android:windowSoftInputMode=\"adjustNothing\"</code>\u4e14\u4e0d\u4f1a\u9020\u6210\u7f3a\u5931</p> <pre><code>public static void hideNavigationBar(Window window, View rootView){  \n    hideNavigationBar(window);  \n    WindowCompat.setDecorFitsSystemWindows(window, false);  \n    window.addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);  \n    window.addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION);  \n    WindowInsetsControllerCompat windowInsetsController = ViewCompat.getWindowInsetsController(rootView);  \n    windowInsetsController.setSystemBarsBehavior(WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE);  \n    windowInsetsController.hide(WindowInsetsCompat.Type.systemBars());  \n}\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/","title":"Android\u672c\u5730\u5316\u9002\u914d\u4e4bICU\u63a5\u53e3","text":"<p>[!FAQ] \u8f6c\u8f7d \u8f6c\u81ea https://juejin.cn/post/7211745375921029181</p>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_1","title":"\u80cc\u666f\uff1a","text":"<p>\u5728\u591a\u8bed\u8a00\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u4f1a\u9047\u5230\u672c\u5730\u5316\u9002\u914d\u4e0d\u89c4\u8303\u5bfc\u81f4\u7684\u95ee\u9898\u3002\u4f8b\u5982 \u6708\u4efd\u7ffb\u8bd1\u9519\u8bef\u3001\u6570\u5b57\u663e\u793a\u683c\u5f0f\u4e0d\u6b63\u786e \u6216\u8005 \u6570\u5b57\u663e\u793a\u5f62\u5f0f\u4e0e\u672c\u5730\u4e60\u60ef\u4e0d\u7b26 \u7b49\u3002\u4e3a\u4e86\u5bfb\u6c42\u4e00\u79cd\u66f4\u7cbe\u51c6\u9ad8\u6548\u7684\u9002\u914d\u65b9\u6848\uff0c\u6211\u5728\u7f51\u4e0a\u67e5\u9605\u4e86\u76f8\u5173\u8d44\u6599\u3002\u53d1\u73b0Google\u63d0\u4f9b\u4e86\u4e00\u4e2a\u672c\u5730\u5316API\u63a5\u53e3\u2014\u2014ICU API\u3002\u5b83\u53ef\u4ee5\u5229\u7528ICU\u548cCLDR\u63d0\u4f9bUnicode\u548c\u5176\u4ed6\u56fd\u9645\u5316\u652f\u6301\u3002\u4ece\u800c\u63d0\u5347\u8f6f\u4ef6\u7684\u672c\u5730\u5316\u8d28\u91cf\u3002</p>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_2","title":"\u672c\u5730\u5316\u9002\u914d\u573a\u666f","text":"<p>\u672c\u5730\u5316\u9002\u914d\u6240\u6d89\u53ca\u5230\u7684\u95ee\u9898\uff0c\u57fa\u672c\u4e0a\u90fd\u53ef\u4ee5\u5f52\u7eb3\u4e3a\uff1a\u5728\u4e0d\u540c\u7684\u8bed\u8a00\u548c\u5730\u533a\uff0c\u540c\u4e00\u4e2a\u4fe1\u606f\u6240\u663e\u793a\u7ffb\u8bd1\u4e0d\u540c\u3001\u683c\u5f0f\u4e0d\u540c\u6216\u8005\u4e00\u4e2a\u4e8b\u7269\u8868\u73b0\u89c4\u5219\u4e0d\u540c\u3002\u901a\u8fc7\u5f52\u7eb3\u603b\u7ed3\uff0c\u6211\u4eec\u628a\u5e38\u89c1\u7684\u672c\u5730\u5316\u9002\u914d\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u7c7b\u578b\uff1a\u65f6\u95f4\u4fe1\u606f\u3001\u6570\u5b57\u4fe1\u606f\u3001\u6587\u4ef6\u5927\u5c0f\u53ca\u5176\u5355\u4f4d\u3001\u5386\u6cd5\u89c4\u5219\u3001\u6d4b\u91cf\u5355\u4f4d\u548c\u65f6\u533a\u4fe1\u606f\u3002</p>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_3","title":"\u672c\u5730\u5316\u63a5\u53e3\u4f7f\u7528","text":"<p>\u9488\u5bf9\u4ee5\u4e0a\u6240\u8ff0\u672c\u5730\u5316\u573a\u666f\uff0c\u6211\u4eec\u5206\u522b\u4ecb\u7ecd\u76f8\u5173\u63a5\u53e3\u4ee5\u53ca\u63a5\u53e3\u4f7f\u7528\u65b9\u6cd5\u3002</p> <p>\u5e38\u89c1\u683c\u5f0f\u5982\u65e5\u671f\u3001\u5355\u4f4d\u7b49\uff0c\u5728 <code>data/locales</code> \u76ee\u5f55\u4e2d\u6709\u8be6\u7ec6\u8bf4\u660e\u3002\uff0c\u6211\u4eec\u53ef\u4ee5\u4e0b\u8f7d data/locales/zh.txt \u6587\u4ef6\u67e5\u770b\u4e0d\u540c\u6807\u7b7e\u5bf9\u5e94\u5185\u5bb9\u542b\u4e49\u3002</p> <p>\u4f8b\u5982\u6211\u4eec\u8981\u67e5\u770b\u661f\u671f\u5728\u5404\u56fd\u7ffb\u8bd1\u4e0b\u7684\u5185\u5bb9\uff1a</p> <ul> <li>\u9996\u5148\u6211\u4eec\u5728 <code>data/locales/zh.txt</code> \u4e2d\u67e5\u627e\u661f\u671f\u4e00\u5bf9\u5e94\u6807\u7b7e <code>dayNames</code> \u4e0b\u9762\u3002\u5176\u4e2dwide\u8868\u793a\u5168\u79f0\uff0cshort\u8868\u793a\u7b80\u79f0\u3002</li> <li>\u6253\u5f00 <code>data/locales</code> \u5176\u5b83\u56fd\u5bb6\u5bf9\u5e94\u8bed\u8a00\u7801txt\u6587\u4ef6\u3002\u6bd4\u5982\u67e5\u770b\u6cd5\u8bed\u4e0b\u7ffb\u8bd1\u60c5\u51b5\u65f6\u6253\u5f00 <code>fr.txt</code> \u6587\u4ef6\u3002</li> <li>\u540c\u6837\u67e5\u627e <code>dayNames</code> \u6807\u7b7e\u5bf9\u5e94\u7ffb\u8bd1\uff0c\u5e76\u4e0e\u624b\u673a\u4e0a\u663e\u793a\u7ffb\u8bd1\u6bd4\u5bf9\u662f\u5426\u4e00\u81f4\u3002</li> </ul> <p>\u9664\u4e86 <code>data/locales</code> \u76ee\u5f55\u5916\u8fd8\u6709\u51e0\u4e2a\u76ee\u5f55\u9700\u8981\u5173\u6ce8\uff1a</p> <ul> <li>data/unit \u5e38\u7528\u5355\u4f4d</li> <li>data/curr \u8d27\u5e01\u5355\u4f4d</li> <li>data/lang \u8bed\u8a00\u63cf\u8ff0</li> </ul>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_4","title":"\u65f6\u95f4\u65e5\u671f\u683c\u5f0f","text":"<p>DateFormat#getInstanceForSkeleton \u3001SimpleDateFormat.getDateInstance</p> <p>\u8bf4\u660e\uff1a</p> <p>1.\u8fd9\u4e9b\u63a5\u53e3\u80fd\u591f\u89e3\u51b3x\u5e74x\u6708x\u65e5\u661f\u671fx x\u65f6x\u5206x\u79d2\u8fd9\u7c7b\u65f6\u95f4\u4fe1\u606f\u683c\u5f0f\u95ee\u9898\u3002\u6bd4\u5982\u5e74\u6708\u65e5\u51fa\u73b0\u5148\u540e\u987a\u5e8f\u4e0d\u540c\u60c5\u51b5\u3002\u8fd9\u4e2a\u683c\u5f0f\u4e0e\u672c\u5730\u4eba\u4f7f\u7528\u4e60\u60ef\u76f8\u5173\u3002</p> <p>\u597d\u7684\uff0c\u6211\u5df2\u7ecf\u8f93\u51fa\u4e86\u4f60\u7684\u6587\u7ae0\u7684\u524d\u534a\u90e8\u5206\uff0c\u4e0b\u9762\u662f\u540e\u534a\u90e8\u5206\uff1a</p> <p>\u56e0\u6b64\u4f7f\u7528\u8fd9\u4e2a\u63a5\u53e3\u80fd\u591f\u5f88\u597d\u5730\u89e3\u51b3\u65f6\u95f4\u663e\u793a\u683c\u5f0f\u95ee\u9898\u3002</p>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_5","title":"\u65f6\u95f4\u65e5\u671f\u683c\u5f0f","text":"<p>DateFormat#getInstanceForSkeleton \u3001SimpleDateFormat.getDateInstance</p> <p>\u8bf4\u660e\uff1a</p> <p>1.\u8fd9\u4e9b\u63a5\u53e3\u80fd\u591f\u89e3\u51b3 <code>x\u5e74x\u6708x\u65e5</code> \u3001<code>\u661f\u671fx</code> \u3001<code>x\u65f6x\u5206x\u79d2</code> \u8fd9\u7c7b\u65f6\u95f4\u4fe1\u606f\u683c\u5f0f\u95ee\u9898\u3002\u6bd4\u5982\u5e74\u6708\u65e5\u51fa\u73b0\u5148\u540e\u987a\u5e8f\u4e0d\u540c\u60c5\u51b5\uff0c\u8fd9\u4e2a\u683c\u5f0f\u4e0e\u672c\u5730\u4eba\u4f7f\u7528\u4e60\u60ef\u662f\u76f8\u5173\u7684\u3002\u56e0\u6b64\u4f7f\u7528\u8fd9\u4e2a\u63a5\u53e3\u80fd\u591f\u5f88\u597d\u5730\u89e3\u51b3\u65f6\u95f4\u663e\u793a\u683c\u5f0f\u95ee\u9898\u3002</p> <p>2.\u540c\u65f6\u8fd9\u4e2a\u63a5\u53e3 \u8fd8\u80fd\u89e3\u51b3\u65f6\u95f4\u8868\u8ff0\u4e2d\u7ffb\u8bd1\u95ee\u9898\uff0c\u4e0d\u7528\u518d\u5355\u72ec\u8003\u8651\u7ffb\u8bd1\u95ee\u9898\u3002 \u8fd9\u4e2a\u7ffb\u8bd1\u7684\u51c6\u786e\u5ea6\uff0c\u5f80\u5f80\u8981\u9ad8\u4e8e\u7ffb\u8bd1\u516c\u53f8\u7684\u51c6\u786e\u5ea6\u3002</p> <p>3.\u4f7f\u7528\u5176\u4e2d\u4e00\u4e9b\u7279\u6b8a\u63a5\u53e3\u80fd\u591f\u89e3\u51b3\u4e00\u4e9b\u7279\u6b8a\u5b57\u4e32\u7ffb\u8bd1\u95ee\u9898\u3002\u6bd4\u5982\u4f7f\u7528\u4ee5\u4e0b\u63a5\u53e3\u53ef\u4ee5\u83b7\u53d6 <code>\u661f\u671f\u4e00</code> \u3001 <code>\u4e8c\u6708</code> \u7b49\u76f8\u5173\u7279\u6b8a\u65f6\u95f4\u5728\u672c\u5730\u8bed\u8a00\u7ffb\u8bd1\u5b57\u7b26\u3002\u8fd9\u4e2a\u7ffb\u8bd1\u51c6\u786e\u5ea6\u5f80\u5f80\u9ad8\u4e8e\u7ffb\u8bd1\u516c\u53f8\u51c6\u786e\u5ea6\u3002\u5e0c\u671b\u6709\u7c7b\u4f3c\u5b57\u4e32\u663e\u793a\u573a\u666f\u53ef\u4ee5\u7814\u7a76\u8fd9\u4e2a\u63a5\u53e3\u5e76\u8fdb\u884c\u4f7f\u7528\u3002developer.android.com/reference/j\u2026</p> <p>\u4ee5\u4e0b\u53ea\u5c31\u8bf4\u660e\u8fdb\u884c\u4e00\u4e2a\u7b80\u5355\u4e3e\u4f8b\uff1a\u4e0b\u9762\u7684getDateInstance\u53ef\u4ee5\u4e0d\u4f20\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u90a3\u4e48\u5c31\u4f1a\u6839\u636e\u5f53\u524d\u7cfb\u7edf\u9884\u8bbe\u6765\u8f93\u51fa\u7ed3\u679c\u3002</p> <pre><code>DateFormat df = DateFormat.getDateInstance(DateFormat.LONG, Locale.FRANCE); myDate = df.parse(myString);\n... \nJanuary 12, 1952\n</code></pre> <p>\u5177\u4f53\u683c\u5f0f\u7531\u7b2c\u4e00\u4e2a\u53c2\u6570\u63a7\u5236\uff0c\u6a21\u5757\u53ef\u6839\u636e\u9700\u6c42\u81ea\u884c\u5b9a\u5236\uff0c\u7ed9\u51fa\u4ee5\u4e0b\u4f7f\u7528\u6848\u4f8b</p> <p><pre><code>DateFormat.getInstanceForSkeleton(DateFormat.ABBR_MONTH_DAY, Locale.getDefault()).format(new Date()); \n... \n3\u670816\u65e5 Mar 16 \n\nDateFormat.getInstanceForSkeleton(DateFormat.MONTH_WEEKDAY_DAY, Locale.getDefault()).format(new Date()); \n... \n3\u670816\u65e5\u661f\u671f\u56db Thursday,March 16 \n\nDateFormat.getInstanceForSkeleton(\"MMMEdd\", locale1).format(new Date()); \n... \n3\u670816\u65e5\u661f\u671f\u56db Thursday,Mar 16 \n\nDateFormat.getInstanceForSkeleton(DateFormat.YEAR_MONTH_DAY, Locale.getDefault()).format(new Date()); DateFormat.getInstanceForSkeleton(DateFormat.YEAR_MONTH_DAY, Locale.ENGLISH).format(new Date()); \n... \n2023\u5e743\u670816 March 16,2023 \n\nDateFormat.getInstanceForSkeleton(\"yyyyMMdd\", Locale.getDefault()).format(new Date()); \n... \n2023/03/16 03/16/2023 \n\nDateFormat.getInstanceForSkeleton(\"hhmma\", Locale.getDefault()).format(new Date()); \n...\n\u4e0b\u53487:51 7:51 PM \n\nSimpleDateFormat.getDateInstance(DateFormat.MEDIUM, Locale.getDefault()).format(new Date()); \n... \n2023\u5e7403\u670816\u65e5 Mar 16, 2023 \n\n// \u4f7f\u7528\u5de5\u5177\u7c7b \nDateUtils.formatDateTime(context, time, DateUtils.FORMAT_ABBREV_MONTH); DateUtils.formatDateTime(context, time, DateUtils.FORMAT_SHOW_YEAR);\n</code></pre> `</p>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_6","title":"\u65e5\u671f/\u65f6\u95f4\u533a\u95f4\uff1a","text":"<pre><code>DateInterval dateInterval = new DateInterval(time1, time2); DateIntervalFormat.getInstance(DateFormat.YEAR_ABBR_MONTH_DAY, Locale.getDefault()).format(dateInterval, new StringBuffer(\"\"), new FieldPosition(0)); ... \n2023\u5e743\u670816\u65e5\u81f37\u670816\u65e5 Mar 16 \u2013 Jul 16, 2023\n</code></pre>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_7","title":"\u6570\u5b57\u4fe1\u606f\u683c\u5f0f","text":"<p>NumberFormat#getInstance\u3001NumberFormat#getCurrencyInstance\u3001NumberFormat#getPercentInstance</p> <p>\u8bf4\u660e\uff1a</p> <p>1.\u8fd9\u4e9b\u63a5\u53e3\u80fd\u591f\u89e3\u51b3\u6570\u5b57\u4fe1\u606f\u683c\u5f0f\u95ee\u9898\u3002\u6bd4\u5982\u6570\u5b57\u663e\u793a\u5f62\u5f0f\u5e94\u8be5\u662f\u672c\u5730\u5b57\u6bcd\u800c\u4e0d\u662f\u963f\u62c9\u4f2f\u6570\u5b57\u3001\u5c0f\u6570\u70b9\u548c\u5343\u5206\u4f4d\u7b26\u53f7\u4f4d\u7f6e\u4e0d\u540c\u7b49\u3002 2.\u540c\u65f6\u8fd9\u4e9b\u63a5\u53e3\u8fd8\u80fd\u89e3\u51b3\u8d27\u5e01\u5355\u4f4d\u548c\u767e\u5206\u6bd4\u7b26\u53f7\u7684\u672c\u5730\u5316\u663e\u793a\u95ee\u9898\u3002 3.\u4f7f\u7528\u5176\u4e2d\u4e00\u4e9b\u7279\u6b8a\u63a5\u53e3\u8fd8\u80fd\u89e3\u51b3\u4e00\u4e9b\u7279\u6b8a\u6570\u5b57\u4fe1\u606f\u7684\u672c\u5730\u5316\u663e\u793a\u95ee\u9898\u3002\u6bd4\u5982\u4f7f\u7528\u4ee5\u4e0b\u63a5\u53e3\u53ef\u4ee5\u83b7\u53d6\u672c\u5730\u8bed\u8a00\u5bf9\u5e94\u7684\u5e8f\u6570\u8bcd\uff08\u7b2c\u4e00\u3001\u7b2c\u4e8c\u7b49\uff09\u6216\u8005\u5e8f\u5217\u53f7\uff081st\u30012nd\u7b49\uff09\u3002</p> <p>\u4ee5\u4e0b\u53ea\u5c31\u8bf4\u660e\u8fdb\u884c\u4e00\u4e2a\u7b80\u5355\u4e3e\u4f8b\uff1a\u4e0b\u9762\u7684getInstance\u53ef\u4ee5\u4e0d\u4f20\u53c2\u6570\uff0c\u90a3\u4e48\u5c31\u4f1a\u6839\u636e\u5f53\u524d\u7cfb\u7edf\u9884\u8bbe\u6765\u8f93\u51fa\u7ed3\u679c\u3002</p> <pre><code>NumberFormat nf = NumberFormat.getInstance(Locale.FRENCH); \nmyNumber = nf.parse(myString);\n</code></pre> <p>\u8f93\u51fa\u5f53\u5730\u4e60\u60ef\u663e\u793a\u7684\u6570\u5b57\u683c\u5f0f\uff0c\u6216\u8005\u5f53\u5730\u6587\u5b57</p> <pre><code>NumberFormat.getInstance(Locale.getDefault()).format(100001.23); \n... \n100,000.89 100,000.89 \n\nDecimalFormat.getPercentInstance(Locale.getDefault()).format(0.53); \n...\n53% 53% \n\nCompactDecimalFormat.getInstance(locale, CompactDecimalFormat.CompactStyle.SHORT).format(100000); \n... \n10\u4e07 100K\n</code></pre>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_8","title":"\u6587\u4ef6\u5927\u5c0f\u53ca\u5176\u5355\u4f4d\u683c\u5f0f","text":"<p>FileSizeUtils#formatFileSize(Context context,long numberBytes)</p> <p>\u8bf4\u660e\uff1a</p> <p>1.\u8fd9\u4e2a\u63a5\u53e3\u80fd\u591f\u89e3\u51b3\u6587\u4ef6\u5927\u5c0f\u53ca\u5176\u5355\u4f4d\u683c\u5f0f\u95ee\u9898\u3002\u6bd4\u5982\u6587\u4ef6\u5927\u5c0f\u663e\u793a\u5f62\u5f0f\u5e94\u8be5\u662fKB\u800c\u4e0d\u662fkB\u3001\u5355\u4f4d\u4e4b\u95f4\u662f\u5426\u6709\u7a7a\u683c\u7b49\u3002 2.\u540c\u65f6\u8fd9\u4e2a\u63a5\u53e3\u8fd8\u80fd\u6839\u636e\u5f53\u524d\u7cfb\u7edf\u9884\u8bbe\u81ea\u52a8\u9009\u62e9\u5408\u9002\u7684\u5355\u4f4d\u548c\u7cbe\u5ea6\u6765\u663e\u793a\u6587\u4ef6\u5927\u5c0f\u3002</p> <p>\u7ed9\u51fa\u4e00\u4e2a\u7b80\u5355\u4e3e\u4f8b\uff1a</p> <p><code>public static String formatFileSize(Context context, long sizeBytes);</code> </p> <p>\u5c06\u5185\u5bb9\u5927\u5c0f\u683c\u5f0f\u5316\u4e3a\u5b57\u8282\u3001\u5343\u5b57\u8282\u3001\u5146\u5b57\u8282\u7b49\u5f62\u5f0f\u3002 \u663e\u793a\u7684\u6570\u5b57\uff0c\u4f1a\u6839\u636e\u5f53\u5730\u4e60\u60ef\uff0c\u7528\u9017\u53f7\u5206\u5f00\uff0c\u6216\u8005\u7528\u70b9\u53f7\u9694\u5f00\uff0c\u6216\u8005\u6570\u5b57\u7528\u5f53\u5730\u5b57\u6bcd\u663e\u793a\u3002 \u6587\u4ef6\u5927\u5c0f\u7684\u5355\u4f4d\uff0c\u4e5f\u4f1a\u6839\u636e\u5f53\u5730\u4e60\u60ef\u663e\u793a\u4e3aMb\u6216\u8005MB\u7b49\u4e0d\u540c\u5f62\u5f0f\u3002</p> <p>developer.android.com/reference/a\u2026</p> <p>Android O\u5f00\u59cb\u4f7f\u7528\u6807\u51c6\u7684\u5355\u4f4d\u5236 1KB = 1000 bytes</p> <pre><code>Formatter.formatFileSize(this, 15345); \n... \n//15.35 KB \n//\u4e4c\u514b\u5170\u8bed 15,61 \u041a\u0411 \n\nFormatter.formatShortFileSize(this, 15612524); \n... \n16 MB\n16 MB \n16 \u041a\u0411\n</code></pre>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_9","title":"\u6d4b\u91cf\u5355\u4f4d","text":"<p>MeasureFormat</p> <p>\u5728\u9700\u8981\u663e\u793a\u6d4b\u91cf\u5355\u4f4d\u7684\u573a\u666f\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u63a5\u53e3\u505a\u597d\u672c\u5730\u5316\u4fe1\u606f\u5c55\u793a\u3002\u4ee5\u4e0b\u7b80\u5355\u4ecb\u7ecd\u6beb\u5347\u7684\u663e\u793a\u3002\u540c\u6837\u7684\uff0c\u5176\u4ed6\u6d4b\u91cf\u5355\u4f4d\uff0c\u90fd\u53ef\u4ee5\u91c7\u7528\u7c7b\u4f3c\u7684\u65b9\u5f0f\u83b7\u53d6\uff0c \u53ea\u662f\u628a\u53c2\u6570\u66ff\u6362\u4e00\u4e0b\u5373\u53ef\u3002</p> <p>\u8bf4\u660e\uff1a \u5bf9\u4e8e\u957f\u5ea6\uff0c\u8d28\u91cf\uff0c\u4f53\u79ef\uff0c\u8d27\u5e01\u3001\u5361\u8def\u91cc\u3001ml\u7b49\u6d4b\u91cf\u5355\u4f4d\u7684\u672c\u5730\u5316\u663e\u793a\u3002\u76ee\u524d\u57fa\u672c\u90fd\u57fa\u4e8e\u7ffb\u8bd1\u62fc\u63a5\u6765\u5b8c\u6210\u3002\u540e\u9762\u5efa\u8bae\u4f7f\u7528google\u5b98\u65b9\u63a5\u53e3\u6765\u5b9e\u73b0\u3002 1.\u6570\u5b57+\u5355\u4f4d</p> <p>\u652f\u6301\u7684\u6d4b\u91cf\u5355\u4f4d\u53ef\u53c2\u8003developer.android.google.cn/reference/a\u2026 \uff0c\u8c03\u6574\u4f20\u53c2\u5373\u53ef</p> <pre><code>Measure measure = new Measure(30.5, MeasureUnit.CELSIUS); MeasureFormat.getInstance(Locale.getDefault(),MeasureFormat.FormatWidth.SHORT).format(measure); \n... \n30.5\u00b0C 30.5\u00b0C \n\nMeasure measure = new Measure(30.5, MeasureUnit.HOUR); MeasureFormat.getInstance(Locale.getDefault(),MeasureFormat.FormatWidth.SHORT).format(measure);\n... \n30.5\u5c0f\u65f6 30.5hr \n\nMeasure measure = new Measure(224, MeasureUnit.GIGABYTE); MeasureFormat.getInstance(Locale.getDefault(),MeasureFormat.FormatWidth.SHORT).format(measure); \n... \n**224\u5409\u5b57\u8282****\u6570\u5b57\u5355\u4f4d\u5e38\u91cf\u4e2d\u6587\u4e0e\u9884\u671f\u4e0d\u7b26\uff0c\u53ef\u80fd\u9700\u8981\u5355\u72ec\u5904\u7406** \n224GB\n</code></pre> <p>\u9488\u5bf9\u90e8\u5206\u573a\u666f\uff0c\u9700\u8981\u533a\u5206\u6570\u5b57\u548c\u5355\u4f4d\u5927\u5c0f\uff0c\u53ef\u4ee5\u7ed3\u5408MeasureFormat\u548cNumberFormat\uff0c\u5206\u522b\u62ff\u5230\u5b8c\u6574\u5b57\u7b26\u4e32\u548c\u6570\u5b57\u90e8\u5206\u5b57\u7b26\u4e32\uff0c\u8ba1\u7b97index\u540e\u8bbe\u7f6e\u6837\u5f0f\u5373\u53ef\uff08\u6ce8\u610f\uff1a\u4e0d\u8981\u62c6\u5206\u6210\u4e24\u4e2a\u5b57\u7b26\u4e32\u5206\u522b\u5e03\u5c40\uff09</p> <pre><code>NumberFormat instance = NumberFormat.getInstance(Locale.getDefault()); \nString celsius = MeasureFormat.getInstance(Locale.getDefault(), MeasureFormat.FormatWidth.SHORT, instance).formatMeasures(measure); \nString number = instance.format(30.5); SpannableString spannableString = new SpannableString(celsius); \nspannableString.setSpan(new AbsoluteSizeSpan(30, true), celsius.indexOf(number), celsius.indexOf(number) + number.length(), 0); \ntextView.setText(spannableString);\n</code></pre>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#_10","title":"\u65e5\u671f\u683c\u5f0f\u7b26\u53f7","text":"<p>\u8bf4\u660e\uff1a\u83b7\u53d6\u661f\u671f\u3001\u6708\u4efd\u5217\u8868\u7b49\uff0c\u652f\u6301\u83b7\u53d6format\u5f62\u5f0f\u548cstandalone\u5f62\u5f0f\uff0cwide\u3001narrow\u3001short</p> <pre><code>DateFormatSymbols dateFormatSymbols = new DateFormatSymbols(Locale.getDefault); dateFormatSymbols.getWeekdays(); dateFormatSymbols.getWeekdays(DateFormatSymbols.STANDALONE,DateFormatSymbols.WIDE); dateFormatSymbols.getMonths();\n</code></pre> <p>\u63a5\u53e3\u8bb0\u5f55\uff1a</p> <p>1\u3001TextUtils#expandTemplate developer.android.google.cn/reference/k\u2026</p> <pre><code>// string.xml \n&lt;string name=\"storage_size_large_alternate\"&gt;&lt;xliff:g id=\"number\" example=\"128\"&gt;^1&lt;/xliff:g&gt; &lt;font size=\"15\"&gt;&lt;xliff:g id=\"unit\" example=\"KB\"&gt;^2&lt;/xliff:g&gt;&lt;/font&gt;&lt;/string&gt; \nTextUtils.expandTemplate(getText(R.string.storage_size_large_alternate), \"128\", \"GB\");\n</code></pre>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/Android%E6%9C%AC%E5%9C%B0%E5%8C%96%E9%80%82%E9%85%8D%E4%B9%8BICU%E6%8E%A5%E5%8F%A3/#faq","title":"\u5e38\u89c1\u95ee\u9898FAQ","text":"<p>iculocal</p>","tags":["ICU","\u591a\u8bed\u8a00"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/","title":"StateMachine","text":"<p>[!NOTE] \u7b80\u4ecb <code>StateMachine</code>\u4e0d\u662f<code>Android SDK</code>\u4e2d\u7684\u76f8\u5173API\uff0c\u662f\u5b58\u5728\u4e8e<code>frameworks</code>\u5c42\u6e90\u7801\u4e2d\u7684\u4e00\u4e2aJava\u7c7b\u3002\u901a\u8fc7\u8fd9\u7bc7\u6587\u7ae0\u63a2\u7a76\u4e00\u4e0b\u5176\u4f7f\u7528\u65b9\u5f0f\u4ee5\u53ca\u5b9e\u73b0\u539f\u7406\u3002</p> <p>\u5de5\u4f5c\u4e2d\u6709\u4e00\u540c\u4e8b\u8bf4\u5230Android\u72b6\u6001\u673a<code>StateMachine</code>\u3002\u4f5c\u4e3a\u4e00\u540dAndroid\u8d44\u6df1\u5de5\u7a0b\u5e08\uff0c\u6211\u5c45\u7136\u6ca1\u6709\u542c\u8bf4\u8fc7<code>StateMachine</code>\uff0c\u56e0\u6b64\u6293\u7d27\u65f6\u95f4\u5b66\u4e60\u4e00\u4e0b\u3002 <code>StateMachine</code>\u4e0d\u662f<code>Android SDK</code>\u4e2d\u7684\u76f8\u5173API\uff0c\u5176\u5b58\u5728\u4e8e<code>frameworks</code>\u5c42\u6e90\u7801\u4e2d\u7684\u4e00\u4e2aJava\u7c7b\u3002\u53ef\u80fd\u56e0\u4e3a\u5982\u6b64\uff0c\u8bb8\u591a\u5e94\u7528\u5c42\u7684\u5f00\u53d1\u4eba\u5458\u5e76\u672a\u4f7f\u7528\u8fc7\u3002 \u56e0\u6b64\u8fd9\u91cc\u6211\u4eec\u5148\u8bf4\u4e00\u4e0b<code>StateMachine</code>\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u7136\u540e\u518d\u5bf9\u6e90\u7801\u8fdb\u884c\u76f8\u5173\u4ecb\u7ecd\u3002</p> <ul> <li>StateMachine\u4f7f\u7528\u4e3e\u4f8b</li> <li>StateMachine\u539f\u7406\u5b66\u4e60</li> </ul>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#_1","title":"\u4e00\u3001\u4f7f\u7528\u4e3e\u4f8b","text":"<p>StateMachine \u5904\u4e8eAndroid\u00a0<code>frameworks</code>\u5c42\u6e90\u7801<code>frameworks/base/core/java/com/android/internal/util</code>\u8def\u5f84\u4e0b\u3002\u5e94\u7528\u5c42\u82e5\u8981\u4f7f\u7528<code>StateMachine</code>\u9700\u5c06\u5bf9\u5e94\u8def\u5f84\u4e0b\u7684\u4e09\u4e2a\u7c7b\u62f7\u8d1d\u5230\u81ea\u5df1\u7684\u5de5\u7a0b\u76ee\u5f55\u4e0b\u3002 \u8fd9\u4e09\u4e2a\u7c7b\u5206\u522b\u4e3a\uff1a<code>StateMachine.java</code>\u3001<code>State</code>\u3001<code>IState</code></p> <p>\u4e0b\u8fb9\u662f\u4f7f\u7528\u7684\u4ee3\u7801\u4e3e\u4f8b\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u6211\u4e5f\u662f\u7f51\u7edc\u4e0a\u627e\u7684\uff08\u8bfb\u61c2StateMachine\u6e90\u7801\u540e\uff0c\u6211\u5bf9\u8fd9\u4e2a\u4f8b\u5b50\u8fdb\u884c\u4e86\u4e00\u4e9b\u7b80\u5355\u66f4\u6539\uff0c\u4ee5\u4e0b\u4e3a\u66f4\u6539\u540e\u7684\u6848\u4f8b\uff09\uff1a</p> <p>\u4e3b\u8981\u5206\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\u6765\u8bf4\u660e\uff1a</p> <ul> <li>PersonStateMachine.java\u6848\u4f8b\u4ee3\u7801</li> <li>PersonStateMachine \u4f7f\u7528</li> <li>\u6848\u4f8b\u7684\u7b80\u5355\u8bf4\u660e</li> <li>\u6848\u4f8b\u6e90\u7801\u4e0b\u8f7d</li> </ul>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#11-personstatemachine","title":"1.1 PersonStateMachine","text":"<p>\u521b\u5efa<code>PersonStateMachine</code>\u7ee7\u627f<code>StateMachine</code>\u7c7b\u3002 \u521b\u5efa\u56db\u79cd\u72b6\u6001\uff0c\u56db\u79cd\u72b6\u6001\u5747\u7ee7\u627f\u81ea<code>State</code>\uff1a</p> <ul> <li>\u9ed8\u8ba4\u72b6\u6001 BoringState</li> <li>\u5de5\u4f5c\u72b6\u6001 WorkState</li> <li>\u5403\u996d\u72b6\u6001 EatState</li> <li>\u7761\u89c9\u72b6\u6001 SleepState</li> </ul> <p>\u5b9a\u4e49\u4e86\u72b6\u6001\u8f6c\u6362\u7684\u56db\u79cd\u6d88\u606f\u7c7b\u578b\uff1a</p> <ul> <li>\u5524\u9192\u6d88\u606f MSG_WAKEUP</li> <li>\u56f0\u4e4f\u6d88\u606f MSG_TIRED</li> <li>\u997f\u4e86\u6d88\u606f MSG_HUNGRY</li> <li>\u72b6\u6001\u673a\u505c\u6b62\u6d88\u606f MSG_HALTING</li> </ul> <p>\u4e0b\u9762\u6765\u770b\u5b8c\u6574\u7684\u6848\u4f8b\u4ee3\u7801\uff1a <pre><code>public class PersonStateMachine extends StateMachine {\n\n    private static final String TAG = \"MachineTest\";\n\n    //\u8bbe\u7f6e\u72b6\u6001\u6539\u53d8\u6807\u5fd7\u5e38\u91cf\n    public static final int MSG_WAKEUP = 1; // \u6d88\u606f\uff1a\u9192\n    public static final int MSG_TIRED = 2; // \u6d88\u606f\uff1a\u56f0\n    public static final int MSG_HUNGRY = 3; // \u6d88\u606f\uff1a\u997f\n    private static final int MSG_HALTING = 4; // \u72b6\u6001\u673a\u6682\u505c\u6d88\u606f\n\n    //\u521b\u5efa\u72b6\u6001\n    private State mBoringState = new BoringState();// \u9ed8\u8ba4\u72b6\u6001\n    private State mWorkState = new WorkState(); // \u5de5\u4f5c\n    private State mEatState = new EatState(); // \u5403\n    private State mSleepState = new SleepState(); // \u7761\n\n    /**\n     * \u6784\u9020\u65b9\u6cd5\n     *\n     * @param name\n     */\n    PersonStateMachine(String name) {\n        super(name);\n        //\u52a0\u5165\u72b6\u6001\uff0c\u521d\u59cb\u5316\u72b6\u6001\n        addState(mBoringState, null);\n        addState(mSleepState, mBoringState);\n        addState(mWorkState, mBoringState);\n        addState(mEatState, mBoringState);\n\n        // sleep\u72b6\u6001\u4e3a\u521d\u59cb\u72b6\u6001\n        setInitialState(mSleepState);\n    }\n\n    /**\n     * @return \u521b\u5efa\u542f\u52a8person \u72b6\u6001\u673a\n     */\n    public static PersonStateMachine makePerson() {\n        PersonStateMachine person = new PersonStateMachine(\"Person\");\n        person.start();\n        return person;\n    }\n\n\n    @Override\n    protected void onHalting() {\n        synchronized (this) {\n            this.notifyAll();\n        }\n    }\n\n\n    /**\n     * \u5b9a\u4e49\u72b6\u6001:\u65e0\u804a\n     */\n    class BoringState extends State {\n        @Override\n        public void enter() {\n            Log.e(TAG, \"############ enter Boring ############\");\n        }\n\n        @Override\n        public void exit() {\n            Log.e(TAG, \"############ exit Boring ############\");\n        }\n\n        @Override\n        public boolean processMessage(Message msg) {\n            Log.e(TAG, \"BoringState  processMessage.....\");\n            return true;\n        }\n    }\n\n    /**\n     * \u5b9a\u4e49\u72b6\u6001:\u7761\u89c9\n     */\n    class SleepState extends State {\n        @Override\n        public void enter() {\n            Log.e(TAG, \"############ enter Sleep ############\");\n        }\n\n        @Override\n        public void exit() {\n            Log.e(TAG, \"############ exit Sleep ############\");\n        }\n\n        @Override\n        public boolean processMessage(Message msg) {\n            Log.e(TAG, \"SleepState  processMessage.....\");\n            switch (msg.what) {\n                // \u6536\u5230\u6e05\u9192\u4fe1\u53f7\n                case MSG_WAKEUP:\n                    Log.e(TAG, \"SleepState  MSG_WAKEUP\");\n                    // \u8fdb\u5165\u5de5\u4f5c\u72b6\u6001\n                    transitionTo(mWorkState);\n                    //...\n                    //...\n                    //\u53d1\u9001\u997f\u4e86\u4fe1\u53f7...\n                    sendMessage(obtainMessage(MSG_HUNGRY));\n                    break;\n                case MSG_HALTING:\n                    Log.e(TAG, \"SleepState  MSG_HALTING\");\n\n                    // \u8f6c\u5316\u5230\u6682\u505c\u72b6\u6001\n                    transitionToHaltingState();\n                    break;\n                default:\n                    return false;\n            }\n            return true;\n        }\n    }\n\n\n    /**\n     * \u5b9a\u4e49\u72b6\u6001:\u5de5\u4f5c\n     */\n    class WorkState extends State {\n        @Override\n        public void enter() {\n            Log.e(TAG, \"############ enter Work ############\");\n        }\n\n        @Override\n        public void exit() {\n            Log.e(TAG, \"############ exit Work ############\");\n        }\n\n        @Override\n        public boolean processMessage(Message msg) {\n            Log.e(TAG, \"WorkState  processMessage.....\");\n            switch (msg.what) {\n                // \u6536\u5230 \u997f\u4e86 \u4fe1\u53f7\n                case MSG_HUNGRY:\n                    Log.e(TAG, \"WorkState  MSG_HUNGRY\");\n                    // \u5403\u996d\u72b6\u6001\n                    transitionTo(mEatState);\n                    //...\n                    //...\n                    // \u53d1\u9001\u7d2f\u4e86\u4fe1\u53f7...\n                    sendMessage(obtainMessage(MSG_TIRED));\n                    break;\n                default:\n                    return false;\n            }\n            return true;\n        }\n    }\n\n    /**\n     * \u5b9a\u4e49\u72b6\u6001:\u5403\n     */\n    class EatState extends State {\n        @Override\n        public void enter() {\n            Log.e(TAG, \"############ enter Eat ############\");\n        }\n\n        @Override\n        public void exit() {\n            Log.e(TAG, \"############ exit Eat ############\");\n        }\n\n        @Override\n        public boolean processMessage(Message msg) {\n            Log.e(TAG, \"EatState  processMessage.....\");\n            switch (msg.what) {\n                // \u6536\u5230 \u56f0\u4e86 \u4fe1\u53f7\n                case MSG_TIRED:\n                    Log.e(TAG, \"EatState  MSG_TIRED\");\n                    // \u7761\u89c9\n                    transitionTo(mSleepState);\n                    //...\n                    //...\n                    // \u53d1\u51fa\u7ed3\u675f\u4fe1\u53f7...\n                    sendMessage(obtainMessage(MSG_HALTING));\n                    break;\n                default:\n                    return false;\n            }\n            return true;\n        }\n\n    }\n}\n</code></pre></p>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#12-personstatemachine","title":"1.2 PersonStateMachine \u4f7f\u7528","text":"<pre><code>// \u83b7\u53d6 \u72b6\u6001\u673a\u5f15\u7528\nPersonStateMachine personStateMachine = PersonStateMachine.makePerson();\n// \u521d\u59cb\u72b6\u6001\u4e3aSleepState\uff0c\u53d1\u9001\u6d88\u606fMSG_WAKEUP\npersonStateMachine.sendMessage(PersonStateMachine.MSG_WAKEUP);\n</code></pre> <ul> <li><code>SleepState</code>\u72b6\u6001\u6536\u5230<code>MSG_WAKEUP</code>\u6d88\u606f\u540e\uff0c\u4f1a\u6267\u884c\u5bf9\u5e94\u72b6\u6001\u7684<code>processMessage</code>\u65b9\u6cd5</li> <li><code>SleepState</code>\u7c7b\u4e2d<code>processMessage</code>\u65b9\u6cd5\u6536\u5230<code>MSG_WAKEUP</code>\u6d88\u606f\u540e\uff0c\u6267\u884c<code>transitionTo(mWorkState)</code>\u65b9\u6cd5\uff0c\u5b8c\u6210\u72b6\u6001\u8f6c\u6362\u3002\u8f6c\u6362\u5230<code>WorkState</code>\u72b6\u6001\u3002</li> </ul>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#13","title":"1.3 \u6848\u4f8b\u7b80\u5355\u8bf4\u660e","text":"<p>\u51e0\u79cd\u72b6\u6001\u7684\u4f9d\u8d56\u5173\u7cfb\u5982\u4e0b\uff1a </p> <p>\u6784\u9020\u65b9\u6cd5\u4e2d\uff0c\u6dfb\u52a0\u6240\u6709\u72b6\u6001\uff0c\u5e76\u8bbe\u7f6e\u521d\u59cb\u72b6\u6001\uff1a</p> <pre><code>PersonStateMachine(String name) {\n    super(name);\n    //\u52a0\u5165\u72b6\u6001\uff0c\u521d\u59cb\u5316\u72b6\u6001\n    addState(mBoringState, null);\n    addState(mSleepState, mBoringState);\n    addState(mWorkState, mBoringState);\n    addState(mEatState, mBoringState);\n\n    // sleep\u72b6\u6001\u4e3a\u521d\u59cb\u72b6\u6001\n    setInitialState(mSleepState);\n}\n</code></pre> <p>\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\uff0c\u521b\u5efa\u5e76\u542f\u52a8\u72b6\u6001\u673a\uff1a</p> <pre><code>public static PersonStateMachine makePerson() {\n    PersonStateMachine person = new PersonStateMachine(\"Person\");\n    person.start();\n    return person;\n}\n</code></pre>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#14","title":"1.4 \u6848\u4f8b\u6e90\u7801\u4e0b\u8f7d","text":"<p>Android_StateMachine\u6848\u4f8b\u5730\u5740</p>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#_2","title":"\u4e8c\u3001\u5b9e\u73b0\u539f\u7406","text":"<p>\u5728\u00a0<code>StateMachine</code>\u4e2d\uff0c\u5f00\u542f\u4e86\u4e00\u4e2a\u7ebf\u7a0b<code>HandlerThread</code>\uff0c\u5176\u5bf9\u5e94\u7684Handler\u4e3a<code>SmHandler</code>\u3002\u56e0\u6b64\u4e0a\u6587\u6848\u4f8b\u4e2d\u5bf9\u5e94\u72b6\u6001\u7684\u00a0<code>processMessage(Message msg)</code>\u65b9\u6cd5\uff0c\u5747\u5728<code>HandlerThread</code>\u7ebf\u7a0b\u4e2d\u6267\u884c\u3002</p>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#21-statemachine","title":"2.1 \u4ece<code>StateMachine</code>\u7684\u6784\u9020\u65b9\u6cd5\u8bf4\u8d77\uff1a","text":"<pre><code>protected StateMachine(String name) {\n    // \u521b\u5efa HandlerThread\n    mSmThread = new HandlerThread(name);\n    mSmThread.start();\n    // \u83b7\u53d6HandlerThread\u5bf9\u5e94\u7684Looper\n    Looper looper = mSmThread.getLooper();\n    // \u521d\u59cb\u5316 StateMachine\n    initStateMachine(name, looper);\n}\n</code></pre> <ul> <li><code>StateMachine</code>\u7684\u6784\u9020\u65b9\u6cd5\u4e2d\uff0c\u521b\u5efa\u5e76\u542f\u52a8\u4e86\u4e00\u4e2a\u7ebf\u7a0b<code>HandlerThread</code>\uff1b</li> <li><code>initStateMachine</code>\u65b9\u6cd5\u4e2d\uff0c\u521b\u5efa\u4e86<code>HandlerThread</code>\u7ebf\u7a0b\u5bf9\u5e94\u7684Handler\u00a0<code>SmHandler</code></li> </ul> <pre><code>private void initStateMachine(String name, Looper looper) {\n    mName = name;\n    mSmHandler = new SmHandler(looper, this);\n}\n</code></pre> <ul> <li><code>SmHandler</code>\u6784\u9020\u65b9\u6cd5\u4e2d\uff0c\u5411\u72b6\u6001\u673a\u4e2d\u6dfb\u52a0\u4e86\u4e24\u4e2a\u72b6\u6001\uff1a\u4e00\u4e2a\u72b6\u6001\u4e3a\u72b6\u6001\u673a\u7684<code>\u6682\u505c\u72b6\u6001mHaltingState</code>\u3001\u4e00\u4e2a\u72b6\u6001\u4e3a\u72b6\u6001\u673a\u7684<code>\u9000\u51fa\u72b6\u6001mQuittingState</code></li> </ul> <pre><code>private SmHandler(Looper looper, StateMachine sm) {\n    super(looper);\n    mSm = sm;\n\n    // \u6dfb\u52a0\u72b6\u6001\uff1a\u6682\u505c \u548c \u9000\u51fa\n    // \u8fd9\u4e24\u4e2a\u72b6\u6001 \u65e0\u7236\u72b6\u6001\n    addState(mHaltingState, null);\n    addState(mQuittingState, null);\n}\n</code></pre> <ul> <li><code>mHaltingState</code>\u72b6\u6001\uff0c\u987e\u540d\u601d\u4e49\u8ba9\u72b6\u6001\u673a\u6682\u505c\uff0c\u5176\u5bf9\u5e94\u7684<code>processMessage(Message msg)</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u503c\u4e3atrue\uff0c\u5c06\u6d88\u606f\u6d88\u8d39\u6389\uff0c\u4f46\u4e0d\u5904\u7406\u6d88\u606f\u3002\u4ece\u800c\u4f7f\u72b6\u6001\u673a\u72b6\u6001\u505c\u987f\u5230<code>mHaltingState</code>\u72b6\u6001</li> <li><code>mQuittingState</code>\u72b6\u6001\uff0c\u82e5\u8fdb\u5165\u8be5\u72b6\u6001\uff0c \u72b6\u6001\u673a\u5c06\u9000\u51fa\u3002<code>HandlerThread</code>\u7ebf\u7a0b\u5bf9\u5e94\u7684Looper\u5c06\u9000\u51fa\uff0c<code>HandlerThread</code>\u7ebf\u7a0b\u4f1a\u88ab\u9500\u6bc1\uff0c\u6240\u6709\u52a0\u5165\u5230\u72b6\u6001\u673a\u7684\u72b6\u6001\u88ab\u6e05\u7a7a\u3002</li> </ul>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#22-start","title":"2.2 \u72b6\u6001\u673a\u7684start() \u65b9\u6cd5","text":"<p>\u72b6\u6001\u673a\u7684\u521d\u59cb\u5316\u8bf4\u5b8c\uff0c\u4e0b\u8fb9\u6765\u8bf4\u72b6\u6001\u673a\u7684\u542f\u52a8\u65b9\u6cd5<code>start()</code></p> <pre><code>public void start() {\n    // mSmHandler can be null if the state machine has quit.\n    SmHandler smh = mSmHandler;\n    // StateMachine \u672a\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\n    if (smh == null) {\n        return;\n    }\n    // \u5b8c\u6210\u72b6\u6001\u673a\u5efa\u8bbe\n   smh.completeConstruction();\n}\n</code></pre> <ul> <li>\u4ece\u4ee5\u4e0a\u4ee3\u7801\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u4e2d\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5<code>completeConstruction()</code>\uff0c\u7528\u4e8e\u5b8c\u6210\u72b6\u6001\u673a\u7684\u5efa\u8bbe\u3002</li> </ul> <pre><code>private final void completeConstruction() {\n    int maxDepth = 0;\n    // \u5faa\u73af\u5224\u65ad\u6240\u6709\u72b6\u6001\uff0c\u770b\u770b\u54ea\u4e00\u4e2a\u94fe\u6700\u957f\uff0c\u5f97\u51fa\u6df1\u5ea6\n    for (StateInfo si : mStateInfoHashMap.values()) {\n        int depth = 0;\n        for (StateInfo i = si; i != null; depth++) {\n            i = i.parentStateInfo;\n        }\n        if (maxDepth &lt; depth) {\n            maxDepth = depth;\n        }\n    }\n    // \u72b6\u6001\u5806\u6808\n    mStateStack = new StateInfo[maxDepth];\n    // \u4e34\u65f6\u72b6\u6001\u5806\u6808\n    mTempStateStack = new StateInfo[maxDepth];\n    // \u521d\u59cb\u5316\u5806\u6808\n    setupInitialStateStack();\n\n    // \u53d1\u9001\u521d\u59cb\u5316\u5b8c\u6210\u7684\u6d88\u606f\uff08\u6d88\u606f\u653e\u5165\u5230\u961f\u5217\u7684\u6700\u524d\u8fb9\uff09\n    sendMessageAtFrontOfQueue(obtainMessage(SM_INIT_CMD, mSmHandlerObj));\n}\n</code></pre> <ul> <li><code>maxDepth</code>\u662f\u72b6\u6001\u673a\u4e2d\uff0c\u6700\u957f\u4f9d\u8d56\u94fe\u7684\u957f\u5ea6\u3002</li> <li><code>mStateStack</code>\u4e0e<code>mTempStateStack</code>\u4e3a\u4e24\u4e2a\u7528\u6570\u7ec4\u5b9e\u73b0\u7684\u5806\u6808\u3002\u8fd9\u4e24\u4e2a\u5806\u6808\u7684\u6700\u5927\u957f\u5ea6\uff0c\u5373\u4e3a<code>maxDepth</code>\u3002\u5176\u7528\u6765\u5b58\u50a8<code>\u5f53\u524d\u6d3b\u8dc3\u72b6\u6001</code>\u4e0e<code>\u5f53\u524d\u6d3b\u8dc3\u72b6\u6001\u7684\u7236\u72b6\u6001\u3001\u7236\u7236\u72b6\u6001\u3001...\u7b49</code></li> <li><code>setupInitialStateStack();</code>\u5b8c\u6210\u72b6\u6001\u7684\u521d\u59cb\u5316\uff0c\u5c06\u5f53\u524d\u7684\u6d3b\u8dc3\u72b6\u6001\u653e\u5165\u5230<code>mStateStack</code>\u5806\u6808\u4e2d\u3002</li> </ul> <p>\u4e0b\u8fb9\u6765\u5177\u4f53\u8bf4<code>setupInitialStateStack();</code>\u65b9\u6cd5\u4e2d\uff0c\u5982\u4f55\u5b8c\u6210\u6808\u7684\u521d\u59cb\u5316\u3002</p> <pre><code>private final void setupInitialStateStack() {\n    // \u83b7\u53d6\u521d\u59cb\u72b6\u6001\u4fe1\u606f\n    StateInfo curStateInfo = mStateInfoHashMap.get(mInitialState);\n    //\n    for (mTempStateStackCount = 0; curStateInfo != null; mTempStateStackCount++) {\n        // \u521d\u59cb\u72b6\u6001 \u653e\u5165\u4e34\u65f6\u5806\u6808\n        mTempStateStack[mTempStateStackCount] = curStateInfo;\n        // \u5f53\u524d\u72b6\u6001\u7684 \u6240\u6709\u7236\u72b6\u6001 \u4e00\u7ea7\u7ea7\u653e\u5165\u5806\u6808\n        curStateInfo = curStateInfo.parentStateInfo;\n    }\n\n    // \u6e05\u7a7a \u72b6\u6001\u5806\u6808\n    // Empty the StateStack\n    mStateStackTopIndex = -1;\n    // \u4e34\u65f6\u5806\u6808 \u6362\u5230 \u72b6\u6001\u5806\u6808\n    moveTempStateStackToStateStack();\n}\n</code></pre> <ul> <li>\u62ff\u6848\u4f8b\u4e2d\u72b6\u6001\u6765\u4e3e\u4f8b\uff0c\u5c06<code>\u521d\u59cb\u5316\u72b6\u6001</code>\u653e\u5165\u00a0<code>mTempStateStack</code>\u5806\u6808\u4e2d</li> <li>\u5c06<code>\u521d\u59cb\u5316\u72b6\u6001</code>\u7684<code>\u7236\u72b6\u6001</code>\u3001<code>\u7236\u7236\u72b6\u6001</code>\u3001<code>\u7236\u7236\u7236\u72b6\u6001</code>... \u90fd\u4e00\u4e00\u653e\u5165\u5230mTempStateStack\u5806\u6808\u4e2d</li> </ul> <p></p> <ul> <li>\u7136\u540emoveTempStateStackToStateStack()\u65b9\u6cd5\u4e2d\uff0c<code>mTempStateStack</code>\u51fa\u6808\uff0c<code>mStateStack</code>\u5165\u6808\uff0c\u5c06\u6240\u6709\u72b6\u6001\u4fe1\u606f\u5bfc\u5165\u5230<code>mStateStack</code>\u5806\u6808\uff0c\u5e76\u6e05\u7a7a<code>mTempStateStack</code>\u5806\u6808\u3002</li> </ul> <p></p> <p>\u5230\u8fd9\u91cc\uff0c\u521d\u59cb\u5316\u57fa\u672c\u5b8c\u6210\uff0c\u4f46\u6211\u4eec\u8fd8\u843d\u4e0b\u4e00\u90e8\u5206\u4ee3\u7801\u6ca1\u6709\u8bf4\uff1a</p> <pre><code>// \u53d1\u9001\u521d\u59cb\u5316\u5b8c\u6210\u7684\u6d88\u606f\uff08\u6d88\u606f\u653e\u5165\u5230\u961f\u5217\u7684\u6700\u524d\u8fb9\uff09\nsendMessageAtFrontOfQueue(obtainMessage(SM_INIT_CMD, mSmHandlerObj));\n</code></pre> <ul> <li>\u53d1\u9001\u4e00\u4e2a\u521d\u59cb\u5316\u5b8c\u6210\u7684\u6d88\u606f\u5230<code>SmHandler</code>\u5f53\u4e2d\u3002</li> </ul> <p>\u4e0b\u8fb9\u6765\u770b\u4e00\u4e0b<code>SmHandler</code>\u7684<code>handleMessage(Message msg)</code>\u65b9\u6cd5\uff1a</p> <pre><code>public final void handleMessage(Message msg) {\n\n    // \u5904\u7406\u6d88\u606f\n    if (!mHasQuit) {\n        // \u4fdd\u5b58\u4f20\u5165\u7684\u6d88\u606f\n        mMsg = msg;\n        State msgProcessedState = null;\n        // \u5df2\u5b8c\u6210\u521d\u59cb\u5316\n        if (mIsConstructionCompleted) {\n        // ..\n        }\n        // \u63a5\u6536\u5230 \u521d\u59cb\u5316\u5b8c\u6210\u7684\u6d88\u606f\n        else if (!mIsConstructionCompleted\n                &amp;&amp; (mMsg.what == SM_INIT_CMD) &amp;&amp; (mMsg.obj == mSmHandlerObj)) {\n            /** Initial one time path. */\n            // \u521d\u59cb\u5316\u5b8c\u6210\n            mIsConstructionCompleted = true;\n            // \u8c03\u7528\u5806\u6808\u4e2d\u72b6\u6001\u7684enter\u65b9\u6cd5\uff0c\u5e76\u5c06\u5806\u6808\u4e2d\u7684\u72b6\u6001\u8bbe\u7f6e\u4e3a\u6d3b\u8dc3\u72b6\u6001\n            invokeEnterMethods(0);\n        } else {\n        // ..\n        }\n        // \u6267\u884cTransition\n        performTransitions(msgProcessedState, msg);\n    }\n}\n</code></pre> <ul> <li>\u63a5\u6536\u5230\u521d\u59cb\u5316\u5b8c\u6210\u7684\u6d88\u606f\u540e<code>mIsConstructionCompleted = true;</code>\u5bf9\u5e94\u7684\u6807\u5fd7\u4f4d\u53d8\u8fc7\u6765</li> <li>\u6267\u884c\u00a0<code>invokeEnterMethods</code>\u65b9\u6cd5\u5c06<code>mStateStack</code>\u5806\u6808\u4e2d\u7684\u6240\u6709\u72b6\u6001\u8bbe\u7f6e\u4e3a\u6d3b\u8dc3\u72b6\u6001\uff0c\u5e76\u7531<code>\u7236\u2014&gt;\u5b50</code>\u7684\u987a\u5e8f\uff0c\u6267\u884c\u5806\u6808\u4e2d\u72b6\u6001\u7684<code>enter()</code>\u65b9\u6cd5</li> <li><code>performTransitions(msgProcessedState, msg);</code>\u5728start()\u65f6\uff0c\u5176\u4e2d\u7684\u5185\u5bb9\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u56e0\u6b64\u5148\u4e0d\u4ecb\u7ecd\u3002</li> </ul> <p><code>invokeEnterMethods</code>\u65b9\u6cd5\u7684\u65b9\u6cd5\u4f53\u5982\u4e0b\uff1a</p> <pre><code>private final void invokeEnterMethods(int stateStackEnteringIndex) {\n    for (int i = stateStackEnteringIndex; i &lt;= mStateStackTopIndex; i++) {\n        if (mDbg) mSm.log(\"invokeEnterMethods: \" + mStateStack[i].state.getName());\n        mStateStack[i].state.enter();\n        mStateStack[i].active = true;\n    }\n}\n</code></pre> <ul> <li>\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u5c06<code>mStateStack</code>\u5806\u6808\u4e2d\u7684\u6240\u6709\u72b6\u6001\u8bbe\u7f6e\u4e3a\u6d3b\u8dc3\u72b6\u6001\uff0c\u5e76\u7531<code>\u7236\u2014&gt;\u5b50</code>\u7684\u987a\u5e8f\uff0c\u6267\u884c\u5806\u6808\u4e2d\u72b6\u6001\u7684<code>enter()</code>\u65b9\u6cd5</li> </ul> <p>\u5230\u6b64start()\u5b8c\u6210\uff0c\u6700\u7ec8<code>mStateStack</code>\u5806\u6808\u72b6\u6001\uff0c\u4e5f\u5982\u4e0a\u56fe\u6240\u793a\u3002</p>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#23","title":"2.3 \u72b6\u6001\u8f6c\u5316","text":"<p>\u8fd8\u662f\u62ff\u6848\u4f8b\u4e2d\u7684\u4ee3\u7801\u4e3e\u4f8b\uff1a</p> <pre><code>// \u83b7\u53d6 \u72b6\u6001\u673a\u5f15\u7528\nPersonStateMachine personStateMachine = PersonStateMachine.makePerson();\n// \u521d\u59cb\u72b6\u6001\u4e3aSleepState\uff0c\u53d1\u9001\u6d88\u606fMSG_WAKEUP\npersonStateMachine.sendMessage(PersonStateMachine.MSG_WAKEUP);\n</code></pre> <ul> <li>\u901a\u8fc7\u8c03\u7528<code>sendMessage(PersonStateMachine.MSG_WAKEUP);</code>\u65b9\u6cd5\uff0c\u5411<code>SmHandler</code>\u4e2d\u53d1\u9001\u4e00\u4e2a\u6d88\u606f\uff0c\u6765\u89e6\u53d1\u72b6\u6001\u8f6c\u5316\u3002</li> <li>\u53ef\u4ee5\u8bf4\u00a0<code>sendMessage(PersonStateMachine.MSG_WAKEUP);</code>\u6d88\u606f\uff0c\u4e3a\u72b6\u6001\u8f6c\u5316\u7684\u5bfc\u706b\u7d22\u3002</li> </ul> <p>\u4e0b\u8fb9\uff0c\u518d\u6b21\u770b\u4e00\u4e0b<code>SmHandler</code>\u7684<code>handleMessage(Message msg)</code>\u65b9\u6cd5\uff1a</p> <pre><code>public final void handleMessage(Message msg) {\n    // \u5904\u7406\u6d88\u606f\n    if (!mHasQuit) {\n        // \u4fdd\u5b58\u4f20\u5165\u7684\u6d88\u606f\n        mMsg = msg;\n        State msgProcessedState = null;\n        // \u5df2\u5b8c\u6210\u521d\u59cb\u5316\n        if (mIsConstructionCompleted) {\n            // \u5904\u7406\u6d88\u606f\u7684\u72b6\u6001\n            msgProcessedState = processMsg(msg);\n        }\n        // \u63a5\u6536\u5230 \u521d\u59cb\u5316\u5b8c\u6210\u7684\u6d88\u606f\n        else if (!mIsConstructionCompleted\n                &amp;&amp; (mMsg.what == SM_INIT_CMD) &amp;&amp; (mMsg.obj == mSmHandlerObj)) {\n            // \u521d\u59cb\u5316\u5b8c\u6210\n            mIsConstructionCompleted = true;\n            // \u8c03\u7528\u5806\u6808\u4e2d\u72b6\u6001\u7684enter\u65b9\u6cd5\uff0c\u5e76\u5c06\u5806\u6808\u4e2d\u7684\u72b6\u6001\u8bbe\u7f6e\u4e3a\u6d3b\u8dc3\u72b6\u6001\n            invokeEnterMethods(0);\n        } else {\n            throw new RuntimeException(\"StateMachine.handleMessage: \"\n                    + \"The start method not called, received msg: \" + msg);\n        }\n        // \u6267\u884cTransition\n        performTransitions(msgProcessedState, msg);\n    }\n}\n</code></pre> <ul> <li>\u56e0\u4e3a\u521d\u59cb\u5316\u5df2\u7ecf\u5b8c\u6210\uff0c\u4ee3\u7801\u4f1a\u76f4\u63a5\u8d70\u5230<code>processMsg(msg);</code>\u65b9\u6cd5\u4e2d\u3002</li> </ul> <p>\u6211\u4eec\u6765\u770b<code>processMsg(msg);</code>\u65b9\u6cd5\uff1a</p> <pre><code>private final State processMsg(Message msg) {\n    // \u5806\u6808\u4e2d\u627e\u5230\u5f53\u524d\u72b6\u6001\n    StateInfo curStateInfo = mStateStack[mStateStackTopIndex];\n    // \u662f\u5426\u4e3a\u9000\u51fa\u6d88\u606f\n    if (isQuit(msg)) {\n        // \u8f6c\u5316\u4e3a\u9000\u51fa\u72b6\u6001\n        transitionTo(mQuittingState);\n    } else {\n        // \u72b6\u6001\u8fd4\u56detrue \u5219\u662f\u53ef\u5904\u7406\u6b64\u72b6\u6001\n        // \u72b6\u6001\u8fd4\u56defalse \u5219\u4e0d\u53ef\u4ee5\u5904\u7406\n        while (!curStateInfo.state.processMessage(msg)) {\n            // \u5f53\u524d\u72b6\u6001\u7684\u7236\u72b6\u6001\n            curStateInfo = curStateInfo.parentStateInfo;\n            // \u7236\u72b6\u6001\u672anull\n            if (curStateInfo == null) {\n                // \u56de\u8c03\u5230\u672a\u5904\u7406\u6d88\u606f\u65b9\u6cd5\u4e2d\n                mSm.unhandledMessage(msg);\n                break;\n            }\n        }\n    }\n    // \u6d88\u606f\u5904\u7406\u540e\uff0c\u8fd4\u56de\u5f53\u524d\u72b6\u6001\u4fe1\u606f\n    // \u5982\u679c\u6d88\u606f\u4e0d\u5904\u7406\uff0c\u5219\u8fd4\u56de\u5176\u7236\u72b6\u6001\u5904\u7406\uff0c\u8fd4\u56de\u5904\u7406\u6d88\u606f\u7684\u7236\u72b6\u6001\n    return (curStateInfo != null) ? curStateInfo.state : null;\n}\n</code></pre> <ul> <li>\u4ee3\u7801\u4f1a\u76f4\u63a5\u8d70\u5230<code>while (!curStateInfo.state.processMessage(msg))</code></li> </ul> <p>\u6267\u884c<code>mStateStack</code>\u5806\u6808\u4e2d\uff0c\u6700\u4e0a\u5c42\u72b6\u6001\u7684\u00a0<code>processMessage(msg)</code>\u65b9\u6cd5\u3002\u6848\u4f8b\u4e2d\u8fd9\u4e2a\u72b6\u6001\u4e3a<code>SleepState</code></p> <ul> <li>\u8fd9\u91cc</li> </ul> <p>\u5982\u679c<code>mStateStack</code>\u5806\u6808\u4e2d\u72b6\u6001\u7684processMessage(msg)\u65b9\u6cd5\u8fd4\u56detrue\uff0c\u5219\u8868\u793a\u5176\u6d88\u8d39\u6389\u4e86\u8fd9\u4e2a\u6d88\u606f\uff1b \u5982\u679c\u5176\u8fd4\u56defalse\uff0c\u5219\u8868\u793a\u4e0d\u6d88\u8d39\u6b64\u6d88\u606f\uff0c\u90a3\u4e48\u8be5\u6d88\u606f\u5c06\u7ee7\u7eed\u5411\u5176<code>\u7236\u72b6\u6001</code>\u8fdb\u884c\u4f20\u9012\uff1b</p> <ul> <li>\u6700\u7ec8\u5c06\u8fd4\u56de\uff0c\u6d88\u8d39\u6389\u8be5\u6d88\u606f\u7684\u72b6\u6001\u3002</li> </ul> <p>\u8fd9\u91cc\uff0c\u5806\u6808\u5bf9\u4e0a\u5c42\u7684\u72b6\u6001\u4e3a<code>SleepState</code>\u3002\u6240\u4ee5\u6211\u4eec\u770b\u4e00\u4e0b\u5176\u5bf9\u5e94\u7684<code>processMessage(msg)</code>\u65b9\u6cd5\u3002</p> <pre><code>public boolean processMessage(Message msg) {\n    switch (msg.what) {\n        // \u6536\u5230\u6e05\u9192\u4fe1\u53f7\n        case MSG_WAKEUP:\n            // \u8fdb\u5165\u5de5\u4f5c\u72b6\u6001\n            transitionTo(mWorkState);\n            //...\n            //...\n            //\u53d1\u9001\u997f\u4e86\u4fe1\u53f7...\n            sendMessage(obtainMessage(MSG_HUNGRY));\n            break;\n        case MSG_HALTING:\n        // ...\n            break;\n        default:\n            return false;\n    }\n    return true;\n}\n</code></pre> <ul> <li>\u5728SleepState\u72b6\u6001\u7684<code>processMessage(Message msg)</code>\u65b9\u6cd5\u4e2d\uff0c\u5176\u6536\u5230<code>MSG_WAKEUP</code>\u6d88\u606f\u540e\uff0c\u4f1a\u8c03\u7528<code>transitionTo(mWorkState);</code>\u65b9\u6cd5\uff0c\u5c06\u76ee\u6807\u72b6\u6001\u8bbe\u7f6e\u4e3a<code>mWorkState</code>\u3002</li> </ul> <p>\u6211\u4eec\u770b\u4e00\u4e0b<code>transitionTo(mWorkState);</code>\u65b9\u6cd5\uff1a</p> <pre><code>private final void transitionTo(IState destState) {\n    mDestState = (State) destState;\n}\n</code></pre> <ul> <li>\u53ef\u4ee5\u770b\u5230\uff0c<code>transitionTo(IState destState)</code>\u65b9\u6cd5\uff0c\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u72b6\u6001\u8d4b\u503c\u3002</li> </ul> <p>\u4e0b\u8fb9\u6211\u4eec\u56de\u5230<code>SmHandler</code>\u7684<code>handleMessage(Message msg)</code>\u65b9\u6cd5\uff1a</p> <ul> <li>\u4ee3\u7801\u4f1a\u6267\u884c\u5230<code>SmHandler.handleMessage(Message msg)</code>\u7684<code>performTransitions(msgProcessedState, msg);</code>\u65b9\u6cd5\u4e4b\u4e2d\u3002</li> <li>\u800c\u8fd9\u91cc\u6211\u4eec\u4f20\u5165\u7684\u53c2\u6570<code>msgProcessedState</code>\u4e3a<code>mSleepState</code>\u3002</li> </ul> <pre><code>private void performTransitions(State msgProcessedState, Message msg) {\n    // \u5f53\u524d\u72b6\u6001\n    State orgState = mStateStack[mStateStackTopIndex].state;\n    // ...\n    // \u76ee\u6807\u72b6\u6001\n    State destState = mDestState;\n    if (destState != null) {\n        while (true) {\n            // \u76ee\u6807\u72b6\u6001 \u653e\u5165temp \u5806\u6808\n            // \u76ee\u6807\u72b6\u6001\u7684 \u7236\u72b6\u6001 \u4f5c\u4e3a\u53c2\u6570 \u4f20\u5165\u4e0b\u4e00\u7ea7\n            StateInfo commonStateInfo = setupTempStateStackWithStatesToEnter(destState);\n            // commonStateInfo \u72b6\u6001\u7684\u5b50\u72b6\u6001\u5168\u90e8\u9000\u6808\n            invokeExitMethods(commonStateInfo);\n            // \u76ee\u6807\u72b6\u6001\u5165\u6808\n            int stateStackEnteringIndex = moveTempStateStackToStateStack();\n            // \u5165\u6808\u72b6\u6001 \u6d3b\u8dc3\n            invokeEnterMethods(stateStackEnteringIndex);\n            //...\n            moveDeferredMessageAtFrontOfQueue();\n\n            if (destState != mDestState) {\n                // A new mDestState so continue looping\n                destState = mDestState;\n            } else {\n                // No change in mDestState so we're done\n                break;\n            }\n        }\n        mDestState = null;\n    }\n    // ...\n}\n</code></pre> <ul> <li>\u4ee5\u4e0a\u65b9\u6cd5\u4e2d \u4f20\u5165\u7684\u53c2\u6570<code>msgProcessedState</code>\u4e3a<code>mSleepState</code></li> <li>\u65b9\u6cd5\u4e2d<code>destState</code>\u76ee\u6807\u72b6\u6001\u4e3a\u00a0<code>mWorkState</code></li> </ul> <p>\u6b64\u65f6\u6b64\u523b<code>performTransitions(State msgProcessedState, Message msg)</code>\u65b9\u6cd5\u4e2d\u5185\u5bb9\u7684\u6267\u884c\u793a\u610f\u56fe\u5982\u4e0b\uff1a</p>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#i-mtempstatestack","title":"I: \u76ee\u6807\u72b6\u6001\u653e\u5165\u5230mTempStateStack\u961f\u5217\u4e2d","text":"<pre><code>// \u76ee\u6807\u72b6\u6001 \u653e\u5165temp \u5806\u6808\n// \u76ee\u6807\u72b6\u6001\u7684 \u7236\u72b6\u6001 \u4f5c\u4e3a\u53c2\u6570 \u4f20\u5165\u4e0b\u4e00\u7ea7\nStateInfo commonStateInfo = setupTempStateStackWithStatesToEnter(destState);\n</code></pre> <ul> <li>1\u3001\u5c06<code>WorkState</code>\u72b6\u6001\u653e\u5165\u5230<code>mTempStateStack</code>\u5806\u6808\u4e2d</li> <li>2\u3001\u5c06<code>WorkState</code>\u72b6\u6001\u7684<code>\u975e\u6d3b\u8dc3\u7236\u72b6\u6001</code>\u4e00\u4e00\u5165<code>mTempStateStack</code>\u5806\u6808</li> <li>3\u3001\u56e0\u4e3a<code>WorkState</code>\u72b6\u6001\u7684\u7236\u72b6\u6001\u4e3a<code>BoringState</code>\uff0c\u662f\u6d3b\u8dc3\u72b6\u6001\uff0c\u56e0\u6b64\u53ea\u5c06<code>WorkState</code>\u653e\u5165\u5230<code>mTempStateStack</code>\u5806\u6808\u4e2d</li> <li>4\u3001\u8fd4\u56de\u6d3b\u8dc3\u7684\u7236\u72b6\u6001<code>BoringState</code></li> </ul> <p>\u4ee5\u4e0a\u4ee3\u7801\u7684\u6267\u884c\u793a\u610f\u56fe\u5982\u4e0b\uff1a </p>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#ii-commonstateinfomstatestack","title":"II:\u00a0<code>commonStateInfo</code>\u72b6\u6001\u5728<code>mStateStack</code>\u5806\u6808\u4e2d\u7684\u5b50\u72b6\u6001\u9000\u5806\u6808","text":"<p><code>commonStateInfo</code>\u4e3a<code>setupTempStateStackWithStatesToEnter(destState);</code>\u65b9\u6cd5\u7684\u8fd4\u56de\u53c2\u6570\u3002\u8fd9\u91cc\u662f<code>BoringState</code></p> <pre><code>// commonStateInfo \u72b6\u6001\u7684\u5b50\u72b6\u6001\u5168\u90e8\u9000\u6808\ninvokeExitMethods(commonStateInfo);\n</code></pre> <ul> <li>1\u3001<code>BoringState</code>\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u5230<code>invokeExitMethods(commonStateInfo);</code>\u65b9\u6cd5\u4e2d</li> <li>2\u3001\u5176\u65b9\u6cd5\u5185\u5bb9\u4e3a\uff0c\u5c06<code>BoringState</code>\u72b6\u6001\u7684<code>\u5168\u90e8\u5b50\u72b6\u6001\u9000\u5806\u6808</code></li> </ul> <p>\u4ee5\u4e0a\u4ee3\u7801\u7684\u6267\u884c\u793a\u610f\u56fe\u5982\u4e0b\uff1a </p>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/StateMachine/#iii-mtempstatestackmstatestack","title":"III:\u00a0<code>mTempStateStack</code>\u5168\u90e8\u72b6\u6001\u51fa\u5806\u6808\uff0c<code>mStateStack</code>\u5165\u5806\u6808","text":"<pre><code>// \u76ee\u6807\u72b6\u6001\u5165\u6808\nint stateStackEnteringIndex = moveTempStateStackToStateStack();\n// \u5165\u6808\u72b6\u6001 \u6d3b\u8dc3\ninvokeEnterMethods(stateStackEnteringIndex);\n</code></pre> <ul> <li><code>moveTempStateStackToStateStack</code>\u65b9\u6cd5\u4e2d\uff1a<code>mTempStateStack</code>\u5168\u90e8\u72b6\u6001\u51fa\u5806\u6808\uff0c<code>mStateStack</code>\u5165\u5806\u6808</li> <li>invokeEnterMethods(stateStackEnteringIndex);\u65b9\u6cd5\u4e2d\uff0c\u5c06\u65b0\u52a0\u5165\u7684\u72b6\u6001\u8bbe\u7f6e\u4e3a<code>\u6d3b\u8dc3\u72b6\u6001</code>\uff1b\u5e76\u8c03\u7528\u5176\u5bf9\u5e94\u7684<code>enter()</code>\u65b9\u6cd5\u3002</li> </ul> <p>\u6700\u7ec8\u7684\u5806\u6808\u72b6\u6001\u4e3a\uff1a </p> <p>\u5230\u6b64StateMachine\u7684\u6e90\u7801\u8bb2\u89e3\u5b8c\u6210\u3002 \u611f\u5174\u8da3\u7684\u540c\u5b66\uff0c\u8fd8\u662f\u81ea\u5df1\u8bfb\u4e00\u904d\u6e90\u7801\u5427\uff0c\u5e0c\u671b\u6211\u7684\u8fd9\u7bc7\u6587\u7ae0\u53ef\u4ee5\u4e3a\u4f60\u7684\u6e90\u7801\u9605\u8bfb\u63d0\u4f9b\u4e00\u4e9b\u5e2e\u52a9\u3002</p>","tags":["State","\u72b6\u6001\u673a"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Android/%E8%B5%84%E6%96%99/%E3%80%90%E8%BD%AC%E3%80%91Android%20%E5%AE%9E%E7%8E%B0%E4%B9%A6%E7%B1%8D%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C----%E5%8E%9F%E7%90%86%E7%AF%87/","title":"\u3010\u8f6c\u3011Android \u5b9e\u73b0\u4e66\u7c4d\u7ffb\u9875\u6548\u679c    \u539f\u7406\u7bc7","text":"<p>\u8f6c\u8f7d\u81ea  By \u4f55\u660e\u6842\uff08http://blog.csdn.net/hmg25\uff09  https://blog.csdn.net/hmg25/article/details/6306479</p> <p>\u4e4b\u524d\u770b\u5230\u50cfipad\u4e0a\u7684ibook\u7684\u6a21\u62df\u4e66\u7c4d\u7ffb\u9875\u7684\u7279\u6548\u611f\u89c9\u5f88\u70ab\uff0c\u5728android\u4e0a\u4e5f\u6709\u50cflaputa\u548cireader\u7b49\u5e94\u7528\u5b9e\u73b0\u6709\u8fd9\u4e2a\u7279\u6548\uff0c\u5728\u7f51\u4e0a\u641c\u7d22\u4e86\u4e00\u4e0b\u597d\u50cf\u4e5f\u6ca1\u6709\u73b0\u6210\u7684\u4f8b\u5b50\uff0c\u6240\u4ee5\u81ea\u5df1\u52a8\u624b\u5b9e\u73b0\u4e86\u4e00\u4e2a\uff0c\u73b0\u5728\u5c06\u5b9e\u73b0\u7684\u8fc7\u7a0b\u8bb0\u5f55\u4e0b\u6765\u3002</p> <p></p> <p>\u5b9e\u73b0\u771f\u5b9e\u7684\u7ffb\u9875\u6548\u679c\uff0c\u4e3a\u4e86\u80fd\u5728\u7ffb\u9875\u7684\u8fc7\u7a0b\u4e2d\u770b\u5230\u4e0b\u4e00\u9875\u7684\u5185\u5bb9\uff0c\u5728\u7ffb\u9875\u4e4b\u524d\u5fc5\u987b\u51c6\u5907\u4e24\u5f20\u9875\u9762\uff0c\u4e00\u5f20\u662f\u5f53\u524d\u9875\uff0c\u53e6\u4e00\u5f20\u662f\u4e0b\u4e00\u9875\u3002\u7ffb\u9875\u7684\u8fc7\u7a0b\u5c31\u662f\u5bf9\u8fd9\u4e24\u5f20\u9875\u9762\u7684\u526a\u5207\uff0c\u7ec4\u5408\u8fc7\u7a0b\u3002</p> <p>\u7528\u6237\u770b\u5230\u7684\u53ef\u4ee5\u5206\u4e3a3\u90e8\u5206\uff1a\u5f53\u524d\u9875\u7684\u53ef\u89c1\u90e8\u5206(\u4e0b\u56fe\u7eff\u8272\u90e8\u5206)\uff0c\u628a\u4e66\u9875\u7ffb\u8d77\u6765\u540e\u770b\u5230\u7684\u80cc\u9762\u533a\u57df(\u4e0b\u56fe\u9ec4\u8272\u90e8\u5206)\uff0c\u628a\u4e66\u9875\u7ffb\u8d77\u6765\u540e\u770b\u5230\u7684\u4e0b\u4e00\u9875\u7684\u4e00\u89d2(\u4e0b\u56fe\u7eff\u8272\u90e8\u5206)\u3002</p> <p></p> <p>\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u6c42\u5f97\u4e86\u5305\u542b\u9ec4\u8272\u533a\u57df\u548c\u84dd\u8272\u533a\u57df\u7684Path, \u5047\u8bbe\u4e3amPath0,\u90a3\u4e48\u7eff\u8272\u533a\u57df\u5219\u53ef\u4ee5\u4f7f\u7528Canvas.clipPath(mPath0, Region.Op.XOR)\u6765\u526a\u88c1\u7ed8\u5236\uff1b\u800c\u84dd\u8272\u533a\u57df\u5219\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528(\u5047\u8bbe\u9ec4\u8272\u533a\u57df\u7684Path\u4e3amPath1) </p> <p>\u5bf9clipPath\u4e0d\u662f\u5f88\u719f\u7684\u7ae5\u978b\u53ef\u4ee5\u53bb\u590d\u4e60\u4e0b \u81ea\u5e26apidemo\u7684Clipping\u4f8b\u5b50\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u6765\u7814\u7a76\u5982\u4f55\u6c42\u53d6mPath0\uff1a</p> <p>\u4e0a\u56fe\u9ec4\u8272\u548c\u84dd\u8272\u533a\u57df\u7684mPath0\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u83b7\u53d6\uff1a</p> <p></p> <p>\u63a5\u7740\u5c31\u662f\u8981\u6c42\u51fa\u7ed8\u5236<code>path0</code>\u6240\u9700\u7684\u5404\u4e2a\u9876\u70b9\u3002</p> <p>\u6211\u4eec\u5df2\u77e5\u7684\u6761\u4ef6\u662f\uff1aa\u70b9\u5750\u6807(\u89e6\u6478\u70b9)\uff0cf\u70b9\u5750\u6807(\u663e\u793a\u754c\u9762\u7684\u5927\u5c0f)\uff0c\u76f4\u7ebfeh\u662faf\u7684\u5782\u76f4\u5e73\u5206\u7ebf\u3002</p> <p>\u5269\u4e0b\u7684\u5c31\u53d8\u6210\u6570\u5b66\u95ee\u9898\u5566~~</p> <p>\u5148\u6765\u6c42\u51fag\u70b9\u5750\u6807\u56e0\u4e3ag\u4e3aaf\u4e2d\u70b9\uff1a</p> <p>\u663e\u7136 <code>gx=(ax+fx)/2; gy=(ay+fy)/2</code></p> <p>e\u70b9\u5750\u6807\uff1a</p> <pre><code>\u6dfb\u52a0\u8865\u52a9\u7ebfgm\uff0cm\u70b9\u5750\u6807\u4e3a(gx, mHeight);\n\n\u7531\u76f8\u4f3c\u5782\u76f4\u4e09\u89d2\u5f62egm\u548cgmf\u53ef\u77e5\uff1a\n\nem=gm*gm/mf;\n</code></pre> <p>\u8fd9\u6837e\u70b9\u5750\u6807\u4e3a\uff1a</p> <p><code>(gx-em, mHeight)</code></p> <p>\u540c\u7406\u53ef\u4ee5\u6c42\u51fah\u70b9\u5750\u6807\u3002</p> <p>C\u70b9\u5750\u6807\uff1a</p> <p>\u4e3a\u7b80\u5316\u8ba1\u7b97\uff0c\u6211\u4eec\u4ee4n\u70b9\u4e3aag\u4e2d\u70b9\uff0c\u8fd9\u6837\u6709\u4e09\u89d2\u5f62cjf\u548cehf\u5f97\uff1a</p> <p><code>cx=ex- ef/2</code></p> <p>c\u70b9\u5750\u6807\u4e3a:</p> <p><code>ex- ef/2, mHeight\uff09</code></p> <p>\u540c\u7406\u6c42\u5f97j\u70b9\u5750\u6807\u3002</p> <p>\u4ee5\u4e0b\u63a8\u5bfc\u9700\u8981\u8f83\u591a\u7684\u6570\u5b66\u77e5\u8bc6\uff0c\u4e0d\u8bb0\u5f97\u7684\u7ae5\u978b\uff0c\u81ea\u89c9\u590d\u4e60\u53bb~~</p> <p>\u4e00\u6761\u76f4\u7ebf\u7684\u51fd\u6570\u4e3a\uff1a</p> <p>Y=ax+b;</p> <p>\u901a\u8fc7\u5df2\u77e5\u4e24\u70b9\u6c42\u76f4\u7ebf\uff1a </p> <pre><code>a = (y2-y1)/(x2-x1);\n\nb = (x2*y1-y2*x1)/(x2-x1);\n</code></pre> <p>\u4e24\u6761\u76f8\u4ea4\u76f4\u7ebf\u4ea4\u70b9\u7684\u5750\u6807\u4e3a\uff1a</p> <pre><code>x= (b2-b1)/(a1-a2);\n\ny=a1x+b1\u6216\u8005y=a2x+b2\n</code></pre> <p>\u7efc\u4e0a\uff0c4\u70b9\u76f8\u4ea4\u7684\u76f4\u7ebf\u7684\u4ea4\u70b9\u4e3a\uff1a</p> <pre><code>x = ( (x4*y3-y4*x3)/(x4-x3)-(x2*y1-y2*x1)/(x2-x1)) /\n\n((y2-y1)/(x2-x1)- (y4-y3)/(x4-x3) )\n\n= ( (x4*y3-y4*x3) (x2-x1)- (x2*y1-y2*x1) (x4-x3) ) /\n\n( (y2-y1) (x4-x3)- (y4-y3) (x2-x1) )\n</code></pre> <p>\u5c06\u4e4b\u524d\u6c42\u5f97\u7684 a,e,c,j\u56db\u4e2a\u70b9\u5e26\u5165\u4e0a\u5f0f\u5219\u53ef\u4ee5\u6c42\u51fa b. \u540c\u7406\u53ef\u6c42k\u70b9\u3002</p> <p>d\u70b9\u5750\u6807\uff1a</p> <p>d\u4e3ape\u7684\u4e2d\u70b9\uff0c\u6240\u4ee5\uff1a</p> <pre><code>dx=((cx+bx)/2+ex)/2\n\ndy=((cy+by)/2+ey)/2\n</code></pre> <p>\u540c\u7406 \u53ef\u6c42 i \u70b9\u3002</p> <p>\u901a\u8fc7\u4e0a\u8ff0\u6c42\u89e3\uff0c\u7ed8\u5236\u7ffb\u9875\u6548\u679c\u7684\u5404\u4e2a\u9876\u70b9\u5747\u5df2\u5f97\u51fa\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u8d34\u56fe\uff0c\u7ed8\u5236\u9634\u5f71\u3002</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/HarmonyOS/%E5%85%A5%E5%8F%A3/","title":"\u5165\u53e3","text":"<p>[!NOTE] \u7248\u672c\u8bf4\u660e  - 2023-11-31 \u5f53\u524d\u6700\u65b0\u7248\u672c3.1/4.0\uff0cNEXT\u7248\u672c\u4ec5\u9762\u5411\u4f01\u4e1a\u5f00\u53d1\u8005</p>","tags":["HamonyOS"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/HarmonyOS/%E5%85%A5%E5%8F%A3/#preview","title":"Preview","text":"<p>https://developer.harmonyos.com/cn/notice/20230804/</p>","tags":["HamonyOS"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/HarmonyOS/%E5%85%A5%E5%8F%A3/#api","title":"API\u6587\u6863","text":"<p>https://developer.harmonyos.com/cn/documentation/overview/?catalogVersion=V3</p>","tags":["HamonyOS"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/HarmonyOS/%E5%85%A5%E5%8F%A3/#_1","title":"\u77e5\u8bc6\u5730\u56fe","text":"<p>https://developer.harmonyos.com/cn/documentation/?catalogVersion=V3</p>","tags":["HamonyOS"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/HarmonyOS/%E5%85%A5%E5%8F%A3/#_2","title":"\u5f00\u53d1\u5957\u4ef6","text":"<p>https://developer.harmonyos.com/cn/develop/</p>","tags":["HamonyOS"]},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Python/%E7%AD%BE%E5%88%B0%E8%84%9A%E6%9C%AC/","title":"\u7b7e\u5230\u811a\u672c","text":""},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Python/%E7%AD%BE%E5%88%B0%E8%84%9A%E6%9C%AC/#_1","title":"\u7b7e\u5230\u6398\u91d1","text":"<p>\u81ea\u7531\u9cb8\u76ee\u524d\u4e0d\u7f3a\u6d41\u91cf\uff0c\u4e0d\u641e</p> <pre><code># -*- coding: utf8 -*-\n\nimport requests, json\n\nfrom requests import utils\n\n\n\nlink = \"\u65b9\u7cd6\u6d88\u606f\u94fe\u63a5\"\n\ncheckUrl = \"https://api.juejin.cn/growth_api/v1/check_in\"\n\ndrawUrl = \"https://api.juejin.cn/growth_api/v1/lottery/draw\"\n\n\n\ncookies = {\n\n\u00a0 \u00a0 'bt': '111',\n\n\u00a0 \u00a0 'bt\u5c0f\u53f7': '1'\n\n}\n\nmsgContent = {\"text\": \"\u6bcf\u65e5\u5b9a\u65f6\u7b7e\u5230\", \"desp\": \"\", \"channel\": \"9\"}\n\n\n\n\ndef autoJuejin(name, cookie):\n\n\u00a0 \u00a0 headers = {\"Cookie\": cookie}\n\n\u00a0 \u00a0 # \u7b7e\u5230\n\n\u00a0 \u00a0 dataJson = requests.post(checkUrl, headers=headers).text\n\n\u00a0 \u00a0 data = json.loads(dataJson)\n\n\u00a0 \u00a0 isCheckSuccess = data[\"err_msg\"] == \"success\"\n\n\u00a0 \u00a0 totalPoint = -1\n\n\u00a0 \u00a0 lucky = -1\n\n\u00a0 \u00a0 if isCheckSuccess:\n\n\u00a0 \u00a0 \u00a0 \u00a0 totalPoint = data[\"data\"][\"sum_point\"]\n\n\u00a0 \u00a0 # \u62bd\u5956\n\n\u00a0 \u00a0 dataJson = requests.post(drawUrl, headers=headers).text\n\n\u00a0 \u00a0 data = json.loads(dataJson)\n\n\u00a0 \u00a0 isDrawSuccess = data[\"err_msg\"] == \"success\"\n\n\u00a0 \u00a0 if isDrawSuccess:\n\n\u00a0 \u00a0 \u00a0 \u00a0 lucky = data[\"data\"][\"total_lucky_value\"]\n\n\n\n\u00a0 \u00a0 msgContent[\"desp\"] += f'# \u7528\u6237 {name} \\n'\n\n\u00a0 \u00a0 if isCheckSuccess:\n\n\u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += \" \u7b7e\u5230\u6210\u529f,\"\n\n\u00a0 \u00a0 else:\n\n\u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += \" \u7b7e\u5230\u5931\u8d25\uff0c\"\n\n\u00a0 \u00a0 if isDrawSuccess:\n\n\u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += \"\u5355\u62bd\u6210\u529f \\n\"\n\n\u00a0 \u00a0 else:\n\n\u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += \"\u5355\u62bd\u5931\u8d25 \\n\"\n\n\u00a0 \u00a0 if totalPoint &gt;= 0:\n\n\u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += f' \u5f53\u524d\u77ff\u77f3\uff1a{totalPoint} ,'\n\n\u00a0 \u00a0 if lucky &gt; 0:\n\n\u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += f' \u5f53\u524d\u5e78\u8fd0\u503c\uff1a{lucky}/6000 '\n\n\u00a0 \u00a0 msgContent[\"desp\"] += \"\\n \\n\"\n\n\n\n\ndef freeWhaleCheck():\n\n\u00a0 \u00a0 freeLink = \"https://www.freewhale.us/user/checkin\"\n\n\u00a0 \u00a0 loginUrl = \"https://www.freewhale.club/auth/login\"\n\n\u00a0 \u00a0 username = \"btonf@outlook.com\"\n\n\u00a0 \u00a0 psd = \"Loving0302\"\n\n\u00a0 \u00a0 freeCookies = login(loginUrl, username, psd)\n\n\u00a0 \u00a0 headers = {\"Cookie\": freeCookies}\n\n\u00a0 \u00a0 dataJson = requests.post(freeLink, headers=headers).text\n\n\u00a0 \u00a0 msgContent[\"desp\"] += f'# \u81ea\u7531\u9cb8VPN\u6bcf\u65e5\u767d\u5ad6 \u00a0\\n'\n\n\u00a0 \u00a0 try:\n\n\u00a0 \u00a0 \u00a0 \u00a0 data = json.loads(dataJson)\n\n\u00a0 \u00a0 \u00a0 \u00a0 if str(data[\"ret\"]) == \"1\":\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += f'\u6210\u529f\u767d\u5ad6,{data[\"msg\"]} \\n'\n\n\u00a0 \u00a0 \u00a0 \u00a0 elif str(data[\"ret\"]) == \"0\":\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += \"\u4eca\u65e5\u5df2\u767d\u5ad6\uff0c\u8981\u9002\u5ea6 \\n\"\n\n\u00a0 \u00a0 \u00a0 \u00a0 else:\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += \"\u767b\u5f55\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55 \\n\"\n\n\u00a0 \u00a0 except Exception as e:\n\n\u00a0 \u00a0 \u00a0 \u00a0 msgContent[\"desp\"] += str(e) + \" \\n\"\n\n\n\n\ndef sendMsg():\n\n\u00a0 \u00a0 text = requests.post(link, data=msgContent).text\n\n\u00a0 \u00a0 print(text)\n\n\n\n\ndef main():\n\n\u00a0 \u00a0 for key, value in cookies.items():\n\n\u00a0 \u00a0 \u00a0 \u00a0 autoJuejin(key, value)\n\n\u00a0 \u00a0 sendMsg()\n\n\n\n\ndef login(loginUrl, account, passwd):\n\n\u00a0 \u00a0 # \u767b\u5f55\u8868\u5355\u4fe1\u606f\n\n\u00a0 \u00a0 data = {\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"email\": account,\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"passwd\": passwd,\n\n\u00a0 \u00a0 }\n\n\u00a0 \u00a0 # headers\u4fe1\u606f\n\n\u00a0 \u00a0 headers = {\n\n\u00a0 \u00a0 \u00a0 \u00a0 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.77 Safari/537.36',\n\n\u00a0 \u00a0 \u00a0 \u00a0 'content-type': 'application/x-www-form-urlencoded; charset=UTF-8',\n\n\u00a0 \u00a0 \u00a0 \u00a0 'x-requested-with': 'XMLHttpRequest'\n\n\u00a0 \u00a0 }\n\n\u00a0 \u00a0 session = requests.session()\n\n\u00a0 \u00a0 cookies = session.post(url=loginUrl, data=data, headers=headers).cookies\n\n\u00a0 \u00a0 cookie_t = requests.utils.dict_from_cookiejar(cookies)\n\n\u00a0 \u00a0 # \u5c06cookies\u8f6c\u4e3acookie\u5b57\u7b26\u4e32\n\n\u00a0 \u00a0 cookies_str = ''\n\n\u00a0 \u00a0 for cookie in cookie_t:\n\n\u00a0 \u00a0 \u00a0 \u00a0 cookies_str += cookie + \"=\" + cookies[cookie] + \";\"\n\n\u00a0 \u00a0 return cookies_str\n\n\n\n\nmain()\n</code></pre>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Python/%E8%A7%A3%E6%9E%90xml%EF%BC%8C%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%B0%8F%E5%86%99%E8%BD%AC%E5%A4%A7%E5%86%99/","title":"\u89e3\u6790xml\uff0c\u7b26\u5408\u6761\u4ef6\u7684\u5c0f\u5199\u8f6c\u5927\u5199","text":"<p>python\u81ea\u5e26\u7684\u5e93\uff0c\u4e0d\u9700\u8981\u989d\u5916\u5b89\u88c5</p>"},{"location":"%F0%9F%93%9D%20%E5%BC%80%E5%8F%91/Python/%E8%A7%A3%E6%9E%90xml%EF%BC%8C%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%B0%8F%E5%86%99%E8%BD%AC%E5%A4%A7%E5%86%99/#_1","title":"\u4ee3\u7801","text":"<pre><code>import xml.etree.ElementTree as ET\n\nimport re\n\n\n\ndef main():\n\n\u00a0 \u00a0 # \u6253\u5f00xml\u6587\u4ef6\n\n\u00a0 \u00a0 tree = ET.parse(\"strings.xml\")\n\n\u00a0 \u00a0 root = tree.getroot()\n\n\n\n\u00a0 \u00a0 # \u904d\u5386\u6240\u6709xml\u6807\u7b7e\n\n\u00a0 \u00a0 for child in root:\n\n\u00a0 \u00a0 \u00a0 \u00a0 # \u5982\u679c\u6807\u7b7e\u5b57\u7b26\u957f\u5ea6\u5c0f\u4e8e20\uff0c\u5c06\u91cc\u9762\u7684\u6bcf\u4e2a\u5355\u8bcd\u7684\u9996\u5b57\u6bcd\u5927\u5199\n\n\u00a0 \u00a0 \u00a0 \u00a0 if len(child.text) &lt; 20:\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 words = child.text.split(\" \")\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 for word in words:\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 index = words.index(word)\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 # \u8fd9\u91cc\u6709\u70b9\u95ee\u9898\uff0c\u6700\u597d\u6839\u636e\u62c6\u5206\u7684\u6570\u7ec4size\u8fdb\u884c\u5224\u65ad\uff0c\u6b63\u5e384-5\u4e2a\u5355\u8bcd\u4ee5\u5185\u7684\u53ef\u4ee5\u6b63\u5e38\u5927\u5199\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 # \u5982\u679c\u5355\u8bcd\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e3\uff0c\u5c06\u9996\u5b57\u6bcd\u5927\u5199\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if len(word) &gt;= 3 :\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if not re.match(r\"&amp;|#|/|:|%|$|\uff1a\", word):\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 word = word[0].upper() + word[1:]\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 # \u5c06\u4fee\u6539\u540e\u7684\u5355\u8bcd\u91cd\u65b0\u62fc\u63a5\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 words[index] = word\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 # \u5c06\u4fee\u6539\u540e\u7684\u6587\u672c\u8d4b\u503c\u7ed9\u6807\u7b7e\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 child.text = \" \".join(words)\n\n\n\n\u00a0 \u00a0 # \u4fdd\u5b58\u4fee\u6539\u540e\u7684xml\u6587\u4ef6\n\n\u00a0 \u00a0 tree.write(\"output.xml\")\n\n\n\nif __name__ == \"__main__\":\n\n\u00a0 \u00a0 main()\n</code></pre>"},{"location":"%F0%9F%94%A7%20%E5%B7%A5%E5%85%B7/JSON%20%E6%A0%BC%E5%BC%8F%E5%8C%96/","title":"JSON \u683c\u5f0f\u5316","text":"\u683c\u5f0f\u5316 \u590d\u5236"},{"location":"%F0%9F%94%A7%20%E5%B7%A5%E5%85%B7/%E6%97%B6%E9%97%B4%E6%88%B3%E5%B7%A5%E5%85%B7/","title":"\u65f6\u95f4\u6233\u5de5\u5177","text":"\u5168\u5c40\u65e5\u671f\u683c\u5f0f\u5316 \u9009\u62e9\u65e5\u671f\u683c\u5f0f\u5316\u65b9\u5f0f\uff1a yyyy-MM-dd HH:mm:ss yyyy\u5e74MM\u6708dd\u65e5 HH:mm:ss yyyyMMddHHmmss \u5f53\u524d\u65f6\u95f4 \u70b9\u51fb\u65f6\u95f4\u6233\u590d\u5236 \u70b9\u51fb\u65e5\u671f\u590d\u5236 \u5df2\u590d\u5236\uff01 \u65f6\u95f4\u6233\u683c\u5f0f\u8f6c\u6362 \u8f93\u5165\u65f6\u95f4\u6233\uff1a \u6beb\u79d2 \u79d2 \u8f6c\u6362\u4e3a\u683c\u5f0f\u5316\u65e5\u671f \u8f93\u5165\u683c\u5f0f\u5316\u65e5\u671f\uff1a \u8f6c\u6362\u4e3a\u65f6\u95f4\u6233 \u8f6c\u6362\u7ed3\u679c\uff1a \u590d\u5236\u7ed3\u679c"},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/Mkdocs%E9%85%8D%E7%BD%AE/","title":"Mkdocs\u914d\u7f6e","text":""},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/Mkdocs%E9%85%8D%E7%BD%AE/#_1","title":"\u5b98\u65b9","text":"<p>https://squidfunk.github.io/mkdocs-material/setup/changing-the-colors/</p>"},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/Mkdocs%E9%85%8D%E7%BD%AE/#_2","title":"\u53c2\u8003","text":"<p>https://www.cnblogs.com/Wcowin/p/17062095.html</p>"},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B/","title":"\u5b98\u65b9\u6559\u7a0b","text":"<p>MkDocs template </p> <p>Would you like to take some of your notes in Obsidian and make it public?</p> <p>This template gives you an easy (and automated) way to publish your Obsidian notes (or blog!) on your Github pages.</p> <p>With this template, you get these out-of-the-box:</p> <ul> <li>an awesome website based on Material theme, complete with a search bar (Checkout this template repo published here) </li> <li>get the Obsidian/Roam style <code>[[wikilinks]]</code> from your vault in your published notes</li> <li>Toggle between light and dark mode</li> <li>Blog folder</li> </ul>"},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B/#quick-start","title":"Quick start","text":"<ol> <li>Create a new github repository using this template. Click the green button at the top or use this link. </li> </ol> <ol> <li>Give a name to your repository. By default your notes will be published at <code>&lt;https://username.github.io/repo-name/&gt;</code><ul> <li>Copy only the <code>main</code> branch while creating the repo from the template</li> </ul> </li> <li>Clone the repository you generated into your Obsidian folder/vault.</li> <li>Move your notes that you would like to make public to the <code>repo-name/docs</code> folder.<ul> <li>Easiest way to do this would be using drag and drop within Obsidian</li> </ul> </li> <li>Commit and push the changes. Github actions will take care of the rest, publishing your notes using MkDocs, with the Material theme. </li> <li>Go to <code>Settings &gt; Pages</code> and select the select the Source as your <code>gh-pages</code> branch.</li> </ol> <p>Not working for you? Open an issue and let me know what went wrong.</p>"},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B/#configuring-your-website","title":"Configuring your website","text":""},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B/#how-do-i-arrange-notes-as-sections-and-pages","title":"How do I arrange notes as sections and pages?","text":"<p>By default, the sections and pages will follow the folder structure within <code>/docs</code>. The folders and sub-folders will show up as sections. Try not to have white spaces in your folder and file names, as these will be converted to HTML links. The webpage heading will be the same as the first-level heading in the markdown note.</p> <ul> <li>If you would like to arrange the pages manually, then use the <code>nav</code> option in the <code>mkdocs.yml</code> configuration file at the root of this repo  to set custom page navigation.<ul> <li>For example, see the setup for the Blue Book at github. Managing each page using <code>nav</code> can become cumbersome as the number of notes increase though!</li> </ul> </li> <li>The Materials theme provides multiple options to arrange sections, use navigation tabs, and many other helpful navigation setups</li> </ul>"},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B/#alternatives","title":"Alternatives","text":"<ul> <li>binyamin/eleventy-garden:  A starter site for building a mind garden with eleventy</li> <li>datopian/obsidian-flowershow: plugin for publishing with flowershow direct from your obsidian vault.</li> <li>kmaasrud/oboe: tool to convert an Obsidian vault into a static directory of HTML files.</li> <li>Jackiexiao/foam-mkdocs-template: template for Obsidian/Foam using mkdocs/mkdocs-material/mkdocs-roamlinks-plugin</li> <li>foambubble/foam-template: Foam workpace template</li> <li>ObsidianPublisher/obsidian-mkdocs-publisher-template: Obsidian Mkdocs Publisher, a free obsidian publish alternative throught Mkdocs</li> <li>KosmosisDire/obsidian-webpage-export: Webpage HTML Export lets you export single files or whole vaults as HTML websites or documents. It is similar to publish, but you get direct access to the exported HTML.</li> <li>Enveloppe/obsidian-enveloppe: publish your notes on a GitHub repository from Obsidian Vault</li> </ul>"},{"location":"%F0%9F%A7%A0%20%E7%9E%8E%E6%8A%98%E8%85%BE/mkdocs/%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B/#other-interesting-projects","title":"Other interesting projects","text":"<ul> <li>mathieudutour/gatsby-digital-garden: digital garden with Gatsby</li> <li>TuanManhCao/digital-garden: Free Obisidian Publish alternative</li> </ul>"}]}