---
dg-publish: true
---
# 预览图

![[Pasted image 20231129163415.png]]
# 思维导图

```mermaid
%%{init: {'theme':'dark'}}%%

mindmap
	root((主界面))
		状态栏
			飞行状态
			设置
			状态图标
		告警信息
		左边栏
		FPV
			FPV1
			FPV2
		飞机信息
		模式切换
		快捷按钮
			撤销/反撤销
			定位
			清除
		按钮
			操作按钮
			打点模式切换
			打点样式切换
```
# 模式

- 全自主
- 果树
- AB点
- 大田
# 功能依赖拆分
## 状态栏

|功能|依赖|
|--|--|
|告警信息|==告警模块==|
|飞机信息|==任务模块== ==飞机模块==|
|状态图标|==飞机模块==|

> [!NOTE] 无依赖
> 所有功能内部集成依赖模块即可


## 模式切换

|功能|依赖|
|--|--|
|模式显示|==状态机模式==|

> [!WARNING] 有依赖
> 依赖状态机状态改变显示内容，并会去修改状态机
> 单一功能

## 告警

|功能|依赖|
|--|--|
|告警信息|==告警模块==|

> [!NOTE] 无依赖
> 仅负责和告警模块交互，所有功能内聚

## 左边栏

|功能|依赖|
|--|--|
|内容填充|==作业模式==|

> [!ERROR] 完全依赖
> 本质作为作业模式功能扩充，属于作业模式的延伸
> 内部功能与模式强绑定


## FPV

|功能|依赖|
|--|--|
|个数|==依赖硬件==|

> [!NOTE] 无依赖
> 与飞机硬件强相关

## 飞机信息

|功能|依赖|
|-|-|
|飞机数据展示|==飞机模块==|

> [!NOTE] 无依赖
> 仅作为飞机信息的载体

## 快捷按钮

|功能|依赖|
|-|-|
|状态控制| ==作业模式==|
|按钮显示|==作业模式==|


> [!ERROR] 完全依赖
> 操作交互与作业模式强绑定

## 按钮

|功能|依赖|
|-|-|
|交互/显示|==作业模式==|

> [!ERROR] 完全依赖
> 操作交互与作业模式强绑定


# 流程图

```mermaid
%%{init: {'theme':'dark'}}%%
flowchart TD
	A[首页] -- 测绘/飞行 --> B[作业页面]
	B --> C{是否存在未完成任务}
	C --> C1{是否还原}
	C1 -- 是 --> D[获取未完成任务Mode]
	D -- X Mode --> E[State_Work_X_MODE] 
	C1 -- 否 --> F[State_Normal_Default_Mode]
	C -- 否 --> F
	F -- 选择模式 --> F1[State_Normal_X_Mode]
	F1 -- 切换模式 --> F
	F -- 测绘/编辑 --> G[State_Mapping_X_Mode]
	G --完成测绘--> F 
	F -- 选择地块 --> F2{是否未完成}
	F2 -- 是 --> E
	F2 -- 否 --> H[State_Plan_X_Mode]
	H --不作业 -->F
	H -- 作业 --> E
	E --参数检查--> E1[Prepare]
	E1 --已设置参数 --> E2[Resume]
	E1 -- 未设置 --> E3[参数设置]
	E1 --取消 --> F
	E3 -- 完成 -->E2
	E2 -- 中断 --> E4[Pause]
	E4 -- 继续 --> E2
	E4 -- 完成 --> E5[Complete]
	E2 --完成-->E5
	E2 --炸机--> E6[ERROR]
	E4 --炸机--> E6
	E6 -->F
	E5 --> F 
```
